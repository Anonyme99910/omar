import{h as L,r as D,f as N,z as B,j as S,c as o,o as d,d as t,l as V,p as j,y as z,t as l,m as r,F as y,n as v,x as E}from"./index-D-SCw9mA.js";import{t as i,f as b}from"./numbers-BTmV-EI5.js";const F={class:"space-y-6"},q={class:"flex items-center justify-between"},G={class:"card"},M={class:"grid sm:grid-cols-2 gap-4"},R={class:"font-medium text-lg"},T={class:"font-medium font-mono text-lg"},A={class:"font-medium"},H={class:"font-medium text-green-600 text-lg"},I={class:"font-medium text-lg"},J={class:"card overflow-hidden"},K={class:"table"},O={class:"list-disc pr-5"},P={class:"font-bold"},X={__name:"ClientDetails",setup(Q){const h=L(),a=D(null),w=n=>i(new Date(n).toLocaleString("en-EG")),k=n=>({draft:"مسودة",issued:"صادر",partially_paid:"مدفوع جزئياً",paid:"مدفوع",void:"ملغي",completed:"مكتملة",cancelled:"ملغاة",pending:"قيد الانتظار"})[n]||n;return N(async()=>{const{id:n}=h.params,s=await B.getCustomer(n);a.value=s.data}),(n,s)=>{var m,p,c,x,g,f;const C=S("router-link");return d(),o("div",F,[t("div",q,[s[1]||(s[1]=t("div",null,[t("h2",{class:"text-2xl font-bold"},"بيانات العميل"),t("p",{class:"text-gray-500"},"عرض معلومات العميل وتاريخ المشتريات")],-1)),V(C,{to:"/clients",class:"btn btn-secondary"},{default:j(()=>[...s[0]||(s[0]=[z("عودة للعملاء",-1)])]),_:1})]),t("div",G,[t("div",M,[t("div",null,[s[2]||(s[2]=t("p",{class:"text-sm text-gray-500"},"الاسم",-1)),t("p",R,l((m=a.value)==null?void 0:m.name),1)]),t("div",null,[s[3]||(s[3]=t("p",{class:"text-sm text-gray-500"},"الهاتف",-1)),t("p",T,l(r(i)((p=a.value)==null?void 0:p.phone)),1)]),t("div",null,[s[4]||(s[4]=t("p",{class:"text-sm text-gray-500"},"العنوان",-1)),t("p",A,l(((c=a.value)==null?void 0:c.address)||"-"),1)]),t("div",null,[s[5]||(s[5]=t("p",{class:"text-sm text-gray-500"},"إجمالي المشتريات",-1)),t("p",H,l(r(b)(((x=a.value)==null?void 0:x.total_purchases)||0)),1)]),t("div",null,[s[6]||(s[6]=t("p",{class:"text-sm text-gray-500"},"عدد الطلبات",-1)),t("p",I,l(r(i)(((g=a.value)==null?void 0:g.total_orders)||0)),1)])])]),t("div",J,[s[8]||(s[8]=t("h3",{class:"text-lg font-bold mb-4"},"سجل المشتريات",-1)),t("table",K,[s[7]||(s[7]=t("thead",null,[t("tr",null,[t("th",null,"رقم الفاتورة"),t("th",null,"التاريخ"),t("th",null,"المنتجات"),t("th",null,"الإجمالي"),t("th",null,"الحالة")])],-1)),t("tbody",null,[(d(!0),o(y,null,v(((f=a.value)==null?void 0:f.sales)||[],e=>(d(),o("tr",{key:e.id},[t("td",null,l(e.invoice_number),1),t("td",null,l(w(e.created_at)),1),t("td",null,[t("ul",O,[(d(!0),o(y,null,v(e.items,u=>{var _;return d(),o("li",{key:u.id},l((_=u.product)==null?void 0:_.name)+" × "+l(r(i)(u.quantity)),1)}),128))])]),t("td",P,l(r(b)(e.total)),1),t("td",null,[t("span",{class:E(["px-2 py-1 text-xs rounded-full font-medium",{"bg-gray-100 text-gray-700":e.status==="draft","bg-blue-100 text-blue-700":e.status==="issued","bg-yellow-100 text-yellow-700":e.status==="partially_paid","bg-green-100 text-green-700":e.status==="paid","bg-red-100 text-red-700":e.status==="void"}])},l(k(e.status)),3)])]))),128))])])])])}}};export{X as default};
