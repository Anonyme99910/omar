import{u as I,b as M,r as g,h as P,C as S,c as f,o as b,d as e,j as w,k as r,l as n,t as i,y as h,w as _,e as m,v as c,z as v}from"./index-Dm8oBzn1.js";import{t as B}from"./numbers-BTmV-EI5.js";import{U as k}from"./user-vR4Q57BX.js";import{P as D}from"./pen-CMJPyyLJ.js";import{c as z}from"./createLucideIcon-DON1tMmw.js";import{C as N}from"./calendar-DZEmnqKC.js";import{L as E}from"./log-out-DRxU_xcL.js";import{X as U}from"./x-DtAyKXRS.js";/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=z("BriefcaseIcon",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=z("MailIcon",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),q={class:"max-w-4xl mx-auto space-y-6"},R={class:"card"},G={class:"flex items-start gap-6 mb-6 pb-6 border-b"},O={class:"relative"},X={class:"w-24 h-24 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center"},$={class:"flex-1"},A={class:"text-2xl font-bold text-gray-900"},H={class:"text-gray-500 mt-1"},J={class:"flex items-center gap-2 mt-2"},K={class:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium"},Q={key:0,class:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-medium"},W={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Y={class:"space-y-4"},Z={class:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg"},ee={class:"text-gray-900"},te={class:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg"},se={class:"text-gray-900"},oe={class:"space-y-4"},ae={class:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg"},le={class:"text-gray-900"},re={class:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg"},ne={class:"text-gray-900"},ie={class:"mt-6 pt-6 border-t"},de={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},ue={class:"p-6"},me={class:"flex items-center justify-between mb-6"},he={__name:"Profile",setup(ce){const x=I(),d=M(),a=g({}),p=g(!1),o=g({name:"",email:"",password:"",password_confirmation:""}),y=s=>({admin:"مدير النظام",manager:"مدير فرع",cashier:"كاشير",inventory:"مسؤول مخزن"})[s]||s,C=s=>{if(!s)return"-";const t=new Date(s).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric"});return B(t)},L=async()=>{try{const s=await v.getProfile();a.value=s.data}catch(s){console.error("Failed to load profile:",s),d.error("فشل تحميل الملف الشخصي")}},u=()=>{p.value=!1,o.value={name:"",email:"",password:"",password_confirmation:""}},V=async()=>{if(o.value.password&&o.value.password!==o.value.password_confirmation){d.error("كلمة المرور غير متطابقة");return}try{const s={name:o.value.name,email:o.value.email};o.value.password&&(s.password=o.value.password,s.password_confirmation=o.value.password_confirmation);const t=await v.updateProfile(s);a.value=t.data,d.success("تم تحديث الملف الشخصي بنجاح"),u()}catch(s){console.error("Failed to update profile:",s),d.error("فشل تحديث الملف الشخصي")}},j=async()=>{if(confirm("هل أنت متأكد من تسجيل الخروج؟"))try{await v.logout(),localStorage.removeItem("token"),localStorage.removeItem("user"),d.success("تم تسجيل الخروج بنجاح"),x.push("/login")}catch(s){console.error("Logout error:",s),localStorage.removeItem("token"),localStorage.removeItem("user"),x.push("/login")}};return P(()=>{L(),a.value.id&&(o.value.name=a.value.name,o.value.email=a.value.email)}),S(()=>a.value,s=>{s.id&&(o.value.name=s.name,o.value.email=s.email)},{deep:!0}),(s,t)=>(b(),f("div",q,[t[18]||(t[18]=e("div",{class:"flex items-center justify-between"},[e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-900"},"الملف الشخصي"),e("p",{class:"text-gray-500 mt-1"},"إدارة معلوماتك الشخصية")])],-1)),e("div",R,[e("div",G,[e("div",O,[e("div",X,[r(n(k),{size:48,class:"text-white"})]),t[5]||(t[5]=e("div",{class:"absolute bottom-0 right-0 w-8 h-8 bg-green-500 rounded-full border-4 border-white"},null,-1))]),e("div",$,[e("h3",A,i(a.value.name),1),e("p",H,i(a.value.email),1),e("div",J,[e("span",K,i(y(a.value.role)),1),a.value.is_active?(b(),f("span",Q," نشط ")):w("",!0)])]),e("button",{onClick:t[0]||(t[0]=l=>p.value=!0),class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors flex items-center gap-2"},[r(n(D),{size:18}),t[6]||(t[6]=h(" تعديل ",-1))])]),e("div",W,[e("div",Y,[e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"الاسم الكامل",-1)),e("div",Z,[r(n(k),{size:20,class:"text-gray-400"}),e("span",ee,i(a.value.name),1)])]),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"البريد الإلكتروني",-1)),e("div",te,[r(n(T),{size:20,class:"text-gray-400"}),e("span",se,i(a.value.email),1)])])]),e("div",oe,[e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"الدور الوظيفي",-1)),e("div",ae,[r(n(F),{size:20,class:"text-gray-400"}),e("span",le,i(y(a.value.role)),1)])]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"تاريخ الانضمام",-1)),e("div",re,[r(n(N),{size:20,class:"text-gray-400"}),e("span",ne,i(C(a.value.created_at)),1)])])])]),e("div",ie,[e("button",{onClick:j,class:"w-full md:w-auto px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2"},[r(n(E),{size:20}),t[11]||(t[11]=h(" تسجيل الخروج ",-1))])])]),p.value?(b(),f("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:_(u,["self"])},[e("div",de,[e("div",ue,[e("div",me,[t[12]||(t[12]=e("h3",{class:"text-2xl font-bold text-gray-900"},"تعديل الملف الشخصي",-1)),e("button",{onClick:u,class:"text-gray-400 hover:text-gray-600"},[r(n(U),{size:24})])]),e("form",{onSubmit:_(V,["prevent"]),class:"space-y-4"},[e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"الاسم الكامل",-1)),m(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>o.value.name=l),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"أدخل الاسم الكامل"},null,512),[[c,o.value.name]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"البريد الإلكتروني",-1)),m(e("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>o.value.email=l),type:"email",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"أدخل البريد الإلكتروني"},null,512),[[c,o.value.email]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"كلمة المرور الجديدة (اختياري)",-1)),m(e("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>o.value.password=l),type:"password",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"اتركه فارغاً إذا لم ترغب في التغيير"},null,512),[[c,o.value.password]])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"تأكيد كلمة المرور",-1)),m(e("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>o.value.password_confirmation=l),type:"password",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"أعد إدخال كلمة المرور"},null,512),[[c,o.value.password_confirmation]])]),e("div",{class:"flex gap-3 pt-4"},[t[17]||(t[17]=e("button",{type:"submit",class:"flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors"}," حفظ التغييرات ",-1)),e("button",{type:"button",onClick:u,class:"px-4 py-3 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg font-medium transition-colors"}," إلغاء ")])],32)])])])):w("",!0)]))}};export{he as default};
