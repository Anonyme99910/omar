import{b as U,r as m,h as B,c as a,o as l,d as e,j as C,F as b,m as g,k as h,l as v,t as r,w as D,e as R,B as T,p as q,s as I,q as L,z}from"./index-Dm8oBzn1.js";import{c as V}from"./createLucideIcon-DON1tMmw.js";import{U as N}from"./user-vR4Q57BX.js";import{X as A}from"./x-DtAyKXRS.js";import{T as M}from"./trending-up-rzj5WJ7d.js";import{U as P}from"./users-vKo9HwqR.js";import{F as W}from"./file-text-B3OrgtAR.js";import{S as H}from"./shopping-cart-Co5cM1lj.js";import{R as X}from"./receipt-Cj1PAig0.js";import{D as Z}from"./dollar-sign-yQuVFVMy.js";import{P as $}from"./package-Cw_ATI9z.js";/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=V("SettingsIcon",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=V("WarehouseIcon",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]]),K={class:"space-y-6"},O={class:"grid gap-6 sm:grid-cols-2 lg:grid-cols-4"},Q=["onClick"],Y={class:"flex flex-col items-center text-center pt-2"},ee={class:"w-16 h-16 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center mb-3"},te={class:"text-xl font-bold text-gray-900 mb-1"},se={class:"text-sm text-gray-500 mb-3"},oe={class:"w-full space-y-2"},le={class:"flex flex-wrap gap-1 justify-center"},ae={key:0,class:"text-xs text-gray-400"},re={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},ie={class:"p-6"},ne={class:"flex items-center justify-between mb-6"},ce={class:"text-2xl font-bold text-gray-900"},de={class:"text-sm text-gray-500 mt-1"},ue={class:"space-y-4"},pe={class:"flex items-start cursor-pointer"},me=["value"],xe={class:"mr-3 flex-1"},ye={class:"flex items-center gap-2"},be={class:"font-medium text-gray-900"},ge={class:"text-sm text-gray-500 mt-1"},Ee={__name:"Roles",setup(he){const x=U(),d=m([]),y=m(!1),i=m(null),n=m([]),f=[{key:"dashboard",label:"لوحة التحكم",description:"عرض لوحة التحكم والإحصائيات",icon:M,color:"text-blue-600"},{key:"clients",label:"العملاء",description:"إدارة بيانات العملاء",icon:P,color:"text-indigo-600"},{key:"employees",label:"الموظفون",description:"إدارة الموظفين",icon:P,color:"text-purple-600"},{key:"roles",label:"الأدوار والصلاحيات",description:"إدارة أدوار المستخدمين",icon:W,color:"text-orange-600"},{key:"pos",label:"نقطة البيع",description:"إنشاء فواتير البيع والمبيعات",icon:H,color:"text-green-600"},{key:"invoices",label:"الفواتير",description:"عرض وإدارة الفواتير",icon:X,color:"text-purple-600"},{key:"sales-analysis",label:"تحليل المبيعات",description:"عرض تحليلات المبيعات",icon:M,color:"text-blue-600"},{key:"expenses",label:"المصروفات",description:"إدارة المصروفات والنفقات",icon:Z,color:"text-red-600"},{key:"stock",label:"المخزون",description:"إدارة المخزون",icon:$,color:"text-teal-600"},{key:"inventory",label:"المنتجات التالفة",description:"إدارة المنتجات التالفة",icon:J,color:"text-gray-600"}],_=t=>({admin:"مدير",manager:"مدير فرع",cashier:"كاشير",inventory:"مخزن"})[t]||t,j=t=>{const o=f.find(p=>p.key===t);return o?o.label:t},k=t=>t.permissions||[],E=t=>{i.value=t,n.value=[...t.permissions||[]],y.value=!0},u=()=>{y.value=!1,i.value=null,n.value=[]},F=async()=>{try{await z.updateEmployeePermissions(i.value.id,{permissions:n.value});const t=d.value.find(o=>o.id===i.value.id);t&&(t.permissions=[...n.value]),x.success("تم تحديث الصلاحيات بنجاح"),u()}catch(t){console.error("Failed to update permissions:",t),x.error("فشل تحديث الصلاحيات")}},S=async()=>{try{const t=await z.getEmployees();d.value=t.data||[]}catch(t){console.error("Failed to load employees:",t),x.error("فشل تحميل الموظفين"),d.value=[]}};return B(()=>{S()}),(t,o)=>{var p,w;return l(),a("div",K,[o[2]||(o[2]=e("div",{class:"flex items-center justify-between"},[e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-900"},"الأدوار والصلاحيات"),e("p",{class:"text-gray-500 mt-1"},"إدارة أدوار المستخدمين وصلاحياتهم")])],-1)),e("div",O,[(l(!0),a(b,null,g(d.value,s=>(l(),a("div",{key:s.id,class:"card hover:shadow-lg transition-shadow relative"},[e("button",{onClick:c=>E(s),class:"absolute top-4 left-4 w-10 h-10 rounded-full bg-blue-100 hover:bg-blue-200 flex items-center justify-center transition-colors",title:"إدارة الصلاحيات"},[h(v(G),{size:20,class:"text-blue-600"})],8,Q),e("div",Y,[e("div",ee,[h(v(N),{size:32,class:"text-white"})]),e("h3",te,r(s.name),1),e("p",se,r(_(s.role)),1),e("div",oe,[o[1]||(o[1]=e("p",{class:"text-xs font-medium text-gray-700"},"الصلاحيات:",-1)),e("div",le,[(l(!0),a(b,null,g(k(s),c=>(l(),a("span",{key:c,class:"px-2 py-1 bg-blue-100 text-blue-700 rounded-full text-xs"},r(j(c)),1))),128)),k(s).length===0?(l(),a("span",ae," لا توجد صلاحيات ")):C("",!0)])])])]))),128))]),y.value?(l(),a("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:D(u,["self"])},[e("div",re,[e("div",ie,[e("div",ne,[e("div",null,[e("h3",ce,"إدارة صلاحيات "+r((p=i.value)==null?void 0:p.name),1),e("p",de,r(_((w=i.value)==null?void 0:w.role)),1)]),e("button",{onClick:u,class:"text-gray-400 hover:text-gray-600"},[h(v(A),{size:24})])]),e("div",ue,[(l(),a(b,null,g(f,s=>e("div",{key:s.key,class:"border rounded-lg p-4 hover:bg-gray-50"},[e("label",pe,[R(e("input",{type:"checkbox","onUpdate:modelValue":o[0]||(o[0]=c=>n.value=c),value:s.key,class:"mt-1 w-5 h-5 text-blue-600 rounded focus:ring-blue-500"},null,8,me),[[T,n.value]]),e("div",xe,[e("div",ye,[(l(),q(L(s.icon),{size:20,class:I(s.color)},null,8,["class"])),e("span",be,r(s.label),1)]),e("p",ge,r(s.description),1)])])])),64))]),e("div",{class:"flex gap-3 mt-6 pt-6 border-t"},[e("button",{onClick:F,class:"flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors"}," حفظ الصلاحيات "),e("button",{onClick:u,class:"px-4 py-3 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg font-medium transition-colors"}," إلغاء ")])])])])):C("",!0)])}}};export{Ee as default};
