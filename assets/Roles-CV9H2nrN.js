import{b as F,r as m,h as S,c as a,o as l,d as e,j as C,F as g,m as h,k as v,l as f,t as r,w as U,e as B,B as D,p as R,s as T,q,z}from"./index-C5xRh_KK.js";import{c as M}from"./createLucideIcon-QMuha7o6.js";import{U as I}from"./user-BzODAn8O.js";import{X as L}from"./x-df8jJhO9.js";import{T as N}from"./trending-up-COr3EVlw.js";import{S as A}from"./shopping-cart-uUysUCkw.js";import{R as W}from"./receipt-Fm9ouQCX.js";import{U as H}from"./users-DCjviMeG.js";import{P as X}from"./package-BrkPEe7s.js";import{D as Z}from"./dollar-sign-C7W2RsxJ.js";import{F as $}from"./file-text-17EUNtgI.js";/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=M("SettingsIcon",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=M("WarehouseIcon",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]]),K={class:"space-y-6"},O={class:"grid gap-6 sm:grid-cols-2 lg:grid-cols-4"},Q=["onClick"],Y={class:"flex flex-col items-center text-center pt-2"},ee={class:"w-16 h-16 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center mb-3"},te={class:"text-xl font-bold text-gray-900 mb-1"},se={class:"text-sm text-gray-500 mb-3"},oe={class:"w-full space-y-2"},le={class:"flex flex-wrap gap-1 justify-center"},ae={key:0,class:"text-xs text-gray-400"},re={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},ne={class:"p-6"},ie={class:"flex items-center justify-between mb-6"},ce={class:"text-2xl font-bold text-gray-900"},de={class:"text-sm text-gray-500 mt-1"},ue={class:"space-y-4"},pe={class:"flex items-start cursor-pointer"},me=["value"],xe={class:"mr-3 flex-1"},ye={class:"flex items-center gap-2"},ge={class:"font-medium text-gray-900"},he={class:"text-sm text-gray-500 mt-1"},Ee={__name:"Roles",setup(ve){const x=F(),d=m([]),y=m(!1),n=m(null),i=m([]),b=[{key:"dashboard",label:"لوحة التحكم",description:"عرض لوحة التحكم والإحصائيات",icon:N,color:"text-blue-600"},{key:"pos",label:"نقطة البيع",description:"إنشاء فواتير البيع والمبيعات",icon:A,color:"text-green-600"},{key:"invoices",label:"الفواتير",description:"عرض وإدارة الفواتير",icon:W,color:"text-purple-600"},{key:"customers",label:"العملاء",description:"إدارة بيانات العملاء",icon:H,color:"text-indigo-600"},{key:"products",label:"المنتجات",description:"إدارة المنتجات والأسعار",icon:X,color:"text-orange-600"},{key:"inventory",label:"المخزون",description:"إدارة المخزون والجرد",icon:J,color:"text-teal-600"},{key:"expenses",label:"المصروفات",description:"إدارة المصروفات والنفقات",icon:Z,color:"text-red-600"},{key:"reports",label:"التقارير",description:"عرض التقارير والتحليلات",icon:$,color:"text-gray-600"}],_=t=>({admin:"مدير",manager:"مدير فرع",cashier:"كاشير",inventory:"مخزن"})[t]||t,P=t=>{const o=b.find(p=>p.key===t);return o?o.label:t},k=t=>t.permissions||[],V=t=>{n.value=t,i.value=[...t.permissions||[]],y.value=!0},u=()=>{y.value=!1,n.value=null,i.value=[]},j=async()=>{try{await z.updateEmployeePermissions(n.value.id,{permissions:i.value});const t=d.value.find(o=>o.id===n.value.id);t&&(t.permissions=[...i.value]),x.success("تم تحديث الصلاحيات بنجاح"),u()}catch(t){console.error("Failed to update permissions:",t),x.error("فشل تحديث الصلاحيات")}},E=async()=>{try{const t=await z.getEmployees();d.value=t.data||[]}catch(t){console.error("Failed to load employees:",t),x.error("فشل تحميل الموظفين"),d.value=[]}};return S(()=>{E()}),(t,o)=>{var p,w;return l(),a("div",K,[o[2]||(o[2]=e("div",{class:"flex items-center justify-between"},[e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-900"},"الأدوار والصلاحيات"),e("p",{class:"text-gray-500 mt-1"},"إدارة أدوار المستخدمين وصلاحياتهم")])],-1)),e("div",O,[(l(!0),a(g,null,h(d.value,s=>(l(),a("div",{key:s.id,class:"card hover:shadow-lg transition-shadow relative"},[e("button",{onClick:c=>V(s),class:"absolute top-4 left-4 w-10 h-10 rounded-full bg-blue-100 hover:bg-blue-200 flex items-center justify-center transition-colors",title:"إدارة الصلاحيات"},[v(f(G),{size:20,class:"text-blue-600"})],8,Q),e("div",Y,[e("div",ee,[v(f(I),{size:32,class:"text-white"})]),e("h3",te,r(s.name),1),e("p",se,r(_(s.role)),1),e("div",oe,[o[1]||(o[1]=e("p",{class:"text-xs font-medium text-gray-700"},"الصلاحيات:",-1)),e("div",le,[(l(!0),a(g,null,h(k(s),c=>(l(),a("span",{key:c,class:"px-2 py-1 bg-blue-100 text-blue-700 rounded-full text-xs"},r(P(c)),1))),128)),k(s).length===0?(l(),a("span",ae," لا توجد صلاحيات ")):C("",!0)])])])]))),128))]),y.value?(l(),a("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:U(u,["self"])},[e("div",re,[e("div",ne,[e("div",ie,[e("div",null,[e("h3",ce,"إدارة صلاحيات "+r((p=n.value)==null?void 0:p.name),1),e("p",de,r(_((w=n.value)==null?void 0:w.role)),1)]),e("button",{onClick:u,class:"text-gray-400 hover:text-gray-600"},[v(f(L),{size:24})])]),e("div",ue,[(l(),a(g,null,h(b,s=>e("div",{key:s.key,class:"border rounded-lg p-4 hover:bg-gray-50"},[e("label",pe,[B(e("input",{type:"checkbox","onUpdate:modelValue":o[0]||(o[0]=c=>i.value=c),value:s.key,class:"mt-1 w-5 h-5 text-blue-600 rounded focus:ring-blue-500"},null,8,me),[[D,i.value]]),e("div",xe,[e("div",ye,[(l(),R(q(s.icon),{size:20,class:T(s.color)},null,8,["class"])),e("span",ge,r(s.label),1)]),e("p",he,r(s.description),1)])])])),64))]),e("div",{class:"flex gap-3 mt-6 pt-6 border-t"},[e("button",{onClick:j,class:"flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors"}," حفظ الصلاحيات "),e("button",{onClick:u,class:"px-4 py-3 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg font-medium transition-colors"}," إلغاء ")])])])])):C("",!0)])}}};export{Ee as default};
