import{u as Rt,b as Gt,r as d,i as O,f as Ht,c as u,o as i,k as _,w as X,d as e,e as m,l as x,v as f,m as r,F as U,n as D,t as a,x as V,y as Y,q as Kt,A as Xt,z as F}from"./index-BFuGrxhi.js";import{f as b,t as W}from"./numbers-BTmV-EI5.js";import{S as qt}from"./search-BFeFnZd4.js";import{U as Yt}from"./user-plus-e94KDELH.js";import{P as Zt}from"./package-U7NZ-W6J.js";import{S as it}from"./shopping-cart-B-PQsVt1.js";import{c as te}from"./createLucideIcon-BDP_N2U1.js";import{P as $t}from"./plus-BWF5cguH.js";import{T as jt}from"./trash-2-D14UxvmR.js";/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=te("MinusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}]]),ee={class:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl mx-4 max-h-[90vh] flex flex-col relative"},se={class:"p-8 pb-4"},le={class:"relative"},oe={key:0,class:"absolute right-3 top-3.5"},ne={class:"flex-1 overflow-y-auto px-8 space-y-3"},ae=["onClick"],re={class:"flex items-center justify-between"},ie={class:"font-bold text-lg text-gray-900"},ue={class:"text-sm text-gray-600"},de={class:"p-8 pt-4 border-t bg-white rounded-b-2xl"},ce={class:"bg-white rounded-2xl shadow-2xl w-full max-w-md mx-4 p-6"},pe={class:"text-gray-600 mb-6 text-center"},ve={class:"space-y-4"},ge={class:"flex gap-3"},ye={key:0,class:"space-y-4 p-4 bg-gray-50 rounded-lg"},me={key:2,class:"flex flex-col lg:flex-row h-screen bg-gray-50"},be={class:"flex-1 p-4 overflow-y-auto pb-44 lg:pb-4"},xe={class:"card"},fe={class:"relative"},he=["placeholder"],_e={key:0,class:"absolute left-12 top-3.5"},we={class:"flex justify-center"},ke={class:"inline-flex rounded-lg border-2 border-primary-600 p-1 bg-white shadow-md"},Ce={class:"grid grid-cols-2 md:grid-cols-3 gap-4"},qe=["onClick"],$e={class:"aspect-square bg-gray-100 rounded-lg mb-3 flex items-center justify-center overflow-hidden"},je=["src","alt"],Pe={class:"font-bold text-gray-900 mb-1 truncate"},Me={key:0,class:"text-sm text-gray-500 mb-2"},ze={key:1,class:"text-sm text-gray-500 mb-2 line-clamp-2"},Se={class:"flex items-center justify-between"},Ve={class:"text-lg font-bold text-primary-600"},Fe={class:"hidden lg:flex lg:w-96 bg-white border-l border-gray-200 flex-col"},Ue={class:"flex-1 p-4 overflow-y-auto"},Le={class:"mb-4 p-3 bg-primary-50 rounded-lg border border-primary-200"},Be={class:"flex items-center justify-between mb-2"},Ie={class:"font-bold text-gray-900"},Te={class:"text-xs text-gray-600"},Ae={class:"text-xl font-bold mb-4 flex items-center gap-2"},Qe={class:"space-y-3 mb-4 max-h-64 overflow-y-auto"},Ne={key:0,class:"text-center py-8 text-gray-500"},De={class:"flex-1"},We={class:"font-medium text-sm"},Ee={class:"text-xs text-gray-500"},Oe={key:0,class:"text-xs text-primary-600 font-medium mt-1"},Je={class:"flex items-center gap-2"},Re=["onClick"],Ge=["value","onInput","onBlur","max"],He=["onClick"],Ke=["onClick"],Xe={class:"border-t pt-4 space-y-2"},Ye={class:"flex justify-between text-sm"},Ze={class:"font-bold"},ts={class:"flex justify-between text-sm"},es={class:"flex justify-between text-sm"},ss={class:"flex justify-between text-lg font-bold border-t pt-2"},ls={class:"text-primary-600"},os={class:"flex justify-between text-sm bg-blue-50 p-2 rounded"},ns=["placeholder"],as={key:0,class:"flex justify-between text-sm text-red-600 font-bold"},rs={class:"mt-4"},is={class:"grid grid-cols-2 gap-2"},us=["onClick"],ds={class:"mt-4 space-y-2"},cs=["disabled"],ps={class:"lg:hidden fixed bottom-0 left-0 right-0 bg-white border-t-2 border-gray-200 shadow-lg z-40"},vs={class:"bg-primary-50 px-4 py-2 border-b border-primary-200"},gs={class:"flex items-center justify-between text-sm"},ys={class:"flex items-center gap-2"},ms={class:"font-bold text-gray-900"},bs={class:"text-xs text-gray-600 mt-1"},xs={class:"px-4 py-3"},fs={class:"flex items-center justify-between mb-3"},hs={class:"text-2xl font-bold text-primary-600"},_s={class:"text-right"},ws={class:"text-xl font-bold text-gray-900"},ks=["disabled"],Cs={key:3,class:"lg:hidden fixed inset-0 bg-gray-50 z-50 flex flex-col"},qs={class:"bg-primary-600 text-white p-4 flex items-center gap-4 shadow-lg"},$s={class:"flex-1"},js={class:"text-xl font-bold flex items-center gap-2"},Ps={class:"p-4 bg-primary-50 border-b border-primary-200"},Ms={class:"flex items-center justify-between"},zs={class:"font-bold text-gray-900"},Ss={class:"text-xs text-gray-600 mt-1"},Vs={class:"flex-1 overflow-y-auto p-4"},Fs={key:0,class:"text-center py-12 text-gray-500"},Us={key:1,class:"space-y-3"},Ls={class:"flex-1"},Bs={class:"font-medium text-sm"},Is={class:"text-xs text-gray-500"},Ts={key:0,class:"text-xs text-primary-600 font-medium mt-1"},As={class:"flex items-center gap-2"},Qs=["onClick"],Ns=["value","onInput","onBlur","max"],Ds=["onClick"],Ws=["onClick"],Es={class:"border-t bg-white"},Os={class:"p-4 space-y-3"},Js={class:"flex justify-between items-center text-sm"},Rs={class:"font-bold text-gray-900"},Gs={class:"flex justify-between items-center text-sm"},Hs={class:"flex justify-between items-center text-sm"},Ks={class:"flex justify-between items-center text-lg font-bold text-primary-600 pt-3 border-t-2 border-gray-200"},Xs={class:"pt-3 border-t border-gray-200"},Ys={class:"grid grid-cols-2 gap-2"},Zs=["onClick"],tl=["placeholder"],el={key:0,class:"bg-red-50 border border-red-200 rounded-lg p-3"},sl={class:"flex justify-between items-center"},ll={class:"text-lg font-bold text-red-600"},ol={class:"p-4 pt-0 space-y-2"},nl=["disabled"],al={class:"bg-white rounded-xl p-6 w-full max-w-md relative"},rl={class:"flex gap-3 pt-2"},xl={__name:"POS",setup(il){const Mt=Rt(),v=Gt(),w=d("products"),L=d([]),J=d([]),B=d([]),R=d([]),q=d([]),p=d([]),I=d(""),M=d(""),h=d(null),T=d(""),z=d(0),S=d(0),$=d(null),E=d("cash"),A=d(!1);d(!1);const Z=d(!1);let tt=null;const et=d(!1),G=d(null),y=d("without"),Q=d(1),N=d(0),H=d(!1),k=d({name:"",phone:"",segment:"Ù‚Ø·Ø§Ø¹ÙŠ"}),ut=[{value:"cash",label:"Ù†Ù‚Ø¯ÙŠ"},{value:"transfer",label:"ØªØ­ÙˆÙŠÙ„"}],zt=O(()=>{const l=w.value==="products"?L.value:B.value;return I.value?l:l.slice(0,12)}),St=O(()=>{if(!M.value)return q.value;const l=M.value.toLowerCase().trim(),t=s=>s.replace(/[Ø£Ø¥Ø¢]/g,"Ø§").replace(/[Ù‰]/g,"ÙŠ").replace(/[Ø©]/g,"Ù‡").replace(/[\u064B-\u065F]/g,""),o=t(l);return q.value.map(s=>{const n=t(s.name.toLowerCase()),c=s.phone.toString();let g=0;if(n===o||c===l)g=1e3;else if(n.startsWith(o)||c.startsWith(l))g=500;else if(n.includes(o)||c.includes(l))g=100;else{let P=0;for(let C=0;C<n.length&&P<o.length;C++)n[C]===o[P]&&(P++,g+=1);P!==o.length&&(g=0)}return{customer:s,score:g}}).filter(s=>s.score>0).sort((s,n)=>n.score-s.score).slice(0,10).map(s=>s.customer)}),st=O(()=>p.value.reduce((l,t)=>{const o=t.unit_price*t.quantity,s=t.with_packaging?t.packaging_price*t.packaging_quantity:0;return l+o+s},0)),j=O(()=>st.value+S.value-z.value),lt=O(()=>{const l=$.value||j.value;return Math.max(0,j.value-l)}),Vt=()=>{tt&&clearTimeout(tt),Z.value=!0,tt=setTimeout(async()=>{w.value==="products"?await Ft():await Ut(),Z.value=!1},300)},Ft=async()=>{const l=I.value.trim();if(!l){L.value=J.value.slice(0,12);return}const t=l.toLowerCase(),o=J.value.filter(s=>{var ht,_t,wt,kt,Ct;const n=s.name_ar.toLowerCase(),c=((ht=s.barcode)==null?void 0:ht.toLowerCase())||"",g=((wt=(_t=s.category)==null?void 0:_t.name_ar)==null?void 0:wt.toLowerCase())||"",P=((Ct=(kt=s.brand)==null?void 0:kt.name_ar)==null?void 0:Ct.toLowerCase())||"";if(n.includes(t)||c.includes(t)||g.includes(t)||P.includes(t))return!0;let C=0;for(let rt=0;rt<n.length&&C<t.length;rt++)n[rt]===t[C]&&C++;return C===t.length});if(L.value=o,o.length===0&&l.length>=2)try{const s=await F.getProducts({search:l});L.value=s.data.data||s.data||[]}catch(s){console.error("Search error:",s)}},Ut=async()=>{const l=I.value.trim();if(!l){B.value=R.value.slice(0,12);return}const t=l.toLowerCase(),o=R.value.filter(s=>{var g;const n=s.name_ar.toLowerCase(),c=((g=s.description)==null?void 0:g.toLowerCase())||"";return n.includes(t)||c.includes(t)});B.value=o},Lt=l=>{if(!l)return"";const o=JSON.parse(l)[0];return o.startsWith("data:")?o:`http://localhost/parfumes/backend/public${o}`},Bt=l=>{if(!l&&l!==0)return"";const t=String(l).trim();return/\bml\b/i.test(t)||t.includes("Ù…Ù„")?t:`${t} Ù…Ù„`},It=l=>{const t=q.value.find(s=>s.id===h.value),o=(t==null?void 0:t.segment)||"Ù‚Ø·Ø§Ø¹ÙŠ";return parseFloat(o==="Ø¬Ù…Ù„Ø©"?l.price_Ø¬Ù…Ù„Ø©:o==="ØµÙØ­Ø©"?l.price_ØµÙØ­Ø©:l.price_Ù‚Ø·Ø§Ø¹ÙŠ)},Tt=l=>{if(l.quantity===0){v.error(w.value==="products"?"Ø§Ù„Ù…Ù†ØªØ¬ ØºÙŠØ± Ù…ØªÙˆÙØ± ÙÙŠ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†":"Ø§Ù„Ø¨Ø§Ù‚Ø© ØºÙŠØ± Ù…ØªÙˆÙØ±Ø© ÙÙŠ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†");return}G.value=l,y.value="without",Q.value=1,N.value=0,et.value=!0},K=()=>{et.value=!1,G.value=null,y.value="without",Q.value=1,N.value=0},At=()=>{const l=G.value;if(!l)return;const t=p.value.find(o=>o.product.id===l.id&&o.with_packaging===(y.value==="with")&&o.packaging_quantity===(y.value==="with"?Q.value:null)&&o.packaging_price===(y.value==="with"?N.value:null));if(t){if(t.quantity>=l.quantity){v.error("Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© ØºÙŠØ± Ù…ØªÙˆÙØ±Ø©"),K();return}t.quantity++}else{const o={product:l,quantity:1,unit_price:xt(l),with_packaging:y.value==="with",packaging_quantity:y.value==="with"?Q.value:null,packaging_price:y.value==="with"?N.value:null};p.value.push(o)}v.success(w.value==="products"?"ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ù„Ù„Ø³Ù„Ø©":"ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¨Ø§Ù‚Ø© Ù„Ù„Ø³Ù„Ø©"),K()},dt=l=>{if(l.quantity>=l.product.quantity){v.error("Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© ØºÙŠØ± Ù…ØªÙˆÙØ±Ø©");return}l.quantity++},ct=l=>{l.quantity>1?l.quantity--:ot(l)},pt=(l,t)=>{const o=parseInt(t)||1;if(o<1){l.quantity=1;return}if(o>l.product.quantity){v.error("Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© ØºÙŠØ± Ù…ØªÙˆÙØ±Ø©"),l.quantity=l.product.quantity;return}l.quantity=o},vt=l=>{l.quantity<1?l.quantity=1:l.quantity>l.product.quantity&&(l.quantity=l.product.quantity,v.error("Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© ØºÙŠØ± Ù…ØªÙˆÙØ±Ø©"))},ot=l=>{p.value=p.value.filter(t=>t.product.id!==l.product.id)},gt=()=>{p.value.length!==0&&confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø­ Ø§Ù„Ø³Ù„Ø©ØŸ")&&(p.value=[],z.value=0,S.value=0)},Qt=async()=>{var l,t;if(!k.value.name||!k.value.phone){v.error("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù… ÙˆØ±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ");return}try{const o=await F.createCustomer(k.value),s=o.data.data||o.data;v.success("ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­"),q.value.unshift(s),h.value=s.id,T.value=s.name,A.value=!1,k.value={name:"",phone:"",segment:"Ù‚Ø·Ø§Ø¹ÙŠ"},v.info(`ØªÙ… Ø§Ø®ØªÙŠØ§Ø±: ${s.name}`)}catch(o){console.error("Error adding customer:",o),v.error(((t=(l=o.response)==null?void 0:l.data)==null?void 0:t.message)||"ÙØ´Ù„ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…ÙŠÙ„")}},yt=async()=>{var t,o,s;if(p.value.length===0)return;const l={customer_id:h.value===0?null:h.value,items:p.value.map(n=>({product_id:n.product.id,quantity:n.quantity,unit_price:n.unit_price,with_packaging:n.with_packaging||!1,packaging_quantity:n.packaging_quantity||null,packaging_price:n.packaging_price||null})),tax:S.value,discount:z.value,paid_amount:$.value||j.value,payment_method:E.value};try{const n=await F.createSale(l),c=W(n.data.invoice_number);v.success(`ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø© ${c}`);const g=[];if(confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© PDFØŸ"))try{await F.downloadInvoicePdf(n.data.id),v.success("ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­")}catch(P){console.error("PDF Error:",P),v.error("ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© PDF")}(t=n.data.customer)!=null&&t.phone&&confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨ØŸ")&&Nt(n.data),p.value=[],z.value=0,S.value=0,$.value=null,mt()}catch(n){v.error(((s=(o=n.response)==null?void 0:o.data)==null?void 0:s.error)||"ÙØ´Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©")}},Nt=async l=>{var t,o,s;try{const n=await F.getWhatsAppMessage(l.id),{message:c,phone:g}=n.data;if(!g){v.error("Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø±Ù‚Ù… Ù‡Ø§ØªÙ Ù„Ù„Ø¹Ù…ÙŠÙ„");return}const C=`https://wa.me/${g.replace(/[^0-9]/g,"")}?text=${encodeURIComponent(c)}`;window.open(C,"_blank"),v.success("ØªÙ… ÙØªØ­ ÙˆØ§ØªØ³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­")}catch(n){console.error("WhatsApp Error:",n),console.error("Error details:",(t=n.response)==null?void 0:t.data),v.error("ÙØ´Ù„ Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨: "+(((s=(o=n.response)==null?void 0:o.data)==null?void 0:s.message)||n.message))}},mt=async()=>{try{const l=await F.getProducts(),t=l.data.data||l.data||[];J.value=t,L.value=t}catch(l){console.error("Failed to load products:",l),J.value=[],L.value=[]}},Dt=async()=>{console.log("ğŸ“¥ Fetching customers...");try{const l=await F.getCustomers();q.value=l.data.data||l.data||[],console.log("âœ… Customers loaded:",q.value.length)}catch(l){console.error("âŒ Failed to load customers:",l),q.value=[]}},Wt=async()=>{try{const l=await F.getPackages(),t=l.data.data||l.data||[];R.value=t,B.value=t}catch(l){console.error("Failed to load packages:",l),R.value=[],B.value=[]}},bt=l=>{w.value=l,I.value="",l==="packages"&&B.value.length===0&&Wt()},xt=l=>w.value==="products"?It(l):Et(l),Et=l=>{const t=q.value.find(s=>s.id===h.value),o=(t==null?void 0:t.segment)||"Ù‚Ø·Ø§Ø¹ÙŠ";return parseFloat(o==="Ø¬Ù…Ù„Ø©"?l.price_Ø¬Ù…Ù„Ø©:o==="ØµÙØ­Ø©"?l.price_ØµÙØ­Ø©:l.price_Ù‚Ø·Ø§Ø¹ÙŠ)},Ot=()=>{Mt.back()},Jt=()=>{A.value=!0},ft=(l,t)=>{h.value=l,T.value=t,M.value="",v.success(`ØªÙ… Ø§Ø®ØªÙŠØ§Ø±: ${t}`)},nt=()=>{p.value.length>0&&!confirm("Ø³ÙŠØªÙ… Ù…Ø³Ø­ Ø§Ù„Ø³Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©. Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©ØŸ")||(p.value=[],h.value=null,T.value="",M.value="")},at=()=>{if(h.value===0||h.value===null)return"Ù‚Ø·Ø§Ø¹ÙŠ";const l=q.value.find(t=>t.id===h.value);return(l==null?void 0:l.segment)||"Ù‚Ø·Ø§Ø¹ÙŠ"};return Ht(()=>{mt(),Dt()}),(l,t)=>{var o;return i(),u(U,null,[h.value===null?(i(),u("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:X(Ot,["self"])},[e("div",ee,[e("button",{onClick:t[0]||(t[0]=s=>l.$router.back()),class:"absolute top-4 left-4 text-gray-400 hover:text-gray-600 transition-colors z-10",title:"Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©"},[...t[26]||(t[26]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])]),e("div",se,[t[28]||(t[28]=e("div",{class:"text-center mb-6"},[e("h2",{class:"text-3xl font-bold text-gray-900 mb-2"},"Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù†Ù‚Ø·Ø© Ø§Ù„Ø¨ÙŠØ¹"),e("p",{class:"text-gray-600"},"Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©")],-1)),e("div",le,[m(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>M.value=s),type:"text",placeholder:"Ø§Ø¨Ø­Ø« Ø¹Ù† Ø¹Ù…ÙŠÙ„ Ø¨Ø§Ù„Ø§Ø³Ù… Ø£Ùˆ Ø§Ù„Ù‡Ø§ØªÙ...",class:"input pl-10 text-lg",autofocus:""},null,512),[[f,M.value]]),x(r(qt),{class:"absolute left-3 top-3.5 text-gray-400",size:24}),M.value?(i(),u("div",oe,[e("button",{onClick:t[2]||(t[2]=s=>M.value=""),class:"text-gray-400 hover:text-gray-600"},[...t[27]||(t[27]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):_("",!0)])]),e("div",ne,[e("button",{onClick:t[3]||(t[3]=s=>ft(0,"Ø¹Ù…ÙŠÙ„ Ø¹Ø§Ø¯ÙŠ")),class:"w-full p-4 bg-gradient-to-r from-gray-100 to-gray-200 hover:from-gray-200 hover:to-gray-300 rounded-xl text-right transition-all border-2 border-transparent hover:border-primary-500"},[...t[29]||(t[29]=[e("div",{class:"flex items-center justify-between"},[e("div",null,[e("p",{class:"font-bold text-lg text-gray-900"},"Ø¹Ù…ÙŠÙ„ Ø¹Ø§Ø¯ÙŠ"),e("p",{class:"text-sm text-gray-600"},"Ø³Ø¹Ø± Ù‚Ø·Ø§Ø¹ÙŠ")]),e("div",{class:"bg-primary-100 text-primary-700 px-3 py-1 rounded-full text-sm font-medium"}," Ù‚Ø·Ø§Ø¹ÙŠ ")],-1)])]),(i(!0),u(U,null,D(St.value,s=>(i(),u("button",{key:s.id,onClick:n=>ft(s.id,s.name),class:"w-full p-4 bg-white hover:bg-gray-50 rounded-xl text-right transition-all border-2 border-gray-200 hover:border-primary-500"},[e("div",re,[e("div",null,[e("p",ie,a(s.name),1),e("p",ue,a(s.phone),1)]),e("div",{class:V(["px-3 py-1 rounded-full text-sm font-medium",{"bg-blue-100 text-blue-700":s.segment==="Ø¬Ù…Ù„Ø©","bg-green-100 text-green-700":s.segment==="Ù‚Ø·Ø§Ø¹ÙŠ","bg-purple-100 text-purple-700":s.segment==="ØµÙØ­Ø©"}])},a(s.segment),3)])],8,ae))),128))]),e("div",de,[e("button",{onClick:Jt,class:"w-full btn btn-primary flex items-center justify-center gap-2",type:"button"},[x(r(Yt),{size:20}),t[30]||(t[30]=Y(" Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯ ",-1))])])])])):_("",!0),et.value?(i(),u("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:X(K,["self"])},[e("div",ce,[t[33]||(t[33]=e("h3",{class:"text-2xl font-bold text-gray-900 mb-4 text-center"},"Ø¥Ø¶Ø§ÙØ© Ø¹Ù„Ø¨Ø©",-1)),e("p",pe,a((o=G.value)==null?void 0:o.name_ar),1),e("div",ve,[e("div",ge,[e("button",{onClick:t[4]||(t[4]=s=>y.value="with"),class:V(["flex-1 py-3 px-4 rounded-lg font-medium transition-all border-2",y.value==="with"?"bg-primary-600 text-white border-primary-600":"bg-white text-gray-700 border-gray-300 hover:border-primary-400"])}," Ù…Ø¹ Ø¹Ù„Ø¨Ø© ",2),e("button",{onClick:t[5]||(t[5]=s=>y.value="without"),class:V(["flex-1 py-3 px-4 rounded-lg font-medium transition-all border-2",y.value==="without"?"bg-primary-600 text-white border-primary-600":"bg-white text-gray-700 border-gray-300 hover:border-primary-400"])}," Ø¨Ø¯ÙˆÙ† Ø¹Ù„Ø¨Ø© ",2)]),y.value==="with"?(i(),u("div",ye,[e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù„Ø¨",-1)),m(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>Q.value=s),type:"number",min:"1",class:"input",placeholder:"1"},null,512),[[f,Q.value,void 0,{number:!0}]])]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Ø³Ø¹Ø± Ø§Ù„Ø¹Ù„Ø¨Ø©",-1)),m(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>N.value=s),type:"number",step:"0.01",min:"0",class:"input",placeholder:"0.00"},null,512),[[f,N.value,void 0,{number:!0}]])])])):_("",!0),e("div",{class:"flex gap-3 mt-6"},[e("button",{onClick:K,class:"flex-1 py-3 px-4 bg-gray-200 text-gray-700 rounded-lg font-medium hover:bg-gray-300 transition-colors"}," Ø¥Ù„ØºØ§Ø¡ "),e("button",{onClick:At,class:"flex-1 py-3 px-4 bg-primary-600 text-white rounded-lg font-medium hover:bg-primary-700 transition-colors"}," Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø© ")])])])])):(i(),u("div",me,[e("div",be,[e("div",xe,[e("div",fe,[m(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>I.value=s),onInput:Vt,type:"text",placeholder:w.value==="products"?"Ø§Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù… Ø£Ùˆ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ Ø£Ùˆ Ø§Ù„ÙØ¦Ø©...":"Ø§Ø¨Ø­Ø« Ø¹Ù† Ø¨Ø§Ù‚Ø©...",class:"input pl-10 text-lg",autofocus:""},null,40,he),[[f,I.value]]),x(r(qt),{class:"absolute left-3 top-3.5 text-gray-400",size:24}),Z.value?(i(),u("div",_e,[...t[34]||(t[34]=[e("div",{class:"animate-spin rounded-full h-5 w-5 border-b-2 border-primary-600"},null,-1)])])):_("",!0)])]),e("div",we,[e("div",ke,[e("button",{onClick:t[9]||(t[9]=s=>bt("products")),class:V(["px-6 py-2 rounded-md font-medium transition-all",w.value==="products"?"bg-primary-600 text-white shadow-md":"text-gray-700 hover:bg-gray-100"])}," Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ",2),e("button",{onClick:t[10]||(t[10]=s=>bt("packages")),class:V(["px-6 py-2 rounded-md font-medium transition-all",w.value==="packages"?"bg-primary-600 text-white shadow-md":"text-gray-700 hover:bg-gray-100"])}," Ø§Ù„Ø¨Ø§Ù‚Ø§Øª ",2)])]),e("div",Ce,[(i(!0),u(U,null,D(zt.value,s=>(i(),u("div",{key:s.id,onClick:n=>Tt(s),class:"card hover:shadow-lg cursor-pointer transition-all hover:scale-105"},[e("div",$e,[s.photos&&JSON.parse(s.photos)[0]?(i(),u("img",{key:0,src:Lt(s.photos),alt:s.name_ar,class:"w-full h-full object-cover"},null,8,je)):(i(),Kt(r(Zt),{key:1,size:48,class:"text-gray-400"}))]),e("h4",Pe,a(s.name_ar),1),w.value==="products"?(i(),u("p",Me,a(Bt(s.volume_ml)),1)):(i(),u("p",ze,a(s.description||"Ø¨Ø§Ù‚Ø©"),1)),e("div",Se,[e("span",Ve,a(r(b)(xt(s))),1),e("span",{class:V(["text-xs badge",s.quantity>0?"badge-success":"badge-danger"])},a(r(W)(s.quantity))+" Ù‚Ø·Ø¹Ø© ",3)])],8,qe))),128))])]),e("div",Fe,[e("div",Ue,[e("div",Le,[e("div",Be,[e("div",null,[t[35]||(t[35]=e("p",{class:"text-sm text-gray-600"},"Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„Ø­Ø§Ù„ÙŠ",-1)),e("p",Ie,a(T.value),1)]),e("button",{onClick:nt,class:"text-sm text-primary-600 hover:text-primary-800 font-medium"}," ØªØºÙŠÙŠØ± ")]),e("div",Te," Ø§Ù„Ø³Ø¹Ø±: "+a(at()),1)]),e("h3",Ae,[x(r(it),{size:24}),t[36]||(t[36]=Y(" Ø³Ù„Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª ",-1))]),e("div",Qe,[p.value.length===0?(i(),u("div",Ne," Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ© ")):_("",!0),(i(!0),u(U,null,D(p.value,(s,n)=>(i(),u("div",{key:`${s.product.id}-${n}`,class:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg"},[e("div",De,[e("p",We,a(s.product.name_ar),1),e("p",Ee,a(r(b)(s.unit_price)),1),s.with_packaging?(i(),u("p",Oe," ğŸ“¦ Ù…Ø¹ Ø¹Ù„Ø¨Ø© ("+a(r(W)(s.packaging_quantity))+" Ã— "+a(r(b)(s.packaging_price))+") ",1)):_("",!0)]),e("div",Je,[e("button",{onClick:c=>ct(s),class:"w-7 h-7 rounded bg-gray-200 hover:bg-gray-300 flex items-center justify-center"},[x(r(Pt),{size:16})],8,Re),e("input",{value:s.quantity,onInput:c=>pt(s,c.target.value),onBlur:c=>vt(s),type:"number",min:"1",max:s.product.quantity,class:"w-12 text-center font-bold border rounded py-1 text-sm"},null,40,Ge),e("button",{onClick:c=>dt(s),class:"w-7 h-7 rounded bg-gray-200 hover:bg-gray-300 flex items-center justify-center"},[x(r($t),{size:16})],8,He)]),e("button",{onClick:c=>ot(s),class:"text-red-600 hover:text-red-800"},[x(r(jt),{size:18})],8,Ke)]))),128))]),e("div",Xe,[e("div",Ye,[t[37]||(t[37]=e("span",null,"Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙØ±Ø¹ÙŠ:",-1)),e("span",Ze,a(r(b)(st.value)),1)]),e("div",ts,[t[38]||(t[38]=e("span",null,"Ø§Ù„Ø®ØµÙ…:",-1)),m(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>z.value=s),type:"number",step:"0.01",class:"input w-32 text-left py-1"},null,512),[[f,z.value,void 0,{number:!0}]])]),e("div",es,[t[39]||(t[39]=e("span",null,"Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©:",-1)),m(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>S.value=s),type:"number",step:"0.01",class:"input w-32 text-left py-1"},null,512),[[f,S.value,void 0,{number:!0}]])]),e("div",ss,[t[40]||(t[40]=e("span",null,"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:",-1)),e("span",ls,a(r(b)(j.value)),1)]),e("div",os,[t[41]||(t[41]=e("span",null,"Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹:",-1)),m(e("input",{"onUpdate:modelValue":t[13]||(t[13]=s=>$.value=s),type:"number",step:"0.01",placeholder:j.value.toString(),class:"input w-32 text-left py-1"},null,8,ns),[[f,$.value,void 0,{number:!0}]])]),lt.value>0?(i(),u("div",as,[t[42]||(t[42]=e("span",null,"Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ:",-1)),e("span",null,a(r(b)(lt.value)),1)])):_("",!0)]),e("div",rs,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium mb-2"},"Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹",-1)),e("div",is,[(i(),u(U,null,D(ut,s=>e("button",{key:s.value,onClick:n=>E.value=s.value,class:V([E.value===s.value?"bg-primary-600 text-white":"bg-gray-100","py-2 rounded-lg font-medium transition-all"])},a(s.label),11,us)),64))])]),e("div",ds,[e("button",{onClick:yt,disabled:p.value.length===0,class:"btn btn-success w-full py-3 text-lg"}," Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø¨ÙŠØ¹ ",8,cs),e("button",{onClick:gt,class:"btn btn-secondary w-full"}," Ù…Ø³Ø­ Ø§Ù„Ø³Ù„Ø© ")])])]),e("div",ps,[e("div",vs,[e("div",gs,[e("div",ys,[t[44]||(t[44]=e("span",{class:"text-gray-600"},"Ø§Ù„Ø¹Ù…ÙŠÙ„:",-1)),e("span",ms,a(T.value),1)]),e("button",{onClick:nt,class:"text-xs text-primary-600 hover:text-primary-800 font-medium px-2 py-1 bg-white rounded"}," ØªØºÙŠÙŠØ± ")]),e("div",bs," Ø§Ù„Ø³Ø¹Ø±: "+a(at()),1)]),e("div",xs,[e("div",fs,[e("div",null,[t[45]||(t[45]=e("p",{class:"text-sm text-gray-600"},"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø³Ù„Ø©",-1)),e("p",hs,a(r(b)(j.value)),1)]),e("div",_s,[t[46]||(t[46]=e("p",{class:"text-sm text-gray-600"},"Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª",-1)),e("p",ws,a(r(W)(p.value.length)),1)])]),e("button",{onClick:t[14]||(t[14]=s=>H.value=!0),disabled:p.value.length===0,class:"btn btn-success w-full py-4 text-lg font-bold flex items-center justify-center gap-2"},[x(r(it),{size:24}),Y(" Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨ ("+a(r(W)(p.value.length))+") ",1)],8,ks)])])])),H.value?(i(),u("div",Cs,[e("div",qs,[e("button",{onClick:t[15]||(t[15]=s=>H.value=!1),class:"text-white hover:bg-primary-700 rounded-lg p-2"},[...t[47]||(t[47]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),e("div",$s,[e("h2",js,[x(r(it),{size:24}),t[48]||(t[48]=Y(" Ø³Ù„Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª ",-1))])])]),e("div",Ps,[e("div",Ms,[e("div",null,[t[49]||(t[49]=e("p",{class:"text-sm text-gray-600"},"Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„Ø­Ø§Ù„ÙŠ",-1)),e("p",zs,a(T.value),1)]),e("button",{onClick:nt,class:"text-sm text-primary-600 hover:text-primary-800 font-medium"}," ØªØºÙŠÙŠØ± ")]),e("div",Ss," Ø§Ù„Ø³Ø¹Ø±: "+a(at()),1)]),e("div",Vs,[p.value.length===0?(i(),u("div",Fs," Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ© ")):(i(),u("div",Us,[(i(!0),u(U,null,D(p.value,(s,n)=>(i(),u("div",{key:`${s.product.id}-${n}`,class:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg"},[e("div",Ls,[e("p",Bs,a(s.product.name_ar),1),e("p",Is,a(r(b)(s.unit_price)),1),s.with_packaging?(i(),u("p",Ts," ğŸ“¦ Ù…Ø¹ Ø¹Ù„Ø¨Ø© ("+a(r(W)(s.packaging_quantity))+" Ã— "+a(r(b)(s.packaging_price))+") ",1)):_("",!0)]),e("div",As,[e("button",{onClick:c=>ct(s),class:"w-8 h-8 rounded bg-gray-200 hover:bg-gray-300 flex items-center justify-center"},[x(r(Pt),{size:16})],8,Qs),e("input",{value:s.quantity,onInput:c=>pt(s,c.target.value),onBlur:c=>vt(s),type:"number",min:"1",max:s.product.quantity,class:"w-14 text-center font-bold border rounded py-1 text-sm"},null,40,Ns),e("button",{onClick:c=>dt(s),class:"w-8 h-8 rounded bg-gray-200 hover:bg-gray-300 flex items-center justify-center"},[x(r($t),{size:16})],8,Ds)]),e("button",{onClick:c=>ot(s),class:"text-red-600 hover:text-red-800"},[x(r(jt),{size:18})],8,Ws)]))),128))]))]),e("div",Es,[e("div",Os,[e("div",Js,[t[50]||(t[50]=e("span",{class:"text-gray-600"},"Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙØ±Ø¹ÙŠ:",-1)),e("span",Rs,a(r(b)(st.value)),1)]),e("div",Gs,[t[51]||(t[51]=e("label",{class:"text-gray-600"},"Ø§Ù„Ø®ØµÙ…:",-1)),m(e("input",{"onUpdate:modelValue":t[16]||(t[16]=s=>z.value=s),type:"number",step:"0.01",min:"0",class:"input w-32 text-left py-2 text-sm",placeholder:"0.00"},null,512),[[f,z.value,void 0,{number:!0}]])]),e("div",Hs,[t[52]||(t[52]=e("label",{class:"text-gray-600"},"Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©:",-1)),m(e("input",{"onUpdate:modelValue":t[17]||(t[17]=s=>S.value=s),type:"number",step:"0.01",min:"0",class:"input w-32 text-left py-2 text-sm",placeholder:"0.00"},null,512),[[f,S.value,void 0,{number:!0}]])]),e("div",Ks,[t[53]||(t[53]=e("span",null,"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:",-1)),e("span",null,a(r(b)(j.value)),1)]),e("div",Xs,[t[54]||(t[54]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹:",-1)),e("div",Ys,[(i(),u(U,null,D(ut,s=>e("button",{key:s.value,onClick:n=>E.value=s.value,class:V(["py-3 px-4 rounded-lg font-medium transition-all border-2",E.value===s.value?"bg-primary-600 text-white border-primary-600":"bg-white text-gray-700 border-gray-300 hover:border-primary-400"])},a(s.label),11,Zs)),64))])]),e("div",null,[t[55]||(t[55]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹:",-1)),m(e("input",{"onUpdate:modelValue":t[18]||(t[18]=s=>$.value=s),type:"number",step:"0.01",min:"0",class:"input w-full text-left py-2",placeholder:r(b)(j.value)},null,8,tl),[[f,$.value,void 0,{number:!0}]]),t[56]||(t[56]=e("p",{class:"text-xs text-gray-500 mt-1"},"Ø§ØªØ±ÙƒÙ‡ ÙØ§Ø±ØºØ§Ù‹ Ù„Ù„Ø¯ÙØ¹ Ø§Ù„ÙƒØ§Ù…Ù„",-1))]),$.value&&$.value<j.value?(i(),u("div",el,[e("div",sl,[t[57]||(t[57]=e("span",{class:"text-sm font-medium text-red-800"},"Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ:",-1)),e("span",ll,a(r(b)(lt.value)),1)])])):_("",!0)]),e("div",ol,[e("button",{onClick:t[19]||(t[19]=s=>{yt(),H.value=!1}),disabled:p.value.length===0,class:"btn btn-success w-full py-4 text-lg font-bold"}," Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø¨ÙŠØ¹ ",8,nl),e("button",{onClick:gt,class:"btn btn-secondary w-full py-3"}," Ù…Ø³Ø­ Ø§Ù„Ø³Ù„Ø© ")])])])):_("",!0),A.value?(i(),u("div",{key:4,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]",onClick:t[25]||(t[25]=X(s=>A.value=!1,["self"]))},[e("div",al,[e("button",{onClick:t[20]||(t[20]=s=>A.value=!1),class:"absolute top-4 left-4 text-gray-400 hover:text-gray-600 transition-colors",title:"Ø¥ØºÙ„Ø§Ù‚"},[...t[58]||(t[58]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),t[64]||(t[64]=e("h3",{class:"text-2xl font-bold mb-4"},"Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯",-1)),e("form",{onSubmit:X(Qt,["prevent"]),class:"space-y-4"},[e("div",null,[t[59]||(t[59]=e("label",{class:"block text-sm font-medium mb-2"},"Ø§Ù„Ø§Ø³Ù… *",-1)),m(e("input",{"onUpdate:modelValue":t[21]||(t[21]=s=>k.value.name=s),type:"text",required:"",class:"input",placeholder:"Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯",autofocus:""},null,512),[[f,k.value.name]])]),e("div",null,[t[60]||(t[60]=e("label",{class:"block text-sm font-medium mb-2"},"Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ *",-1)),m(e("input",{"onUpdate:modelValue":t[22]||(t[22]=s=>k.value.phone=s),type:"tel",required:"",class:"input",placeholder:"01012345678",pattern:"[0-9]{11}",title:"Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ù‡Ø§ØªÙ ØµØ­ÙŠØ­ (11 Ø±Ù‚Ù…)"},null,512),[[f,k.value.phone]])]),e("div",null,[t[62]||(t[62]=e("label",{class:"block text-sm font-medium mb-2"},"Ø§Ù„Ø´Ø±ÙŠØ­Ø©",-1)),m(e("select",{"onUpdate:modelValue":t[23]||(t[23]=s=>k.value.segment=s),class:"input"},[...t[61]||(t[61]=[e("option",{value:"Ù‚Ø·Ø§Ø¹ÙŠ"},"Ù‚Ø·Ø§Ø¹ÙŠ",-1),e("option",{value:"Ø¬Ù…Ù„Ø©"},"Ø¬Ù…Ù„Ø©",-1),e("option",{value:"ØµÙØ­Ø©"},"ØµÙØ­Ø©",-1)])],512),[[Xt,k.value.segment]])]),e("div",rl,[e("button",{type:"button",onClick:t[24]||(t[24]=s=>A.value=!1),class:"btn btn-secondary flex-1"},"Ø¥Ù„ØºØ§Ø¡"),t[63]||(t[63]=e("button",{type:"submit",class:"btn btn-primary flex-1"},"Ø­ÙØ¸ ÙˆØ¥Ø¶Ø§ÙØ©",-1))])],32)])])):_("",!0)],64)}}};export{xl as default};
