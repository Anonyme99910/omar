import{u as Rt,b as Gt,r as d,i as W,f as Ht,c as u,o as r,k as C,w as K,d as e,e as f,l as b,v as x,m as i,F as Q,n as E,t as a,x as F,y as at,q as Kt,A as Xt,z}from"./index-Rt_502Uc.js";import{f as h,t as N}from"./numbers-BTmV-EI5.js";import{S as kt}from"./search-BjHEQDBp.js";import{U as Yt}from"./user-plus-CWLwkuG4.js";import{P as Zt}from"./package-tT6sLgRy.js";import{S as Ct}from"./shopping-cart-BQW--DL6.js";import{c as te}from"./createLucideIcon-CSO2SdYn.js";import{P as qt}from"./plus-CqurEZwx.js";import{T as $t}from"./trash-2-4efoqFEh.js";/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=te("MinusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}]]),ee={class:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl mx-4 max-h-[90vh] flex flex-col relative"},se={class:"p-8 pb-4"},oe={class:"relative"},le={key:0,class:"absolute right-3 top-3.5"},ne={class:"flex-1 overflow-y-auto px-8 space-y-3"},ae=["onClick"],re={class:"flex items-center justify-between"},ie={class:"font-bold text-lg text-gray-900"},ue={class:"text-sm text-gray-600"},de={class:"p-8 pt-4 border-t bg-white rounded-b-2xl"},ce={class:"bg-white rounded-2xl shadow-2xl w-full max-w-md mx-4 p-6"},pe={class:"text-gray-600 mb-6 text-center"},ve={class:"space-y-4"},ge={class:"flex gap-3"},ye={key:0,class:"space-y-4 p-4 bg-gray-50 rounded-lg"},fe={key:2,class:"flex flex-col lg:flex-row h-screen bg-gray-50"},me={class:"flex-1 p-4 overflow-y-auto pb-44 lg:pb-4"},be={class:"card"},xe={class:"relative"},he=["placeholder"],we={key:0,class:"absolute left-12 top-3.5"},_e={class:"flex justify-center"},ke={class:"inline-flex rounded-lg border-2 border-primary-600 p-1 bg-white shadow-md"},Ce={class:"grid grid-cols-2 md:grid-cols-3 gap-4"},qe=["onClick"],$e={class:"aspect-square bg-gray-100 rounded-lg mb-3 flex items-center justify-center overflow-hidden"},je=["src","alt"],Pe={class:"font-bold text-gray-900 mb-1 truncate"},Me={key:0,class:"text-sm text-gray-500 mb-2"},ze={key:1,class:"text-sm text-gray-500 mb-2 line-clamp-2"},Se={class:"flex items-center justify-between"},Fe={class:"text-lg font-bold text-primary-600"},Ve={class:"hidden lg:flex lg:w-96 bg-white border-l border-gray-200 flex-col"},Le={class:"flex-1 p-4 overflow-y-auto"},Ue={class:"mb-4 p-3 bg-primary-50 rounded-lg border border-primary-200"},Be={class:"flex items-center justify-between mb-2"},Ie={class:"font-bold text-gray-900"},Te={class:"text-xs text-gray-600"},Ae={class:"text-xl font-bold mb-4 flex items-center gap-2"},Qe={class:"space-y-3 mb-4 max-h-64 overflow-y-auto"},Ne={key:0,class:"text-center py-8 text-gray-500"},De={class:"flex-1"},We={class:"font-medium text-sm"},Ee={class:"text-xs text-gray-500"},Oe={key:0,class:"text-xs text-primary-600 font-medium mt-1"},Je={class:"flex items-center gap-2"},Re=["onClick"],Ge=["value","onInput","onBlur","max"],He=["onClick"],Ke=["onClick"],Xe={class:"border-t pt-4 space-y-2"},Ye={class:"flex justify-between text-sm"},Ze={class:"font-bold"},ts={class:"flex justify-between text-sm"},es={class:"flex justify-between text-sm"},ss={class:"flex justify-between text-lg font-bold border-t pt-2"},os={class:"text-primary-600"},ls={class:"flex justify-between text-sm bg-blue-50 p-2 rounded"},ns=["placeholder"],as={key:0,class:"flex justify-between text-sm text-red-600 font-bold"},rs={class:"mt-4"},is={class:"grid grid-cols-2 gap-2"},us=["onClick"],ds={class:"mt-4 space-y-2"},cs=["disabled"],ps={class:"lg:hidden fixed bottom-0 left-0 right-0 bg-white border-t-2 border-gray-200 shadow-lg z-40"},vs={class:"bg-primary-50 px-4 py-2 border-b border-primary-200"},gs={class:"flex items-center justify-between text-sm"},ys={class:"flex items-center gap-2"},fs={class:"font-bold text-gray-900"},ms={class:"text-xs text-gray-600 mt-1"},bs={class:"px-4 py-3"},xs={class:"flex items-center justify-between mb-3"},hs={class:"text-2xl font-bold text-primary-600"},ws={class:"text-right"},_s={class:"text-xl font-bold text-gray-900"},ks=["disabled"],Cs={key:3,class:"lg:hidden fixed inset-0 bg-white z-50 flex flex-col"},qs={class:"bg-primary-600 text-white p-4 flex items-center justify-between"},$s={class:"p-4 bg-primary-50 border-b border-primary-200"},js={class:"flex items-center justify-between"},Ps={class:"font-bold text-gray-900"},Ms={class:"text-xs text-gray-600 mt-1"},zs={class:"flex-1 overflow-y-auto p-4"},Ss={key:0,class:"text-center py-12 text-gray-500"},Fs={key:1,class:"space-y-3"},Vs={class:"flex-1"},Ls={class:"font-medium text-sm"},Us={class:"text-xs text-gray-500"},Bs={key:0,class:"text-xs text-primary-600 font-medium mt-1"},Is={class:"flex items-center gap-2"},Ts=["onClick"],As=["value","onInput","onBlur","max"],Qs=["onClick"],Ns=["onClick"],Ds={class:"border-t p-4 bg-white"},Ws={class:"space-y-2 mb-4"},Es={class:"flex justify-between text-sm"},Os={class:"font-bold"},Js={class:"flex justify-between text-sm"},Rs={class:"flex justify-between text-sm"},Gs={class:"flex justify-between text-lg font-bold text-primary-600 pt-2 border-t"},Hs={class:"space-y-2"},Ks=["disabled"],Xs={class:"bg-white rounded-xl p-6 w-full max-w-md relative"},Ys={class:"flex gap-3 pt-2"},uo={__name:"POS",setup(Zs){const Pt=Rt(),v=Gt(),w=d("products"),V=d([]),O=d([]),L=d([]),J=d([]),q=d([]),p=d([]),U=d(""),j=d(""),m=d(null),B=d(""),P=d(0),M=d(0),D=d(null),X=d("cash"),I=d(!1);d(!1);const Y=d(!1);let Z=null;const tt=d(!1),R=d(null),y=d("without"),T=d(1),A=d(0),G=d(!1),_=d({name:"",phone:"",segment:"ŸÇÿ∑ÿßÿπŸä"}),Mt=[{value:"cash",label:"ŸÜŸÇÿØŸä"},{value:"transfer",label:"ÿ™ÿ≠ŸàŸäŸÑ"}],zt=W(()=>{const o=w.value==="products"?V.value:L.value;return U.value?o:o.slice(0,12)}),St=W(()=>{if(!j.value)return q.value;const o=j.value.toLowerCase().trim(),t=s=>s.replace(/[ÿ£ÿ•ÿ¢]/g,"ÿß").replace(/[Ÿâ]/g,"Ÿä").replace(/[ÿ©]/g,"Ÿá").replace(/[\u064B-\u065F]/g,""),l=t(o);return q.value.map(s=>{const n=t(s.name.toLowerCase()),c=s.phone.toString();let g=0;if(n===l||c===o)g=1e3;else if(n.startsWith(l)||c.startsWith(o))g=500;else if(n.includes(l)||c.includes(o))g=100;else{let $=0;for(let k=0;k<n.length&&$<l.length;k++)n[k]===l[$]&&($++,g+=1);$!==l.length&&(g=0)}return{customer:s,score:g}}).filter(s=>s.score>0).sort((s,n)=>n.score-s.score).slice(0,10).map(s=>s.customer)}),et=W(()=>p.value.reduce((o,t)=>{const l=t.unit_price*t.quantity,s=t.with_packaging?t.packaging_price*t.packaging_quantity:0;return o+l+s},0)),S=W(()=>et.value+M.value-P.value),rt=W(()=>{const o=D.value||S.value;return Math.max(0,S.value-o)}),Ft=()=>{Z&&clearTimeout(Z),Y.value=!0,Z=setTimeout(async()=>{w.value==="products"?await Vt():await Lt(),Y.value=!1},300)},Vt=async()=>{const o=U.value.trim();if(!o){V.value=O.value.slice(0,12);return}const t=o.toLowerCase(),l=O.value.filter(s=>{var bt,xt,ht,wt,_t;const n=s.name_ar.toLowerCase(),c=((bt=s.barcode)==null?void 0:bt.toLowerCase())||"",g=((ht=(xt=s.category)==null?void 0:xt.name_ar)==null?void 0:ht.toLowerCase())||"",$=((_t=(wt=s.brand)==null?void 0:wt.name_ar)==null?void 0:_t.toLowerCase())||"";if(n.includes(t)||c.includes(t)||g.includes(t)||$.includes(t))return!0;let k=0;for(let nt=0;nt<n.length&&k<t.length;nt++)n[nt]===t[k]&&k++;return k===t.length});if(V.value=l,l.length===0&&o.length>=2)try{const s=await z.getProducts({search:o});V.value=s.data.data||s.data||[]}catch(s){console.error("Search error:",s)}},Lt=async()=>{const o=U.value.trim();if(!o){L.value=J.value.slice(0,12);return}const t=o.toLowerCase(),l=J.value.filter(s=>{var g;const n=s.name_ar.toLowerCase(),c=((g=s.description)==null?void 0:g.toLowerCase())||"";return n.includes(t)||c.includes(t)});L.value=l},Ut=o=>{if(!o)return"";const l=JSON.parse(o)[0];return l.startsWith("data:")?l:`http://localhost/parfumes/backend/public${l}`},Bt=o=>{if(!o&&o!==0)return"";const t=String(o).trim();return/\bml\b/i.test(t)||t.includes("ŸÖŸÑ")?t:`${t} ŸÖŸÑ`},It=o=>{const t=q.value.find(s=>s.id===m.value),l=(t==null?void 0:t.segment)||"ŸÇÿ∑ÿßÿπŸä";return parseFloat(l==="ÿ¨ŸÖŸÑÿ©"?o.price_ÿ¨ŸÖŸÑÿ©:l==="ÿµŸÅÿ≠ÿ©"?o.price_ÿµŸÅÿ≠ÿ©:o.price_ŸÇÿ∑ÿßÿπŸä)},Tt=o=>{if(o.quantity===0){v.error(w.value==="products"?"ÿßŸÑŸÖŸÜÿ™ÿ¨ ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ± ŸÅŸä ÿßŸÑŸÖÿÆÿ≤ŸàŸÜ":"ÿßŸÑÿ®ÿßŸÇÿ© ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ±ÿ© ŸÅŸä ÿßŸÑŸÖÿÆÿ≤ŸàŸÜ");return}R.value=o,y.value="without",T.value=1,A.value=0,tt.value=!0},H=()=>{tt.value=!1,R.value=null,y.value="without",T.value=1,A.value=0},At=()=>{const o=R.value;if(!o)return;const t=p.value.find(l=>l.product.id===o.id&&l.with_packaging===(y.value==="with")&&l.packaging_quantity===(y.value==="with"?T.value:null)&&l.packaging_price===(y.value==="with"?A.value:null));if(t){if(t.quantity>=o.quantity){v.error("ÿßŸÑŸÉŸÖŸäÿ© ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ© ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ±ÿ©"),H();return}t.quantity++}else{const l={product:o,quantity:1,unit_price:ft(o),with_packaging:y.value==="with",packaging_quantity:y.value==="with"?T.value:null,packaging_price:y.value==="with"?A.value:null};p.value.push(l)}v.success(w.value==="products"?"ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨ ŸÑŸÑÿ≥ŸÑÿ©":"ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿ®ÿßŸÇÿ© ŸÑŸÑÿ≥ŸÑÿ©"),H()},it=o=>{if(o.quantity>=o.product.quantity){v.error("ÿßŸÑŸÉŸÖŸäÿ© ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ© ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ±ÿ©");return}o.quantity++},ut=o=>{o.quantity>1?o.quantity--:st(o)},dt=(o,t)=>{const l=parseInt(t)||1;if(l<1){o.quantity=1;return}if(l>o.product.quantity){v.error("ÿßŸÑŸÉŸÖŸäÿ© ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ© ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ±ÿ©"),o.quantity=o.product.quantity;return}o.quantity=l},ct=o=>{o.quantity<1?o.quantity=1:o.quantity>o.product.quantity&&(o.quantity=o.product.quantity,v.error("ÿßŸÑŸÉŸÖŸäÿ© ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ© ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ±ÿ©"))},st=o=>{p.value=p.value.filter(t=>t.product.id!==o.product.id)},pt=()=>{p.value.length!==0&&confirm("ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ŸÖÿ≥ÿ≠ ÿßŸÑÿ≥ŸÑÿ©ÿü")&&(p.value=[],P.value=0,M.value=0)},Qt=async()=>{var o,t;if(!_.value.name||!_.value.phone){v.error("ÿßŸÑÿ±ÿ¨ÿßÿ° ÿ•ÿØÿÆÿßŸÑ ÿßŸÑÿßÿ≥ŸÖ Ÿàÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ");return}try{const l=await z.createCustomer(_.value),s=l.data.data||l.data;v.success("ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿπŸÖŸäŸÑ ÿ®ŸÜÿ¨ÿßÿ≠"),q.value.unshift(s),m.value=s.id,B.value=s.name,I.value=!1,_.value={name:"",phone:"",segment:"ŸÇÿ∑ÿßÿπŸä"},v.info(`ÿ™ŸÖ ÿßÿÆÿ™Ÿäÿßÿ±: ${s.name}`)}catch(l){console.error("Error adding customer:",l),v.error(((t=(o=l.response)==null?void 0:o.data)==null?void 0:t.message)||"ŸÅÿ¥ŸÑ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿπŸÖŸäŸÑ")}},vt=async()=>{var t,l,s;if(p.value.length===0)return;const o={customer_id:m.value===0?null:m.value,items:p.value.map(n=>({product_id:n.product.id,quantity:n.quantity,unit_price:n.unit_price,with_packaging:n.with_packaging||!1,packaging_quantity:n.packaging_quantity||null,packaging_price:n.packaging_price||null})),tax:M.value,discount:P.value,paid_amount:D.value||S.value,payment_method:X.value};try{const n=await z.createSale(o),c=N(n.data.invoice_number);v.success(`ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ© ${c}`);const g=[];if(confirm("ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ© PDFÿü"))try{await z.downloadInvoicePdf(n.data.id),v.success("ÿ™ŸÖ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ© ÿ®ŸÜÿ¨ÿßÿ≠")}catch($){console.error("PDF Error:",$),v.error("ŸÅÿ¥ŸÑ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ© PDF")}(t=n.data.customer)!=null&&t.phone&&confirm("ŸáŸÑ ÿ™ÿ±ŸäÿØ ŸÖÿ¥ÿßÿ±ŸÉÿ© ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ© ÿπÿ®ÿ± Ÿàÿßÿ™ÿ≥ÿßÿ®ÿü")&&Nt(n.data),p.value=[],P.value=0,M.value=0,D.value=null,gt()}catch(n){v.error(((s=(l=n.response)==null?void 0:l.data)==null?void 0:s.error)||"ŸÅÿ¥ŸÑ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ©")}},Nt=async o=>{var t,l,s;try{const n=await z.getWhatsAppMessage(o.id),{message:c,phone:g}=n.data;if(!g){v.error("ŸÑÿß ŸäŸàÿ¨ÿØ ÿ±ŸÇŸÖ Ÿáÿßÿ™ŸÅ ŸÑŸÑÿπŸÖŸäŸÑ");return}const k=`https://wa.me/${g.replace(/[^0-9]/g,"")}?text=${encodeURIComponent(c)}`;window.open(k,"_blank"),v.success("ÿ™ŸÖ ŸÅÿ™ÿ≠ Ÿàÿßÿ™ÿ≥ÿßÿ® ÿ®ŸÜÿ¨ÿßÿ≠")}catch(n){console.error("WhatsApp Error:",n),console.error("Error details:",(t=n.response)==null?void 0:t.data),v.error("ŸÅÿ¥ŸÑ ŸÖÿ¥ÿßÿ±ŸÉÿ© ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ© ÿπÿ®ÿ± Ÿàÿßÿ™ÿ≥ÿßÿ®: "+(((s=(l=n.response)==null?void 0:l.data)==null?void 0:s.message)||n.message))}},gt=async()=>{try{const o=await z.getProducts(),t=o.data.data||o.data||[];O.value=t,V.value=t}catch(o){console.error("Failed to load products:",o),O.value=[],V.value=[]}},Dt=async()=>{console.log("üì• Fetching customers...");try{const o=await z.getCustomers();q.value=o.data.data||o.data||[],console.log("‚úÖ Customers loaded:",q.value.length)}catch(o){console.error("‚ùå Failed to load customers:",o),q.value=[]}},Wt=async()=>{try{const o=await z.getPackages(),t=o.data.data||o.data||[];J.value=t,L.value=t}catch(o){console.error("Failed to load packages:",o),J.value=[],L.value=[]}},yt=o=>{w.value=o,U.value="",o==="packages"&&L.value.length===0&&Wt()},ft=o=>w.value==="products"?It(o):Et(o),Et=o=>{const t=q.value.find(s=>s.id===m.value),l=(t==null?void 0:t.segment)||"ŸÇÿ∑ÿßÿπŸä";return parseFloat(l==="ÿ¨ŸÖŸÑÿ©"?o.price_ÿ¨ŸÖŸÑÿ©:l==="ÿµŸÅÿ≠ÿ©"?o.price_ÿµŸÅÿ≠ÿ©:o.price_ŸÇÿ∑ÿßÿπŸä)},Ot=()=>{Pt.back()},Jt=()=>{I.value=!0},mt=(o,t)=>{m.value=o,B.value=t,j.value="",v.success(`ÿ™ŸÖ ÿßÿÆÿ™Ÿäÿßÿ±: ${t}`)},ot=()=>{p.value.length>0&&!confirm("ÿ≥Ÿäÿ™ŸÖ ŸÖÿ≥ÿ≠ ÿßŸÑÿ≥ŸÑÿ© ÿßŸÑÿ≠ÿßŸÑŸäÿ©. ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿßŸÑŸÖÿ™ÿßÿ®ÿπÿ©ÿü")||(p.value=[],m.value=null,B.value="",j.value="")},lt=()=>{if(m.value===0||m.value===null)return"ŸÇÿ∑ÿßÿπŸä";const o=q.value.find(t=>t.id===m.value);return(o==null?void 0:o.segment)||"ŸÇÿ∑ÿßÿπŸä"};return Ht(()=>{gt(),Dt()}),(o,t)=>{var l;return r(),u(Q,null,[m.value===null?(r(),u("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:K(Ot,["self"])},[e("div",ee,[e("button",{onClick:t[0]||(t[0]=s=>o.$router.back()),class:"absolute top-4 left-4 text-gray-400 hover:text-gray-600 transition-colors z-10",title:"ÿßŸÑŸÇÿßÿ¶ŸÖÿ©"},[...t[25]||(t[25]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])]),e("div",se,[t[27]||(t[27]=e("div",{class:"text-center mb-6"},[e("h2",{class:"text-3xl font-bold text-gray-900 mb-2"},"ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ŸÉ ŸÅŸä ŸÜŸÇÿ∑ÿ© ÿßŸÑÿ®Ÿäÿπ"),e("p",{class:"text-gray-600"},"ÿßÿÆÿ™ÿ± ÿßŸÑÿπŸÖŸäŸÑ ŸÑŸÑŸÖÿ™ÿßÿ®ÿπÿ©")],-1)),e("div",oe,[f(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>j.value=s),type:"text",placeholder:"ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ÿπŸÖŸäŸÑ ÿ®ÿßŸÑÿßÿ≥ŸÖ ÿ£Ÿà ÿßŸÑŸáÿßÿ™ŸÅ...",class:"input pl-10 text-lg",autofocus:""},null,512),[[x,j.value]]),b(i(kt),{class:"absolute left-3 top-3.5 text-gray-400",size:24}),j.value?(r(),u("div",le,[e("button",{onClick:t[2]||(t[2]=s=>j.value=""),class:"text-gray-400 hover:text-gray-600"},[...t[26]||(t[26]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):C("",!0)])]),e("div",ne,[e("button",{onClick:t[3]||(t[3]=s=>mt(0,"ÿπŸÖŸäŸÑ ÿπÿßÿØŸä")),class:"w-full p-4 bg-gradient-to-r from-gray-100 to-gray-200 hover:from-gray-200 hover:to-gray-300 rounded-xl text-right transition-all border-2 border-transparent hover:border-primary-500"},[...t[28]||(t[28]=[e("div",{class:"flex items-center justify-between"},[e("div",null,[e("p",{class:"font-bold text-lg text-gray-900"},"ÿπŸÖŸäŸÑ ÿπÿßÿØŸä"),e("p",{class:"text-sm text-gray-600"},"ÿ≥ÿπÿ± ŸÇÿ∑ÿßÿπŸä")]),e("div",{class:"bg-primary-100 text-primary-700 px-3 py-1 rounded-full text-sm font-medium"}," ŸÇÿ∑ÿßÿπŸä ")],-1)])]),(r(!0),u(Q,null,E(St.value,s=>(r(),u("button",{key:s.id,onClick:n=>mt(s.id,s.name),class:"w-full p-4 bg-white hover:bg-gray-50 rounded-xl text-right transition-all border-2 border-gray-200 hover:border-primary-500"},[e("div",re,[e("div",null,[e("p",ie,a(s.name),1),e("p",ue,a(s.phone),1)]),e("div",{class:F(["px-3 py-1 rounded-full text-sm font-medium",{"bg-blue-100 text-blue-700":s.segment==="ÿ¨ŸÖŸÑÿ©","bg-green-100 text-green-700":s.segment==="ŸÇÿ∑ÿßÿπŸä","bg-purple-100 text-purple-700":s.segment==="ÿµŸÅÿ≠ÿ©"}])},a(s.segment),3)])],8,ae))),128))]),e("div",de,[e("button",{onClick:Jt,class:"w-full btn btn-primary flex items-center justify-center gap-2",type:"button"},[b(i(Yt),{size:20}),t[29]||(t[29]=at(" ÿ•ÿ∂ÿßŸÅÿ© ÿπŸÖŸäŸÑ ÿ¨ÿØŸäÿØ ",-1))])])])])):C("",!0),tt.value?(r(),u("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:K(H,["self"])},[e("div",ce,[t[32]||(t[32]=e("h3",{class:"text-2xl font-bold text-gray-900 mb-4 text-center"},"ÿ•ÿ∂ÿßŸÅÿ© ÿπŸÑÿ®ÿ©",-1)),e("p",pe,a((l=R.value)==null?void 0:l.name_ar),1),e("div",ve,[e("div",ge,[e("button",{onClick:t[4]||(t[4]=s=>y.value="with"),class:F(["flex-1 py-3 px-4 rounded-lg font-medium transition-all border-2",y.value==="with"?"bg-primary-600 text-white border-primary-600":"bg-white text-gray-700 border-gray-300 hover:border-primary-400"])}," ŸÖÿπ ÿπŸÑÿ®ÿ© ",2),e("button",{onClick:t[5]||(t[5]=s=>y.value="without"),class:F(["flex-1 py-3 px-4 rounded-lg font-medium transition-all border-2",y.value==="without"?"bg-primary-600 text-white border-primary-600":"bg-white text-gray-700 border-gray-300 hover:border-primary-400"])}," ÿ®ÿØŸàŸÜ ÿπŸÑÿ®ÿ© ",2)]),y.value==="with"?(r(),u("div",ye,[e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"ÿπÿØÿØ ÿßŸÑÿπŸÑÿ®",-1)),f(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>T.value=s),type:"number",min:"1",class:"input",placeholder:"1"},null,512),[[x,T.value,void 0,{number:!0}]])]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"ÿ≥ÿπÿ± ÿßŸÑÿπŸÑÿ®ÿ©",-1)),f(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>A.value=s),type:"number",step:"0.01",min:"0",class:"input",placeholder:"0.00"},null,512),[[x,A.value,void 0,{number:!0}]])])])):C("",!0),e("div",{class:"flex gap-3 mt-6"},[e("button",{onClick:H,class:"flex-1 py-3 px-4 bg-gray-200 text-gray-700 rounded-lg font-medium hover:bg-gray-300 transition-colors"}," ÿ•ŸÑÿ∫ÿßÿ° "),e("button",{onClick:At,class:"flex-1 py-3 px-4 bg-primary-600 text-white rounded-lg font-medium hover:bg-primary-700 transition-colors"}," ÿ•ÿ∂ÿßŸÅÿ© ŸÑŸÑÿ≥ŸÑÿ© ")])])])])):(r(),u("div",fe,[e("div",me,[e("div",be,[e("div",xe,[f(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>U.value=s),onInput:Ft,type:"text",placeholder:w.value==="products"?"ÿßÿ®ÿ≠ÿ´ ÿ®ÿßŸÑÿßÿ≥ŸÖ ÿ£Ÿà ÿßŸÑÿ®ÿßÿ±ŸÉŸàÿØ ÿ£Ÿà ÿßŸÑŸÅÿ¶ÿ©...":"ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ÿ®ÿßŸÇÿ©...",class:"input pl-10 text-lg",autofocus:""},null,40,he),[[x,U.value]]),b(i(kt),{class:"absolute left-3 top-3.5 text-gray-400",size:24}),Y.value?(r(),u("div",we,[...t[33]||(t[33]=[e("div",{class:"animate-spin rounded-full h-5 w-5 border-b-2 border-primary-600"},null,-1)])])):C("",!0)])]),e("div",_e,[e("div",ke,[e("button",{onClick:t[9]||(t[9]=s=>yt("products")),class:F(["px-6 py-2 rounded-md font-medium transition-all",w.value==="products"?"bg-primary-600 text-white shadow-md":"text-gray-700 hover:bg-gray-100"])}," ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ ",2),e("button",{onClick:t[10]||(t[10]=s=>yt("packages")),class:F(["px-6 py-2 rounded-md font-medium transition-all",w.value==="packages"?"bg-primary-600 text-white shadow-md":"text-gray-700 hover:bg-gray-100"])}," ÿßŸÑÿ®ÿßŸÇÿßÿ™ ",2)])]),e("div",Ce,[(r(!0),u(Q,null,E(zt.value,s=>(r(),u("div",{key:s.id,onClick:n=>Tt(s),class:"card hover:shadow-lg cursor-pointer transition-all hover:scale-105"},[e("div",$e,[s.photos&&JSON.parse(s.photos)[0]?(r(),u("img",{key:0,src:Ut(s.photos),alt:s.name_ar,class:"w-full h-full object-cover"},null,8,je)):(r(),Kt(i(Zt),{key:1,size:48,class:"text-gray-400"}))]),e("h4",Pe,a(s.name_ar),1),w.value==="products"?(r(),u("p",Me,a(Bt(s.volume_ml)),1)):(r(),u("p",ze,a(s.description||"ÿ®ÿßŸÇÿ©"),1)),e("div",Se,[e("span",Fe,a(i(h)(ft(s))),1),e("span",{class:F(["text-xs badge",s.quantity>0?"badge-success":"badge-danger"])},a(i(N)(s.quantity))+" ŸÇÿ∑ÿπÿ© ",3)])],8,qe))),128))])]),e("div",Ve,[e("div",Le,[e("div",Ue,[e("div",Be,[e("div",null,[t[34]||(t[34]=e("p",{class:"text-sm text-gray-600"},"ÿßŸÑÿπŸÖŸäŸÑ ÿßŸÑÿ≠ÿßŸÑŸä",-1)),e("p",Ie,a(B.value),1)]),e("button",{onClick:ot,class:"text-sm text-primary-600 hover:text-primary-800 font-medium"}," ÿ™ÿ∫ŸäŸäÿ± ")]),e("div",Te," ÿßŸÑÿ≥ÿπÿ±: "+a(lt()),1)]),e("h3",Ae,[b(i(Ct),{size:24}),t[35]||(t[35]=at(" ÿ≥ŸÑÿ© ÿßŸÑŸÖÿ¥ÿ™ÿ±Ÿäÿßÿ™ ",-1))]),e("div",Qe,[p.value.length===0?(r(),u("div",Ne," ÿßŸÑÿ≥ŸÑÿ© ŸÅÿßÿ±ÿ∫ÿ© ")):C("",!0),(r(!0),u(Q,null,E(p.value,(s,n)=>(r(),u("div",{key:`${s.product.id}-${n}`,class:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg"},[e("div",De,[e("p",We,a(s.product.name_ar),1),e("p",Ee,a(i(h)(s.unit_price)),1),s.with_packaging?(r(),u("p",Oe," üì¶ ŸÖÿπ ÿπŸÑÿ®ÿ© ("+a(i(N)(s.packaging_quantity))+" √ó "+a(i(h)(s.packaging_price))+") ",1)):C("",!0)]),e("div",Je,[e("button",{onClick:c=>ut(s),class:"w-7 h-7 rounded bg-gray-200 hover:bg-gray-300 flex items-center justify-center"},[b(i(jt),{size:16})],8,Re),e("input",{value:s.quantity,onInput:c=>dt(s,c.target.value),onBlur:c=>ct(s),type:"number",min:"1",max:s.product.quantity,class:"w-12 text-center font-bold border rounded py-1 text-sm"},null,40,Ge),e("button",{onClick:c=>it(s),class:"w-7 h-7 rounded bg-gray-200 hover:bg-gray-300 flex items-center justify-center"},[b(i(qt),{size:16})],8,He)]),e("button",{onClick:c=>st(s),class:"text-red-600 hover:text-red-800"},[b(i($t),{size:18})],8,Ke)]))),128))]),e("div",Xe,[e("div",Ye,[t[36]||(t[36]=e("span",null,"ÿßŸÑŸÖÿ¨ŸÖŸàÿπ ÿßŸÑŸÅÿ±ÿπŸä:",-1)),e("span",Ze,a(i(h)(et.value)),1)]),e("div",ts,[t[37]||(t[37]=e("span",null,"ÿßŸÑÿÆÿµŸÖ:",-1)),f(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>P.value=s),type:"number",step:"0.01",class:"input w-32 text-left py-1"},null,512),[[x,P.value,void 0,{number:!0}]])]),e("div",es,[t[38]||(t[38]=e("span",null,"ÿßŸÑÿ∂ÿ±Ÿäÿ®ÿ©:",-1)),f(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>M.value=s),type:"number",step:"0.01",class:"input w-32 text-left py-1"},null,512),[[x,M.value,void 0,{number:!0}]])]),e("div",ss,[t[39]||(t[39]=e("span",null,"ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä:",-1)),e("span",os,a(i(h)(S.value)),1)]),e("div",ls,[t[40]||(t[40]=e("span",null,"ÿßŸÑŸÖÿ®ŸÑÿ∫ ÿßŸÑŸÖÿØŸÅŸàÿπ:",-1)),f(e("input",{"onUpdate:modelValue":t[13]||(t[13]=s=>D.value=s),type:"number",step:"0.01",placeholder:S.value.toString(),class:"input w-32 text-left py-1"},null,8,ns),[[x,D.value,void 0,{number:!0}]])]),rt.value>0?(r(),u("div",as,[t[41]||(t[41]=e("span",null,"ÿßŸÑŸÖÿ™ÿ®ŸÇŸä:",-1)),e("span",null,a(i(h)(rt.value)),1)])):C("",!0)]),e("div",rs,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium mb-2"},"ÿ∑ÿ±ŸäŸÇÿ© ÿßŸÑÿØŸÅÿπ",-1)),e("div",is,[(r(),u(Q,null,E(Mt,s=>e("button",{key:s.value,onClick:n=>X.value=s.value,class:F([X.value===s.value?"bg-primary-600 text-white":"bg-gray-100","py-2 rounded-lg font-medium transition-all"])},a(s.label),11,us)),64))])]),e("div",ds,[e("button",{onClick:vt,disabled:p.value.length===0,class:"btn btn-success w-full py-3 text-lg"}," ÿ•ÿ™ŸÖÿßŸÖ ÿßŸÑÿ®Ÿäÿπ ",8,cs),e("button",{onClick:pt,class:"btn btn-secondary w-full"}," ŸÖÿ≥ÿ≠ ÿßŸÑÿ≥ŸÑÿ© ")])])]),e("div",ps,[e("div",vs,[e("div",gs,[e("div",ys,[t[43]||(t[43]=e("span",{class:"text-gray-600"},"ÿßŸÑÿπŸÖŸäŸÑ:",-1)),e("span",fs,a(B.value),1)]),e("button",{onClick:ot,class:"text-xs text-primary-600 hover:text-primary-800 font-medium px-2 py-1 bg-white rounded"}," ÿ™ÿ∫ŸäŸäÿ± ")]),e("div",ms," ÿßŸÑÿ≥ÿπÿ±: "+a(lt()),1)]),e("div",bs,[e("div",xs,[e("div",null,[t[44]||(t[44]=e("p",{class:"text-sm text-gray-600"},"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ≥ŸÑÿ©",-1)),e("p",hs,a(i(h)(S.value)),1)]),e("div",ws,[t[45]||(t[45]=e("p",{class:"text-sm text-gray-600"},"ÿπÿØÿØ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™",-1)),e("p",_s,a(i(N)(p.value.length)),1)])]),e("button",{onClick:t[14]||(t[14]=s=>G.value=!0),disabled:p.value.length===0,class:"btn btn-success w-full py-4 text-lg font-bold flex items-center justify-center gap-2"},[b(i(Ct),{size:24}),at(" ÿ•ÿ™ŸÖÿßŸÖ ÿßŸÑÿ∑ŸÑÿ® ("+a(i(N)(p.value.length))+") ",1)],8,ks)])])])),G.value?(r(),u("div",Cs,[e("div",qs,[e("button",{onClick:t[15]||(t[15]=s=>G.value=!1),class:"text-white"},[...t[46]||(t[46]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),t[47]||(t[47]=e("h2",{class:"text-xl font-bold"},"ÿ≥ŸÑÿ© ÿßŸÑŸÖÿ¥ÿ™ÿ±Ÿäÿßÿ™",-1)),t[48]||(t[48]=e("div",{class:"w-6"},null,-1))]),e("div",$s,[e("div",js,[e("div",null,[t[49]||(t[49]=e("p",{class:"text-sm text-gray-600"},"ÿßŸÑÿπŸÖŸäŸÑ ÿßŸÑÿ≠ÿßŸÑŸä",-1)),e("p",Ps,a(B.value),1)]),e("button",{onClick:ot,class:"text-sm text-primary-600 hover:text-primary-800 font-medium"}," ÿ™ÿ∫ŸäŸäÿ± ")]),e("div",Ms," ÿßŸÑÿ≥ÿπÿ±: "+a(lt()),1)]),e("div",zs,[p.value.length===0?(r(),u("div",Ss," ÿßŸÑÿ≥ŸÑÿ© ŸÅÿßÿ±ÿ∫ÿ© ")):(r(),u("div",Fs,[(r(!0),u(Q,null,E(p.value,(s,n)=>(r(),u("div",{key:`${s.product.id}-${n}`,class:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg"},[e("div",Vs,[e("p",Ls,a(s.product.name_ar),1),e("p",Us,a(i(h)(s.unit_price)),1),s.with_packaging?(r(),u("p",Bs," üì¶ ŸÖÿπ ÿπŸÑÿ®ÿ© ("+a(i(N)(s.packaging_quantity))+" √ó "+a(i(h)(s.packaging_price))+") ",1)):C("",!0)]),e("div",Is,[e("button",{onClick:c=>ut(s),class:"w-8 h-8 rounded bg-gray-200 hover:bg-gray-300 flex items-center justify-center"},[b(i(jt),{size:16})],8,Ts),e("input",{value:s.quantity,onInput:c=>dt(s,c.target.value),onBlur:c=>ct(s),type:"number",min:"1",max:s.product.quantity,class:"w-14 text-center font-bold border rounded py-1 text-sm"},null,40,As),e("button",{onClick:c=>it(s),class:"w-8 h-8 rounded bg-gray-200 hover:bg-gray-300 flex items-center justify-center"},[b(i(qt),{size:16})],8,Qs)]),e("button",{onClick:c=>st(s),class:"text-red-600 hover:text-red-800"},[b(i($t),{size:18})],8,Ns)]))),128))]))]),e("div",Ds,[e("div",Ws,[e("div",Es,[t[50]||(t[50]=e("span",null,"ÿßŸÑŸÖÿ¨ŸÖŸàÿπ ÿßŸÑŸÅÿ±ÿπŸä:",-1)),e("span",Os,a(i(h)(et.value)),1)]),e("div",Js,[t[51]||(t[51]=e("span",null,"ÿßŸÑÿÆÿµŸÖ:",-1)),f(e("input",{"onUpdate:modelValue":t[16]||(t[16]=s=>P.value=s),type:"number",step:"0.01",class:"input w-32 text-left py-1 text-sm"},null,512),[[x,P.value,void 0,{number:!0}]])]),e("div",Rs,[t[52]||(t[52]=e("span",null,"ÿßŸÑÿ∂ÿ±Ÿäÿ®ÿ©:",-1)),f(e("input",{"onUpdate:modelValue":t[17]||(t[17]=s=>M.value=s),type:"number",step:"0.01",class:"input w-32 text-left py-1 text-sm"},null,512),[[x,M.value,void 0,{number:!0}]])]),e("div",Gs,[t[53]||(t[53]=e("span",null,"ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä:",-1)),e("span",null,a(i(h)(S.value)),1)])]),e("div",Hs,[e("button",{onClick:t[18]||(t[18]=s=>{vt(),G.value=!1}),disabled:p.value.length===0,class:"btn btn-success w-full py-3 text-lg"}," ÿ•ÿ™ŸÖÿßŸÖ ÿßŸÑÿ®Ÿäÿπ ",8,Ks),e("button",{onClick:pt,class:"btn btn-secondary w-full"}," ŸÖÿ≥ÿ≠ ÿßŸÑÿ≥ŸÑÿ© ")])])])):C("",!0),I.value?(r(),u("div",{key:4,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]",onClick:t[24]||(t[24]=K(s=>I.value=!1,["self"]))},[e("div",Xs,[e("button",{onClick:t[19]||(t[19]=s=>I.value=!1),class:"absolute top-4 left-4 text-gray-400 hover:text-gray-600 transition-colors",title:"ÿ•ÿ∫ŸÑÿßŸÇ"},[...t[54]||(t[54]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),t[60]||(t[60]=e("h3",{class:"text-2xl font-bold mb-4"},"ÿ•ÿ∂ÿßŸÅÿ© ÿπŸÖŸäŸÑ ÿ¨ÿØŸäÿØ",-1)),e("form",{onSubmit:K(Qt,["prevent"]),class:"space-y-4"},[e("div",null,[t[55]||(t[55]=e("label",{class:"block text-sm font-medium mb-2"},"ÿßŸÑÿßÿ≥ŸÖ *",-1)),f(e("input",{"onUpdate:modelValue":t[20]||(t[20]=s=>_.value.name=s),type:"text",required:"",class:"input",placeholder:"ÿ£ÿ≠ŸÖÿØ ŸÖÿ≠ŸÖÿØ",autofocus:""},null,512),[[x,_.value.name]])]),e("div",null,[t[56]||(t[56]=e("label",{class:"block text-sm font-medium mb-2"},"ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ *",-1)),f(e("input",{"onUpdate:modelValue":t[21]||(t[21]=s=>_.value.phone=s),type:"tel",required:"",class:"input",placeholder:"01012345678",pattern:"[0-9]{11}",title:"ÿßŸÑÿ±ÿ¨ÿßÿ° ÿ•ÿØÿÆÿßŸÑ ÿ±ŸÇŸÖ Ÿáÿßÿ™ŸÅ ÿµÿ≠Ÿäÿ≠ (11 ÿ±ŸÇŸÖ)"},null,512),[[x,_.value.phone]])]),e("div",null,[t[58]||(t[58]=e("label",{class:"block text-sm font-medium mb-2"},"ÿßŸÑÿ¥ÿ±Ÿäÿ≠ÿ©",-1)),f(e("select",{"onUpdate:modelValue":t[22]||(t[22]=s=>_.value.segment=s),class:"input"},[...t[57]||(t[57]=[e("option",{value:"ŸÇÿ∑ÿßÿπŸä"},"ŸÇÿ∑ÿßÿπŸä",-1),e("option",{value:"ÿ¨ŸÖŸÑÿ©"},"ÿ¨ŸÖŸÑÿ©",-1),e("option",{value:"ÿµŸÅÿ≠ÿ©"},"ÿµŸÅÿ≠ÿ©",-1)])],512),[[Xt,_.value.segment]])]),e("div",Ys,[e("button",{type:"button",onClick:t[23]||(t[23]=s=>I.value=!1),class:"btn btn-secondary flex-1"},"ÿ•ŸÑÿ∫ÿßÿ°"),t[59]||(t[59]=e("button",{type:"submit",class:"btn btn-primary flex-1"},"ÿ≠ŸÅÿ∏ Ÿàÿ•ÿ∂ÿßŸÅÿ©",-1))])],32)])])):C("",!0)],64)}}};export{uo as default};
