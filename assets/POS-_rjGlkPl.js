import{u as Ve,b as ze,r,i as z,f as Ue,c as u,o as n,k as U,w as R,d as t,e as k,l as C,v as P,m as v,F as A,n as D,t as i,x as I,y as ne,q as Ae,A as Ie,z as _}from"./index-VOtROKm6.js";import{f as B,t as G}from"./numbers-BTmV-EI5.js";import{S as ue}from"./search-CNkhKn6g.js";import{U as Be}from"./user-plus-7LB27cGk.js";import{P as Te}from"./package-C5uJm4gG.js";import{S as Ne}from"./shopping-cart-CVZ5DG4g.js";import{c as Qe}from"./createLucideIcon-CE3J3cEQ.js";import{P as De}from"./plus-C7Ld-jv3.js";import{T as We}from"./trash-2-Bs9ENnUf.js";/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=Qe("MinusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}]]),Oe={class:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto relative"},Je={class:"mb-6"},Re={class:"relative"},Ge={key:0,class:"absolute right-3 top-3.5"},He={class:"space-y-3 max-h-96 overflow-y-auto mb-6"},Ke=["onClick"],Xe={class:"flex items-center justify-between"},Ye={class:"font-bold text-lg text-gray-900"},Ze={class:"text-sm text-gray-600"},et={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},tt={class:"lg:col-span-2 space-y-4"},st={class:"card"},ot={class:"relative"},at=["placeholder"],lt={key:0,class:"absolute left-12 top-3.5"},rt={class:"flex justify-center"},nt={class:"inline-flex rounded-lg border-2 border-primary-600 p-1 bg-white shadow-md"},ut={class:"grid grid-cols-2 md:grid-cols-3 gap-4"},it=["onClick"],dt={class:"aspect-square bg-gray-100 rounded-lg mb-3 flex items-center justify-center overflow-hidden"},ct=["src","alt"],pt={class:"font-bold text-gray-900 mb-1 truncate"},vt={key:0,class:"text-sm text-gray-500 mb-2"},mt={key:1,class:"text-sm text-gray-500 mb-2 line-clamp-2"},ft={class:"flex items-center justify-between"},gt={class:"text-lg font-bold text-primary-600"},yt={class:"space-y-4"},bt={class:"card sticky top-24"},xt={class:"mb-4 p-3 bg-primary-50 rounded-lg border border-primary-200"},ht={class:"flex items-center justify-between mb-2"},wt={class:"font-bold text-gray-900"},kt={class:"text-xs text-gray-600"},_t={class:"text-xl font-bold mb-4 flex items-center gap-2"},Ct={class:"space-y-3 mb-4 max-h-64 overflow-y-auto"},Pt={key:0,class:"text-center py-8 text-gray-500"},qt={class:"flex-1"},Mt={class:"font-medium text-sm"},$t={class:"text-xs text-gray-500"},St={class:"flex items-center gap-2"},jt=["onClick"],Ft={class:"w-8 text-center font-bold"},Lt=["onClick"],Vt=["onClick"],zt={class:"border-t pt-4 space-y-2"},Ut={class:"flex justify-between text-sm"},At={class:"font-bold"},It={class:"flex justify-between text-sm"},Bt={class:"flex justify-between text-sm"},Tt={class:"flex justify-between text-lg font-bold border-t pt-2"},Nt={class:"text-primary-600"},Qt={class:"flex justify-between text-sm bg-blue-50 p-2 rounded"},Dt=["placeholder"],Wt={key:0,class:"flex justify-between text-sm text-red-600 font-bold"},Et={class:"mt-4"},Ot={class:"grid grid-cols-3 gap-2"},Jt=["onClick"],Rt={class:"mt-4 space-y-2"},Gt=["disabled"],Ht={class:"bg-white rounded-xl p-6 w-full max-w-md relative"},Kt={class:"flex gap-3 pt-2"},ns={__name:"POS",setup(Xt){const ie=Ve(),d=ze(),g=r("products"),q=r([]),T=r([]),M=r([]),N=r([]),x=r([]),c=r([]),$=r(""),w=r(""),m=r(null),Q=r(""),S=r(0),j=r(0),L=r(null),W=r("cash"),F=r(!1);r(!1);const E=r(!1);let O=null;const y=r({name:"",phone:"",segment:"ŸÇÿ∑ÿßÿπŸä"}),de=[{value:"cash",label:"ŸÜŸÇÿØŸä"},{value:"card",label:"ÿ®ÿ∑ÿßŸÇÿ©"},{value:"transfer",label:"ÿ™ÿ≠ŸàŸäŸÑ"}],ce=z(()=>{const o=g.value==="products"?q.value:M.value;return $.value?o:o.slice(0,12)}),pe=z(()=>{if(!w.value)return x.value;const o=w.value.toLowerCase().trim(),e=a=>a.replace(/[ÿ£ÿ•ÿ¢]/g,"ÿß").replace(/[Ÿâ]/g,"Ÿä").replace(/[ÿ©]/g,"Ÿá").replace(/[\u064B-\u065F]/g,""),s=e(o);return x.value.map(a=>{const l=e(a.name.toLowerCase()),f=a.phone.toString();let p=0;if(l===s||f===o)p=1e3;else if(l.startsWith(s)||f.startsWith(o))p=500;else if(l.includes(s)||f.includes(o))p=100;else{let h=0;for(let b=0;b<l.length&&h<s.length;b++)l[b]===s[h]&&(h++,p+=1);h!==s.length&&(p=0)}return{customer:a,score:p}}).filter(a=>a.score>0).sort((a,l)=>l.score-a.score).slice(0,10).map(a=>a.customer)}),H=z(()=>c.value.reduce((o,e)=>o+e.unit_price*e.quantity,0)),V=z(()=>H.value+j.value-S.value),K=z(()=>{const o=L.value||V.value;return Math.max(0,V.value-o)}),ve=()=>{O&&clearTimeout(O),E.value=!0,O=setTimeout(async()=>{g.value==="products"?await me():await fe(),E.value=!1},300)},me=async()=>{const o=$.value.trim();if(!o){q.value=T.value.slice(0,12);return}const e=o.toLowerCase(),s=T.value.filter(a=>{var se,oe,ae,le,re;const l=a.name_ar.toLowerCase(),f=((se=a.barcode)==null?void 0:se.toLowerCase())||"",p=((ae=(oe=a.category)==null?void 0:oe.name_ar)==null?void 0:ae.toLowerCase())||"",h=((re=(le=a.brand)==null?void 0:le.name_ar)==null?void 0:re.toLowerCase())||"";if(l.includes(e)||f.includes(e)||p.includes(e)||h.includes(e))return!0;let b=0;for(let J=0;J<l.length&&b<e.length;J++)l[J]===e[b]&&b++;return b===e.length});if(q.value=s,s.length===0&&o.length>=2)try{const a=await _.getProducts({search:o});q.value=a.data.data||a.data||[]}catch(a){console.error("Search error:",a)}},fe=async()=>{const o=$.value.trim();if(!o){M.value=N.value.slice(0,12);return}const e=o.toLowerCase(),s=N.value.filter(a=>{var p;const l=a.name_ar.toLowerCase(),f=((p=a.description)==null?void 0:p.toLowerCase())||"";return l.includes(e)||f.includes(e)});M.value=s},ge=o=>{if(!o)return"";const s=JSON.parse(o)[0];return s.startsWith("data:")?s:`http://localhost/parfumes/backend/public${s}`},ye=o=>{if(!o&&o!==0)return"";const e=String(o).trim();return/\bml\b/i.test(e)||e.includes("ŸÖŸÑ")?e:`${e} ŸÖŸÑ`},be=o=>{const e=x.value.find(a=>a.id===m.value),s=(e==null?void 0:e.segment)||"ŸÇÿ∑ÿßÿπŸä";return parseFloat(s==="ÿ¨ŸÖŸÑÿ©"?o.price_ÿ¨ŸÖŸÑÿ©:s==="ÿµŸÅÿ≠ÿ©"?o.price_ÿµŸÅÿ≠ÿ©:o.price_ŸÇÿ∑ÿßÿπŸä)},xe=o=>{if(o.quantity===0){d.error(g.value==="products"?"ÿßŸÑŸÖŸÜÿ™ÿ¨ ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ± ŸÅŸä ÿßŸÑŸÖÿÆÿ≤ŸàŸÜ":"ÿßŸÑÿ®ÿßŸÇÿ© ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ±ÿ© ŸÅŸä ÿßŸÑŸÖÿÆÿ≤ŸàŸÜ");return}const e=c.value.find(s=>s.product.id===o.id);if(e){if(e.quantity>=o.quantity){d.error("ÿßŸÑŸÉŸÖŸäÿ© ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ© ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ±ÿ©");return}e.quantity++}else c.value.push({product:o,quantity:1,unit_price:ee(o)});d.success(g.value==="products"?"ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨ ŸÑŸÑÿ≥ŸÑÿ©":"ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿ®ÿßŸÇÿ© ŸÑŸÑÿ≥ŸÑÿ©")},he=o=>{if(o.quantity>=o.product.quantity){d.error("ÿßŸÑŸÉŸÖŸäÿ© ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ© ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ±ÿ©");return}o.quantity++},we=o=>{o.quantity>1?o.quantity--:X(o)},X=o=>{c.value=c.value.filter(e=>e.product.id!==o.product.id)},ke=()=>{c.value.length!==0&&confirm("ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ŸÖÿ≥ÿ≠ ÿßŸÑÿ≥ŸÑÿ©ÿü")&&(c.value=[],S.value=0,j.value=0)},_e=async()=>{var o,e;if(!y.value.name||!y.value.phone){d.error("ÿßŸÑÿ±ÿ¨ÿßÿ° ÿ•ÿØÿÆÿßŸÑ ÿßŸÑÿßÿ≥ŸÖ Ÿàÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ");return}try{const s=await _.createCustomer(y.value),a=s.data.data||s.data;d.success("ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿπŸÖŸäŸÑ ÿ®ŸÜÿ¨ÿßÿ≠"),x.value.unshift(a),m.value=a.id,Q.value=a.name,F.value=!1,y.value={name:"",phone:"",segment:"ŸÇÿ∑ÿßÿπŸä"},d.info(`ÿ™ŸÖ ÿßÿÆÿ™Ÿäÿßÿ±: ${a.name}`)}catch(s){console.error("Error adding customer:",s),d.error(((e=(o=s.response)==null?void 0:o.data)==null?void 0:e.message)||"ŸÅÿ¥ŸÑ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿπŸÖŸäŸÑ")}},Ce=async()=>{var e,s,a;if(c.value.length===0)return;const o={customer_id:m.value===0?null:m.value,items:c.value.map(l=>({product_id:l.product.id,quantity:l.quantity,unit_price:l.unit_price})),tax:j.value,discount:S.value,paid_amount:L.value||V.value,payment_method:W.value};try{const l=await _.createSale(o),f=G(l.data.invoice_number);d.success(`ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ© ${f}`);const p=[];if(confirm("ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ© PDFÿü"))try{await _.downloadInvoicePdf(l.data.id),d.success("ÿ™ŸÖ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ© ÿ®ŸÜÿ¨ÿßÿ≠")}catch(h){console.error("PDF Error:",h),d.error("ŸÅÿ¥ŸÑ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ© PDF")}(e=l.data.customer)!=null&&e.phone&&confirm("ŸáŸÑ ÿ™ÿ±ŸäÿØ ŸÖÿ¥ÿßÿ±ŸÉÿ© ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ© ÿπÿ®ÿ± Ÿàÿßÿ™ÿ≥ÿßÿ®ÿü")&&Pe(l.data),c.value=[],S.value=0,j.value=0,L.value=null,Y()}catch(l){d.error(((a=(s=l.response)==null?void 0:s.data)==null?void 0:a.error)||"ŸÅÿ¥ŸÑ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ©")}},Pe=async o=>{var e,s,a;try{const l=await _.getWhatsAppMessage(o.id),{message:f,phone:p}=l.data;if(!p){d.error("ŸÑÿß ŸäŸàÿ¨ÿØ ÿ±ŸÇŸÖ Ÿáÿßÿ™ŸÅ ŸÑŸÑÿπŸÖŸäŸÑ");return}const b=`https://wa.me/${p.replace(/[^0-9]/g,"")}?text=${encodeURIComponent(f)}`;window.open(b,"_blank"),d.success("ÿ™ŸÖ ŸÅÿ™ÿ≠ Ÿàÿßÿ™ÿ≥ÿßÿ® ÿ®ŸÜÿ¨ÿßÿ≠")}catch(l){console.error("WhatsApp Error:",l),console.error("Error details:",(e=l.response)==null?void 0:e.data),d.error("ŸÅÿ¥ŸÑ ŸÖÿ¥ÿßÿ±ŸÉÿ© ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ© ÿπÿ®ÿ± Ÿàÿßÿ™ÿ≥ÿßÿ®: "+(((a=(s=l.response)==null?void 0:s.data)==null?void 0:a.message)||l.message))}},Y=async()=>{try{const o=await _.getProducts(),e=o.data.data||o.data||[];T.value=e,q.value=e}catch(o){console.error("Failed to load products:",o),T.value=[],q.value=[]}},qe=async()=>{console.log("üì• Fetching customers...");try{const o=await _.getCustomers();x.value=o.data.data||o.data||[],console.log("‚úÖ Customers loaded:",x.value.length)}catch(o){console.error("‚ùå Failed to load customers:",o),x.value=[]}},Me=async()=>{try{const o=await _.getPackages(),e=o.data.data||o.data||[];N.value=e,M.value=e}catch(o){console.error("Failed to load packages:",o),N.value=[],M.value=[]}},Z=o=>{g.value=o,$.value="",o==="packages"&&M.value.length===0&&Me()},ee=o=>g.value==="products"?be(o):$e(o),$e=o=>{const e=x.value.find(a=>a.id===m.value),s=(e==null?void 0:e.segment)||"ŸÇÿ∑ÿßÿπŸä";return parseFloat(s==="ÿ¨ŸÖŸÑÿ©"?o.price_ÿ¨ŸÖŸÑÿ©:s==="ÿµŸÅÿ≠ÿ©"?o.price_ÿµŸÅÿ≠ÿ©:o.price_ŸÇÿ∑ÿßÿπŸä)},Se=()=>{ie.back()},je=()=>{F.value=!0},te=(o,e)=>{m.value=o,Q.value=e,w.value="",d.success(`ÿ™ŸÖ ÿßÿÆÿ™Ÿäÿßÿ±: ${e}`)},Fe=()=>{c.value.length>0&&!confirm("ÿ≥Ÿäÿ™ŸÖ ŸÖÿ≥ÿ≠ ÿßŸÑÿ≥ŸÑÿ© ÿßŸÑÿ≠ÿßŸÑŸäÿ©. ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿßŸÑŸÖÿ™ÿßÿ®ÿπÿ©ÿü")||(c.value=[],m.value=null,Q.value="",w.value="")},Le=()=>{if(m.value===0||m.value===null)return"ŸÇÿ∑ÿßÿπŸä";const o=x.value.find(e=>e.id===m.value);return(o==null?void 0:o.segment)||"ŸÇÿ∑ÿßÿπŸä"};return Ue(()=>{Y(),qe()}),(o,e)=>(n(),u(A,null,[m.value===null?(n(),u("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:R(Se,["self"])},[t("div",Oe,[t("button",{onClick:e[0]||(e[0]=s=>o.$router.back()),class:"absolute top-4 left-4 text-gray-400 hover:text-gray-600 transition-colors",title:"ÿßŸÑŸÇÿßÿ¶ŸÖÿ©"},[...e[16]||(e[16]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])]),e[20]||(e[20]=t("div",{class:"text-center mb-8"},[t("h2",{class:"text-3xl font-bold text-gray-900 mb-2"},"ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ŸÉ ŸÅŸä ŸÜŸÇÿ∑ÿ© ÿßŸÑÿ®Ÿäÿπ"),t("p",{class:"text-gray-600"},"ÿßÿÆÿ™ÿ± ÿßŸÑÿπŸÖŸäŸÑ ŸÑŸÑŸÖÿ™ÿßÿ®ÿπÿ©")],-1)),t("div",Je,[t("div",Re,[k(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>w.value=s),type:"text",placeholder:"ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ÿπŸÖŸäŸÑ ÿ®ÿßŸÑÿßÿ≥ŸÖ ÿ£Ÿà ÿßŸÑŸáÿßÿ™ŸÅ...",class:"input pl-10 text-lg",autofocus:""},null,512),[[P,w.value]]),C(v(ue),{class:"absolute left-3 top-3.5 text-gray-400",size:24}),w.value?(n(),u("div",Ge,[t("button",{onClick:e[2]||(e[2]=s=>w.value=""),class:"text-gray-400 hover:text-gray-600"},[...e[17]||(e[17]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):U("",!0)])]),t("div",He,[t("button",{onClick:e[3]||(e[3]=s=>te(0,"ÿπŸÖŸäŸÑ ÿπÿßÿØŸä")),class:"w-full p-4 bg-gradient-to-r from-gray-100 to-gray-200 hover:from-gray-200 hover:to-gray-300 rounded-xl text-right transition-all border-2 border-transparent hover:border-primary-500"},[...e[18]||(e[18]=[t("div",{class:"flex items-center justify-between"},[t("div",null,[t("p",{class:"font-bold text-lg text-gray-900"},"ÿπŸÖŸäŸÑ ÿπÿßÿØŸä"),t("p",{class:"text-sm text-gray-600"},"ÿ≥ÿπÿ± ŸÇÿ∑ÿßÿπŸä")]),t("div",{class:"bg-primary-100 text-primary-700 px-3 py-1 rounded-full text-sm font-medium"}," ŸÇÿ∑ÿßÿπŸä ")],-1)])]),(n(!0),u(A,null,D(pe.value,s=>(n(),u("button",{key:s.id,onClick:a=>te(s.id,s.name),class:"w-full p-4 bg-white hover:bg-gray-50 rounded-xl text-right transition-all border-2 border-gray-200 hover:border-primary-500"},[t("div",Xe,[t("div",null,[t("p",Ye,i(s.name),1),t("p",Ze,i(s.phone),1)]),t("div",{class:I(["px-3 py-1 rounded-full text-sm font-medium",{"bg-blue-100 text-blue-700":s.segment==="ÿ¨ŸÖŸÑÿ©","bg-green-100 text-green-700":s.segment==="ŸÇÿ∑ÿßÿπŸä","bg-purple-100 text-purple-700":s.segment==="ÿµŸÅÿ≠ÿ©"}])},i(s.segment),3)])],8,Ke))),128))]),t("button",{onClick:je,class:"w-full btn btn-primary flex items-center justify-center gap-2",type:"button"},[C(v(Be),{size:20}),e[19]||(e[19]=ne(" ÿ•ÿ∂ÿßŸÅÿ© ÿπŸÖŸäŸÑ ÿ¨ÿØŸäÿØ ",-1))])])])):(n(),u("div",et,[t("div",tt,[t("div",st,[t("div",ot,[k(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>$.value=s),onInput:ve,type:"text",placeholder:g.value==="products"?"ÿßÿ®ÿ≠ÿ´ ÿ®ÿßŸÑÿßÿ≥ŸÖ ÿ£Ÿà ÿßŸÑÿ®ÿßÿ±ŸÉŸàÿØ ÿ£Ÿà ÿßŸÑŸÅÿ¶ÿ©...":"ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ÿ®ÿßŸÇÿ©...",class:"input pl-10 text-lg",autofocus:""},null,40,at),[[P,$.value]]),C(v(ue),{class:"absolute left-3 top-3.5 text-gray-400",size:24}),E.value?(n(),u("div",lt,[...e[21]||(e[21]=[t("div",{class:"animate-spin rounded-full h-5 w-5 border-b-2 border-primary-600"},null,-1)])])):U("",!0)])]),t("div",rt,[t("div",nt,[t("button",{onClick:e[5]||(e[5]=s=>Z("products")),class:I(["px-6 py-2 rounded-md font-medium transition-all",g.value==="products"?"bg-primary-600 text-white shadow-md":"text-gray-700 hover:bg-gray-100"])}," ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ ",2),t("button",{onClick:e[6]||(e[6]=s=>Z("packages")),class:I(["px-6 py-2 rounded-md font-medium transition-all",g.value==="packages"?"bg-primary-600 text-white shadow-md":"text-gray-700 hover:bg-gray-100"])}," ÿßŸÑÿ®ÿßŸÇÿßÿ™ ",2)])]),t("div",ut,[(n(!0),u(A,null,D(ce.value,s=>(n(),u("div",{key:s.id,onClick:a=>xe(s),class:"card hover:shadow-lg cursor-pointer transition-all hover:scale-105"},[t("div",dt,[s.photos&&JSON.parse(s.photos)[0]?(n(),u("img",{key:0,src:ge(s.photos),alt:s.name_ar,class:"w-full h-full object-cover"},null,8,ct)):(n(),Ae(v(Te),{key:1,size:48,class:"text-gray-400"}))]),t("h4",pt,i(s.name_ar),1),g.value==="products"?(n(),u("p",vt,i(ye(s.volume_ml)),1)):(n(),u("p",mt,i(s.description||"ÿ®ÿßŸÇÿ©"),1)),t("div",ft,[t("span",gt,i(v(B)(ee(s))),1),t("span",{class:I(["text-xs badge",s.quantity>0?"badge-success":"badge-danger"])},i(v(G)(s.quantity))+" ŸÇÿ∑ÿπÿ© ",3)])],8,it))),128))])]),t("div",yt,[t("div",bt,[t("div",xt,[t("div",ht,[t("div",null,[e[22]||(e[22]=t("p",{class:"text-sm text-gray-600"},"ÿßŸÑÿπŸÖŸäŸÑ ÿßŸÑÿ≠ÿßŸÑŸä",-1)),t("p",wt,i(Q.value),1)]),t("button",{onClick:Fe,class:"text-sm text-primary-600 hover:text-primary-800 font-medium"}," ÿ™ÿ∫ŸäŸäÿ± ")]),t("div",kt," ÿßŸÑÿ≥ÿπÿ±: "+i(Le()),1)]),t("h3",_t,[C(v(Ne),{size:24}),e[23]||(e[23]=ne(" ÿ≥ŸÑÿ© ÿßŸÑŸÖÿ¥ÿ™ÿ±Ÿäÿßÿ™ ",-1))]),t("div",Ct,[c.value.length===0?(n(),u("div",Pt," ÿßŸÑÿ≥ŸÑÿ© ŸÅÿßÿ±ÿ∫ÿ© ")):U("",!0),(n(!0),u(A,null,D(c.value,s=>(n(),u("div",{key:s.product.id,class:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg"},[t("div",qt,[t("p",Mt,i(s.product.name_ar),1),t("p",$t,i(v(B)(s.unit_price)),1)]),t("div",St,[t("button",{onClick:a=>we(s),class:"w-7 h-7 rounded bg-gray-200 hover:bg-gray-300"},[C(v(Ee),{size:16,class:"mx-auto"})],8,jt),t("span",Ft,i(v(G)(s.quantity)),1),t("button",{onClick:a=>he(s),class:"w-7 h-7 rounded bg-gray-200 hover:bg-gray-300"},[C(v(De),{size:16,class:"mx-auto"})],8,Lt)]),t("button",{onClick:a=>X(s),class:"text-red-600 hover:text-red-800"},[C(v(We),{size:18})],8,Vt)]))),128))]),t("div",zt,[t("div",Ut,[e[24]||(e[24]=t("span",null,"ÿßŸÑŸÖÿ¨ŸÖŸàÿπ ÿßŸÑŸÅÿ±ÿπŸä:",-1)),t("span",At,i(v(B)(H.value)),1)]),t("div",It,[e[25]||(e[25]=t("span",null,"ÿßŸÑÿÆÿµŸÖ:",-1)),k(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>S.value=s),type:"number",step:"0.01",class:"input w-32 text-left py-1"},null,512),[[P,S.value,void 0,{number:!0}]])]),t("div",Bt,[e[26]||(e[26]=t("span",null,"ÿßŸÑÿ∂ÿ±Ÿäÿ®ÿ©:",-1)),k(t("input",{"onUpdate:modelValue":e[8]||(e[8]=s=>j.value=s),type:"number",step:"0.01",class:"input w-32 text-left py-1"},null,512),[[P,j.value,void 0,{number:!0}]])]),t("div",Tt,[e[27]||(e[27]=t("span",null,"ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä:",-1)),t("span",Nt,i(v(B)(V.value)),1)]),t("div",Qt,[e[28]||(e[28]=t("span",null,"ÿßŸÑŸÖÿ®ŸÑÿ∫ ÿßŸÑŸÖÿØŸÅŸàÿπ:",-1)),k(t("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>L.value=s),type:"number",step:"0.01",placeholder:V.value.toString(),class:"input w-32 text-left py-1"},null,8,Dt),[[P,L.value,void 0,{number:!0}]])]),K.value>0?(n(),u("div",Wt,[e[29]||(e[29]=t("span",null,"ÿßŸÑŸÖÿ™ÿ®ŸÇŸä:",-1)),t("span",null,i(v(B)(K.value)),1)])):U("",!0)]),t("div",Et,[e[30]||(e[30]=t("label",{class:"block text-sm font-medium mb-2"},"ÿ∑ÿ±ŸäŸÇÿ© ÿßŸÑÿØŸÅÿπ",-1)),t("div",Ot,[(n(),u(A,null,D(de,s=>t("button",{key:s.value,onClick:a=>W.value=s.value,class:I([W.value===s.value?"bg-primary-600 text-white":"bg-gray-100","py-2 rounded-lg font-medium transition-all"])},i(s.label),11,Jt)),64))])]),t("div",Rt,[t("button",{onClick:Ce,disabled:c.value.length===0,class:"btn btn-success w-full py-3 text-lg"}," ÿ•ÿ™ŸÖÿßŸÖ ÿßŸÑÿ®Ÿäÿπ ",8,Gt),t("button",{onClick:ke,class:"btn btn-secondary w-full"}," ŸÖÿ≥ÿ≠ ÿßŸÑÿ≥ŸÑÿ© ")])])])])),F.value?(n(),u("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]",onClick:e[15]||(e[15]=R(s=>F.value=!1,["self"]))},[t("div",Ht,[t("button",{onClick:e[10]||(e[10]=s=>F.value=!1),class:"absolute top-4 left-4 text-gray-400 hover:text-gray-600 transition-colors",title:"ÿ•ÿ∫ŸÑÿßŸÇ"},[...e[31]||(e[31]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),e[37]||(e[37]=t("h3",{class:"text-2xl font-bold mb-4"},"ÿ•ÿ∂ÿßŸÅÿ© ÿπŸÖŸäŸÑ ÿ¨ÿØŸäÿØ",-1)),t("form",{onSubmit:R(_e,["prevent"]),class:"space-y-4"},[t("div",null,[e[32]||(e[32]=t("label",{class:"block text-sm font-medium mb-2"},"ÿßŸÑÿßÿ≥ŸÖ *",-1)),k(t("input",{"onUpdate:modelValue":e[11]||(e[11]=s=>y.value.name=s),type:"text",required:"",class:"input",placeholder:"ÿ£ÿ≠ŸÖÿØ ŸÖÿ≠ŸÖÿØ",autofocus:""},null,512),[[P,y.value.name]])]),t("div",null,[e[33]||(e[33]=t("label",{class:"block text-sm font-medium mb-2"},"ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ *",-1)),k(t("input",{"onUpdate:modelValue":e[12]||(e[12]=s=>y.value.phone=s),type:"tel",required:"",class:"input",placeholder:"01012345678",pattern:"[0-9]{11}",title:"ÿßŸÑÿ±ÿ¨ÿßÿ° ÿ•ÿØÿÆÿßŸÑ ÿ±ŸÇŸÖ Ÿáÿßÿ™ŸÅ ÿµÿ≠Ÿäÿ≠ (11 ÿ±ŸÇŸÖ)"},null,512),[[P,y.value.phone]])]),t("div",null,[e[35]||(e[35]=t("label",{class:"block text-sm font-medium mb-2"},"ÿßŸÑÿ¥ÿ±Ÿäÿ≠ÿ©",-1)),k(t("select",{"onUpdate:modelValue":e[13]||(e[13]=s=>y.value.segment=s),class:"input"},[...e[34]||(e[34]=[t("option",{value:"ŸÇÿ∑ÿßÿπŸä"},"ŸÇÿ∑ÿßÿπŸä",-1),t("option",{value:"ÿ¨ŸÖŸÑÿ©"},"ÿ¨ŸÖŸÑÿ©",-1),t("option",{value:"ÿµŸÅÿ≠ÿ©"},"ÿµŸÅÿ≠ÿ©",-1)])],512),[[Ie,y.value.segment]])]),t("div",Kt,[t("button",{type:"button",onClick:e[14]||(e[14]=s=>F.value=!1),class:"btn btn-secondary flex-1"},"ÿ•ŸÑÿ∫ÿßÿ°"),e[36]||(e[36]=t("button",{type:"submit",class:"btn btn-primary flex-1"},"ÿ≠ŸÅÿ∏ Ÿàÿ•ÿ∂ÿßŸÅÿ©",-1))])],32)])])):U("",!0)],64))}};export{ns as default};
