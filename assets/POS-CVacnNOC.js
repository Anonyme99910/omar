import{u as Ue,b as Ie,r as n,i as V,f as Be,c as i,o as l,k as U,w as R,d as t,e as _,l as C,v as q,m as v,F as I,n as D,t as d,x as B,y as ne,q as Ae,A as Qe,z as k}from"./index-D5r1aIhU.js";import{f as A,t as le}from"./numbers-BTmV-EI5.js";import{S as ue}from"./search-C0kDvn8H.js";import{U as Te}from"./user-plus-CNP53Rlp.js";import{P as Ne}from"./package-B6igCpyn.js";import{S as De}from"./shopping-cart-C6-7nlEm.js";import{c as We}from"./createLucideIcon-Cq0_C-wi.js";import{P as Ee}from"./plus-yKYmr41s.js";import{T as Oe}from"./trash-2-CUA_-fVJ.js";/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=We("MinusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}]]),Re={class:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl mx-4 max-h-[90vh] flex flex-col relative"},Ge={class:"p-8 pb-4"},He={class:"relative"},Ke={key:0,class:"absolute right-3 top-3.5"},Xe={class:"flex-1 overflow-y-auto px-8 space-y-3"},Ye=["onClick"],Ze={class:"flex items-center justify-between"},et={class:"font-bold text-lg text-gray-900"},tt={class:"text-sm text-gray-600"},st={class:"p-8 pt-4 border-t bg-white rounded-b-2xl"},ot={key:1,class:"flex h-screen bg-gray-50"},at={class:"flex-1 p-4 overflow-y-auto"},rt={class:"card"},nt={class:"relative"},lt=["placeholder"],ut={key:0,class:"absolute left-12 top-3.5"},it={class:"flex justify-center"},dt={class:"inline-flex rounded-lg border-2 border-primary-600 p-1 bg-white shadow-md"},ct={class:"grid grid-cols-2 md:grid-cols-3 gap-4"},pt=["onClick"],vt={class:"aspect-square bg-gray-100 rounded-lg mb-3 flex items-center justify-center overflow-hidden"},ft=["src","alt"],yt={class:"font-bold text-gray-900 mb-1 truncate"},mt={key:0,class:"text-sm text-gray-500 mb-2"},gt={key:1,class:"text-sm text-gray-500 mb-2 line-clamp-2"},bt={class:"flex items-center justify-between"},xt={class:"text-lg font-bold text-primary-600"},ht={class:"w-96 bg-white border-l border-gray-200 flex flex-col"},wt={class:"flex-1 p-4 overflow-y-auto"},_t={class:"mb-4 p-3 bg-primary-50 rounded-lg border border-primary-200"},kt={class:"flex items-center justify-between mb-2"},Ct={class:"font-bold text-gray-900"},qt={class:"text-xs text-gray-600"},Pt={class:"text-xl font-bold mb-4 flex items-center gap-2"},Mt={class:"space-y-3 mb-4 max-h-64 overflow-y-auto"},$t={key:0,class:"text-center py-8 text-gray-500"},jt={class:"flex-1"},St={class:"font-medium text-sm"},Ft={class:"text-xs text-gray-500"},Lt={class:"flex items-center gap-2"},zt=["onClick"],Vt=["value","onInput","onBlur","max"],Ut=["onClick"],It=["onClick"],Bt={class:"border-t pt-4 space-y-2"},At={class:"flex justify-between text-sm"},Qt={class:"font-bold"},Tt={class:"flex justify-between text-sm"},Nt={class:"flex justify-between text-sm"},Dt={class:"flex justify-between text-lg font-bold border-t pt-2"},Wt={class:"text-primary-600"},Et={class:"flex justify-between text-sm bg-blue-50 p-2 rounded"},Ot=["placeholder"],Jt={key:0,class:"flex justify-between text-sm text-red-600 font-bold"},Rt={class:"mt-4"},Gt={class:"grid grid-cols-2 gap-2"},Ht=["onClick"],Kt={class:"mt-4 space-y-2"},Xt=["disabled"],Yt={class:"bg-white rounded-xl p-6 w-full max-w-md relative"},Zt={class:"flex gap-3 pt-2"},ds={__name:"POS",setup(es){const ie=Ue(),u=Ie(),m=n("products"),P=n([]),Q=n([]),M=n([]),T=n([]),x=n([]),c=n([]),$=n(""),w=n(""),f=n(null),N=n(""),j=n(0),S=n(0),L=n(null),W=n("cash"),F=n(!1);n(!1);const E=n(!1);let O=null;const g=n({name:"",phone:"",segment:"ŸÇÿ∑ÿßÿπŸä"}),de=[{value:"cash",label:"ŸÜŸÇÿØŸä"},{value:"transfer",label:"ÿ™ÿ≠ŸàŸäŸÑ"}],ce=V(()=>{const o=m.value==="products"?P.value:M.value;return $.value?o:o.slice(0,12)}),pe=V(()=>{if(!w.value)return x.value;const o=w.value.toLowerCase().trim(),e=a=>a.replace(/[ÿ£ÿ•ÿ¢]/g,"ÿß").replace(/[Ÿâ]/g,"Ÿä").replace(/[ÿ©]/g,"Ÿá").replace(/[\u064B-\u065F]/g,""),s=e(o);return x.value.map(a=>{const r=e(a.name.toLowerCase()),y=a.phone.toString();let p=0;if(r===s||y===o)p=1e3;else if(r.startsWith(s)||y.startsWith(o))p=500;else if(r.includes(s)||y.includes(o))p=100;else{let h=0;for(let b=0;b<r.length&&h<s.length;b++)r[b]===s[h]&&(h++,p+=1);h!==s.length&&(p=0)}return{customer:a,score:p}}).filter(a=>a.score>0).sort((a,r)=>r.score-a.score).slice(0,10).map(a=>a.customer)}),G=V(()=>c.value.reduce((o,e)=>o+e.unit_price*e.quantity,0)),z=V(()=>G.value+S.value-j.value),H=V(()=>{const o=L.value||z.value;return Math.max(0,z.value-o)}),ve=()=>{O&&clearTimeout(O),E.value=!0,O=setTimeout(async()=>{m.value==="products"?await fe():await ye(),E.value=!1},300)},fe=async()=>{const o=$.value.trim();if(!o){P.value=Q.value.slice(0,12);return}const e=o.toLowerCase(),s=Q.value.filter(a=>{var te,se,oe,ae,re;const r=a.name_ar.toLowerCase(),y=((te=a.barcode)==null?void 0:te.toLowerCase())||"",p=((oe=(se=a.category)==null?void 0:se.name_ar)==null?void 0:oe.toLowerCase())||"",h=((re=(ae=a.brand)==null?void 0:ae.name_ar)==null?void 0:re.toLowerCase())||"";if(r.includes(e)||y.includes(e)||p.includes(e)||h.includes(e))return!0;let b=0;for(let J=0;J<r.length&&b<e.length;J++)r[J]===e[b]&&b++;return b===e.length});if(P.value=s,s.length===0&&o.length>=2)try{const a=await k.getProducts({search:o});P.value=a.data.data||a.data||[]}catch(a){console.error("Search error:",a)}},ye=async()=>{const o=$.value.trim();if(!o){M.value=T.value.slice(0,12);return}const e=o.toLowerCase(),s=T.value.filter(a=>{var p;const r=a.name_ar.toLowerCase(),y=((p=a.description)==null?void 0:p.toLowerCase())||"";return r.includes(e)||y.includes(e)});M.value=s},me=o=>{if(!o)return"";const s=JSON.parse(o)[0];return s.startsWith("data:")?s:`http://localhost/parfumes/backend/public${s}`},ge=o=>{if(!o&&o!==0)return"";const e=String(o).trim();return/\bml\b/i.test(e)||e.includes("ŸÖŸÑ")?e:`${e} ŸÖŸÑ`},be=o=>{const e=x.value.find(a=>a.id===f.value),s=(e==null?void 0:e.segment)||"ŸÇÿ∑ÿßÿπŸä";return parseFloat(s==="ÿ¨ŸÖŸÑÿ©"?o.price_ÿ¨ŸÖŸÑÿ©:s==="ÿµŸÅÿ≠ÿ©"?o.price_ÿµŸÅÿ≠ÿ©:o.price_ŸÇÿ∑ÿßÿπŸä)},xe=o=>{if(o.quantity===0){u.error(m.value==="products"?"ÿßŸÑŸÖŸÜÿ™ÿ¨ ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ± ŸÅŸä ÿßŸÑŸÖÿÆÿ≤ŸàŸÜ":"ÿßŸÑÿ®ÿßŸÇÿ© ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ±ÿ© ŸÅŸä ÿßŸÑŸÖÿÆÿ≤ŸàŸÜ");return}const e=c.value.find(s=>s.product.id===o.id);if(e){if(e.quantity>=o.quantity){u.error("ÿßŸÑŸÉŸÖŸäÿ© ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ© ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ±ÿ©");return}e.quantity++}else c.value.push({product:o,quantity:1,unit_price:Z(o)});u.success(m.value==="products"?"ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨ ŸÑŸÑÿ≥ŸÑÿ©":"ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿ®ÿßŸÇÿ© ŸÑŸÑÿ≥ŸÑÿ©")},he=o=>{if(o.quantity>=o.product.quantity){u.error("ÿßŸÑŸÉŸÖŸäÿ© ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ© ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ±ÿ©");return}o.quantity++},we=o=>{o.quantity>1?o.quantity--:K(o)},_e=(o,e)=>{const s=parseInt(e)||1;if(s<1){o.quantity=1;return}if(s>o.product.quantity){u.error("ÿßŸÑŸÉŸÖŸäÿ© ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ© ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ±ÿ©"),o.quantity=o.product.quantity;return}o.quantity=s},ke=o=>{o.quantity<1?o.quantity=1:o.quantity>o.product.quantity&&(o.quantity=o.product.quantity,u.error("ÿßŸÑŸÉŸÖŸäÿ© ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ© ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ±ÿ©"))},K=o=>{c.value=c.value.filter(e=>e.product.id!==o.product.id)},Ce=()=>{c.value.length!==0&&confirm("ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ŸÖÿ≥ÿ≠ ÿßŸÑÿ≥ŸÑÿ©ÿü")&&(c.value=[],j.value=0,S.value=0)},qe=async()=>{var o,e;if(!g.value.name||!g.value.phone){u.error("ÿßŸÑÿ±ÿ¨ÿßÿ° ÿ•ÿØÿÆÿßŸÑ ÿßŸÑÿßÿ≥ŸÖ Ÿàÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ");return}try{const s=await k.createCustomer(g.value),a=s.data.data||s.data;u.success("ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿπŸÖŸäŸÑ ÿ®ŸÜÿ¨ÿßÿ≠"),x.value.unshift(a),f.value=a.id,N.value=a.name,F.value=!1,g.value={name:"",phone:"",segment:"ŸÇÿ∑ÿßÿπŸä"},u.info(`ÿ™ŸÖ ÿßÿÆÿ™Ÿäÿßÿ±: ${a.name}`)}catch(s){console.error("Error adding customer:",s),u.error(((e=(o=s.response)==null?void 0:o.data)==null?void 0:e.message)||"ŸÅÿ¥ŸÑ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿπŸÖŸäŸÑ")}},Pe=async()=>{var e,s,a;if(c.value.length===0)return;const o={customer_id:f.value===0?null:f.value,items:c.value.map(r=>({product_id:r.product.id,quantity:r.quantity,unit_price:r.unit_price})),tax:S.value,discount:j.value,paid_amount:L.value||z.value,payment_method:W.value};try{const r=await k.createSale(o),y=le(r.data.invoice_number);u.success(`ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ© ${y}`);const p=[];if(confirm("ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ© PDFÿü"))try{await k.downloadInvoicePdf(r.data.id),u.success("ÿ™ŸÖ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ© ÿ®ŸÜÿ¨ÿßÿ≠")}catch(h){console.error("PDF Error:",h),u.error("ŸÅÿ¥ŸÑ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ© PDF")}(e=r.data.customer)!=null&&e.phone&&confirm("ŸáŸÑ ÿ™ÿ±ŸäÿØ ŸÖÿ¥ÿßÿ±ŸÉÿ© ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ© ÿπÿ®ÿ± Ÿàÿßÿ™ÿ≥ÿßÿ®ÿü")&&Me(r.data),c.value=[],j.value=0,S.value=0,L.value=null,X()}catch(r){u.error(((a=(s=r.response)==null?void 0:s.data)==null?void 0:a.error)||"ŸÅÿ¥ŸÑ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ©")}},Me=async o=>{var e,s,a;try{const r=await k.getWhatsAppMessage(o.id),{message:y,phone:p}=r.data;if(!p){u.error("ŸÑÿß ŸäŸàÿ¨ÿØ ÿ±ŸÇŸÖ Ÿáÿßÿ™ŸÅ ŸÑŸÑÿπŸÖŸäŸÑ");return}const b=`https://wa.me/${p.replace(/[^0-9]/g,"")}?text=${encodeURIComponent(y)}`;window.open(b,"_blank"),u.success("ÿ™ŸÖ ŸÅÿ™ÿ≠ Ÿàÿßÿ™ÿ≥ÿßÿ® ÿ®ŸÜÿ¨ÿßÿ≠")}catch(r){console.error("WhatsApp Error:",r),console.error("Error details:",(e=r.response)==null?void 0:e.data),u.error("ŸÅÿ¥ŸÑ ŸÖÿ¥ÿßÿ±ŸÉÿ© ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ© ÿπÿ®ÿ± Ÿàÿßÿ™ÿ≥ÿßÿ®: "+(((a=(s=r.response)==null?void 0:s.data)==null?void 0:a.message)||r.message))}},X=async()=>{try{const o=await k.getProducts(),e=o.data.data||o.data||[];Q.value=e,P.value=e}catch(o){console.error("Failed to load products:",o),Q.value=[],P.value=[]}},$e=async()=>{console.log("üì• Fetching customers...");try{const o=await k.getCustomers();x.value=o.data.data||o.data||[],console.log("‚úÖ Customers loaded:",x.value.length)}catch(o){console.error("‚ùå Failed to load customers:",o),x.value=[]}},je=async()=>{try{const o=await k.getPackages(),e=o.data.data||o.data||[];T.value=e,M.value=e}catch(o){console.error("Failed to load packages:",o),T.value=[],M.value=[]}},Y=o=>{m.value=o,$.value="",o==="packages"&&M.value.length===0&&je()},Z=o=>m.value==="products"?be(o):Se(o),Se=o=>{const e=x.value.find(a=>a.id===f.value),s=(e==null?void 0:e.segment)||"ŸÇÿ∑ÿßÿπŸä";return parseFloat(s==="ÿ¨ŸÖŸÑÿ©"?o.price_ÿ¨ŸÖŸÑÿ©:s==="ÿµŸÅÿ≠ÿ©"?o.price_ÿµŸÅÿ≠ÿ©:o.price_ŸÇÿ∑ÿßÿπŸä)},Fe=()=>{ie.back()},Le=()=>{F.value=!0},ee=(o,e)=>{f.value=o,N.value=e,w.value="",u.success(`ÿ™ŸÖ ÿßÿÆÿ™Ÿäÿßÿ±: ${e}`)},ze=()=>{c.value.length>0&&!confirm("ÿ≥Ÿäÿ™ŸÖ ŸÖÿ≥ÿ≠ ÿßŸÑÿ≥ŸÑÿ© ÿßŸÑÿ≠ÿßŸÑŸäÿ©. ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿßŸÑŸÖÿ™ÿßÿ®ÿπÿ©ÿü")||(c.value=[],f.value=null,N.value="",w.value="")},Ve=()=>{if(f.value===0||f.value===null)return"ŸÇÿ∑ÿßÿπŸä";const o=x.value.find(e=>e.id===f.value);return(o==null?void 0:o.segment)||"ŸÇÿ∑ÿßÿπŸä"};return Be(()=>{X(),$e()}),(o,e)=>(l(),i(I,null,[f.value===null?(l(),i("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:R(Fe,["self"])},[t("div",Re,[t("button",{onClick:e[0]||(e[0]=s=>o.$router.back()),class:"absolute top-4 left-4 text-gray-400 hover:text-gray-600 transition-colors z-10",title:"ÿßŸÑŸÇÿßÿ¶ŸÖÿ©"},[...e[16]||(e[16]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])]),t("div",Ge,[e[18]||(e[18]=t("div",{class:"text-center mb-6"},[t("h2",{class:"text-3xl font-bold text-gray-900 mb-2"},"ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ŸÉ ŸÅŸä ŸÜŸÇÿ∑ÿ© ÿßŸÑÿ®Ÿäÿπ"),t("p",{class:"text-gray-600"},"ÿßÿÆÿ™ÿ± ÿßŸÑÿπŸÖŸäŸÑ ŸÑŸÑŸÖÿ™ÿßÿ®ÿπÿ©")],-1)),t("div",He,[_(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>w.value=s),type:"text",placeholder:"ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ÿπŸÖŸäŸÑ ÿ®ÿßŸÑÿßÿ≥ŸÖ ÿ£Ÿà ÿßŸÑŸáÿßÿ™ŸÅ...",class:"input pl-10 text-lg",autofocus:""},null,512),[[q,w.value]]),C(v(ue),{class:"absolute left-3 top-3.5 text-gray-400",size:24}),w.value?(l(),i("div",Ke,[t("button",{onClick:e[2]||(e[2]=s=>w.value=""),class:"text-gray-400 hover:text-gray-600"},[...e[17]||(e[17]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):U("",!0)])]),t("div",Xe,[t("button",{onClick:e[3]||(e[3]=s=>ee(0,"ÿπŸÖŸäŸÑ ÿπÿßÿØŸä")),class:"w-full p-4 bg-gradient-to-r from-gray-100 to-gray-200 hover:from-gray-200 hover:to-gray-300 rounded-xl text-right transition-all border-2 border-transparent hover:border-primary-500"},[...e[19]||(e[19]=[t("div",{class:"flex items-center justify-between"},[t("div",null,[t("p",{class:"font-bold text-lg text-gray-900"},"ÿπŸÖŸäŸÑ ÿπÿßÿØŸä"),t("p",{class:"text-sm text-gray-600"},"ÿ≥ÿπÿ± ŸÇÿ∑ÿßÿπŸä")]),t("div",{class:"bg-primary-100 text-primary-700 px-3 py-1 rounded-full text-sm font-medium"}," ŸÇÿ∑ÿßÿπŸä ")],-1)])]),(l(!0),i(I,null,D(pe.value,s=>(l(),i("button",{key:s.id,onClick:a=>ee(s.id,s.name),class:"w-full p-4 bg-white hover:bg-gray-50 rounded-xl text-right transition-all border-2 border-gray-200 hover:border-primary-500"},[t("div",Ze,[t("div",null,[t("p",et,d(s.name),1),t("p",tt,d(s.phone),1)]),t("div",{class:B(["px-3 py-1 rounded-full text-sm font-medium",{"bg-blue-100 text-blue-700":s.segment==="ÿ¨ŸÖŸÑÿ©","bg-green-100 text-green-700":s.segment==="ŸÇÿ∑ÿßÿπŸä","bg-purple-100 text-purple-700":s.segment==="ÿµŸÅÿ≠ÿ©"}])},d(s.segment),3)])],8,Ye))),128))]),t("div",st,[t("button",{onClick:Le,class:"w-full btn btn-primary flex items-center justify-center gap-2",type:"button"},[C(v(Te),{size:20}),e[20]||(e[20]=ne(" ÿ•ÿ∂ÿßŸÅÿ© ÿπŸÖŸäŸÑ ÿ¨ÿØŸäÿØ ",-1))])])])])):(l(),i("div",ot,[t("div",at,[t("div",rt,[t("div",nt,[_(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>$.value=s),onInput:ve,type:"text",placeholder:m.value==="products"?"ÿßÿ®ÿ≠ÿ´ ÿ®ÿßŸÑÿßÿ≥ŸÖ ÿ£Ÿà ÿßŸÑÿ®ÿßÿ±ŸÉŸàÿØ ÿ£Ÿà ÿßŸÑŸÅÿ¶ÿ©...":"ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ÿ®ÿßŸÇÿ©...",class:"input pl-10 text-lg",autofocus:""},null,40,lt),[[q,$.value]]),C(v(ue),{class:"absolute left-3 top-3.5 text-gray-400",size:24}),E.value?(l(),i("div",ut,[...e[21]||(e[21]=[t("div",{class:"animate-spin rounded-full h-5 w-5 border-b-2 border-primary-600"},null,-1)])])):U("",!0)])]),t("div",it,[t("div",dt,[t("button",{onClick:e[5]||(e[5]=s=>Y("products")),class:B(["px-6 py-2 rounded-md font-medium transition-all",m.value==="products"?"bg-primary-600 text-white shadow-md":"text-gray-700 hover:bg-gray-100"])}," ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ ",2),t("button",{onClick:e[6]||(e[6]=s=>Y("packages")),class:B(["px-6 py-2 rounded-md font-medium transition-all",m.value==="packages"?"bg-primary-600 text-white shadow-md":"text-gray-700 hover:bg-gray-100"])}," ÿßŸÑÿ®ÿßŸÇÿßÿ™ ",2)])]),t("div",ct,[(l(!0),i(I,null,D(ce.value,s=>(l(),i("div",{key:s.id,onClick:a=>xe(s),class:"card hover:shadow-lg cursor-pointer transition-all hover:scale-105"},[t("div",vt,[s.photos&&JSON.parse(s.photos)[0]?(l(),i("img",{key:0,src:me(s.photos),alt:s.name_ar,class:"w-full h-full object-cover"},null,8,ft)):(l(),Ae(v(Ne),{key:1,size:48,class:"text-gray-400"}))]),t("h4",yt,d(s.name_ar),1),m.value==="products"?(l(),i("p",mt,d(ge(s.volume_ml)),1)):(l(),i("p",gt,d(s.description||"ÿ®ÿßŸÇÿ©"),1)),t("div",bt,[t("span",xt,d(v(A)(Z(s))),1),t("span",{class:B(["text-xs badge",s.quantity>0?"badge-success":"badge-danger"])},d(v(le)(s.quantity))+" ŸÇÿ∑ÿπÿ© ",3)])],8,pt))),128))])]),t("div",ht,[t("div",wt,[t("div",_t,[t("div",kt,[t("div",null,[e[22]||(e[22]=t("p",{class:"text-sm text-gray-600"},"ÿßŸÑÿπŸÖŸäŸÑ ÿßŸÑÿ≠ÿßŸÑŸä",-1)),t("p",Ct,d(N.value),1)]),t("button",{onClick:ze,class:"text-sm text-primary-600 hover:text-primary-800 font-medium"}," ÿ™ÿ∫ŸäŸäÿ± ")]),t("div",qt," ÿßŸÑÿ≥ÿπÿ±: "+d(Ve()),1)]),t("h3",Pt,[C(v(De),{size:24}),e[23]||(e[23]=ne(" ÿ≥ŸÑÿ© ÿßŸÑŸÖÿ¥ÿ™ÿ±Ÿäÿßÿ™ ",-1))]),t("div",Mt,[c.value.length===0?(l(),i("div",$t," ÿßŸÑÿ≥ŸÑÿ© ŸÅÿßÿ±ÿ∫ÿ© ")):U("",!0),(l(!0),i(I,null,D(c.value,s=>(l(),i("div",{key:s.product.id,class:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg"},[t("div",jt,[t("p",St,d(s.product.name_ar),1),t("p",Ft,d(v(A)(s.unit_price)),1)]),t("div",Lt,[t("button",{onClick:a=>we(s),class:"w-7 h-7 rounded bg-gray-200 hover:bg-gray-300 flex items-center justify-center"},[C(v(Je),{size:16})],8,zt),t("input",{value:s.quantity,onInput:a=>_e(s,a.target.value),onBlur:a=>ke(s),type:"number",min:"1",max:s.product.quantity,class:"w-12 text-center font-bold border rounded py-1 text-sm"},null,40,Vt),t("button",{onClick:a=>he(s),class:"w-7 h-7 rounded bg-gray-200 hover:bg-gray-300 flex items-center justify-center"},[C(v(Ee),{size:16})],8,Ut)]),t("button",{onClick:a=>K(s),class:"text-red-600 hover:text-red-800"},[C(v(Oe),{size:18})],8,It)]))),128))]),t("div",Bt,[t("div",At,[e[24]||(e[24]=t("span",null,"ÿßŸÑŸÖÿ¨ŸÖŸàÿπ ÿßŸÑŸÅÿ±ÿπŸä:",-1)),t("span",Qt,d(v(A)(G.value)),1)]),t("div",Tt,[e[25]||(e[25]=t("span",null,"ÿßŸÑÿÆÿµŸÖ:",-1)),_(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>j.value=s),type:"number",step:"0.01",class:"input w-32 text-left py-1"},null,512),[[q,j.value,void 0,{number:!0}]])]),t("div",Nt,[e[26]||(e[26]=t("span",null,"ÿßŸÑÿ∂ÿ±Ÿäÿ®ÿ©:",-1)),_(t("input",{"onUpdate:modelValue":e[8]||(e[8]=s=>S.value=s),type:"number",step:"0.01",class:"input w-32 text-left py-1"},null,512),[[q,S.value,void 0,{number:!0}]])]),t("div",Dt,[e[27]||(e[27]=t("span",null,"ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä:",-1)),t("span",Wt,d(v(A)(z.value)),1)]),t("div",Et,[e[28]||(e[28]=t("span",null,"ÿßŸÑŸÖÿ®ŸÑÿ∫ ÿßŸÑŸÖÿØŸÅŸàÿπ:",-1)),_(t("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>L.value=s),type:"number",step:"0.01",placeholder:z.value.toString(),class:"input w-32 text-left py-1"},null,8,Ot),[[q,L.value,void 0,{number:!0}]])]),H.value>0?(l(),i("div",Jt,[e[29]||(e[29]=t("span",null,"ÿßŸÑŸÖÿ™ÿ®ŸÇŸä:",-1)),t("span",null,d(v(A)(H.value)),1)])):U("",!0)]),t("div",Rt,[e[30]||(e[30]=t("label",{class:"block text-sm font-medium mb-2"},"ÿ∑ÿ±ŸäŸÇÿ© ÿßŸÑÿØŸÅÿπ",-1)),t("div",Gt,[(l(),i(I,null,D(de,s=>t("button",{key:s.value,onClick:a=>W.value=s.value,class:B([W.value===s.value?"bg-primary-600 text-white":"bg-gray-100","py-2 rounded-lg font-medium transition-all"])},d(s.label),11,Ht)),64))])]),t("div",Kt,[t("button",{onClick:Pe,disabled:c.value.length===0,class:"btn btn-success w-full py-3 text-lg"}," ÿ•ÿ™ŸÖÿßŸÖ ÿßŸÑÿ®Ÿäÿπ ",8,Xt),t("button",{onClick:Ce,class:"btn btn-secondary w-full"}," ŸÖÿ≥ÿ≠ ÿßŸÑÿ≥ŸÑÿ© ")])])])])),F.value?(l(),i("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]",onClick:e[15]||(e[15]=R(s=>F.value=!1,["self"]))},[t("div",Yt,[t("button",{onClick:e[10]||(e[10]=s=>F.value=!1),class:"absolute top-4 left-4 text-gray-400 hover:text-gray-600 transition-colors",title:"ÿ•ÿ∫ŸÑÿßŸÇ"},[...e[31]||(e[31]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),e[37]||(e[37]=t("h3",{class:"text-2xl font-bold mb-4"},"ÿ•ÿ∂ÿßŸÅÿ© ÿπŸÖŸäŸÑ ÿ¨ÿØŸäÿØ",-1)),t("form",{onSubmit:R(qe,["prevent"]),class:"space-y-4"},[t("div",null,[e[32]||(e[32]=t("label",{class:"block text-sm font-medium mb-2"},"ÿßŸÑÿßÿ≥ŸÖ *",-1)),_(t("input",{"onUpdate:modelValue":e[11]||(e[11]=s=>g.value.name=s),type:"text",required:"",class:"input",placeholder:"ÿ£ÿ≠ŸÖÿØ ŸÖÿ≠ŸÖÿØ",autofocus:""},null,512),[[q,g.value.name]])]),t("div",null,[e[33]||(e[33]=t("label",{class:"block text-sm font-medium mb-2"},"ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ *",-1)),_(t("input",{"onUpdate:modelValue":e[12]||(e[12]=s=>g.value.phone=s),type:"tel",required:"",class:"input",placeholder:"01012345678",pattern:"[0-9]{11}",title:"ÿßŸÑÿ±ÿ¨ÿßÿ° ÿ•ÿØÿÆÿßŸÑ ÿ±ŸÇŸÖ Ÿáÿßÿ™ŸÅ ÿµÿ≠Ÿäÿ≠ (11 ÿ±ŸÇŸÖ)"},null,512),[[q,g.value.phone]])]),t("div",null,[e[35]||(e[35]=t("label",{class:"block text-sm font-medium mb-2"},"ÿßŸÑÿ¥ÿ±Ÿäÿ≠ÿ©",-1)),_(t("select",{"onUpdate:modelValue":e[13]||(e[13]=s=>g.value.segment=s),class:"input"},[...e[34]||(e[34]=[t("option",{value:"ŸÇÿ∑ÿßÿπŸä"},"ŸÇÿ∑ÿßÿπŸä",-1),t("option",{value:"ÿ¨ŸÖŸÑÿ©"},"ÿ¨ŸÖŸÑÿ©",-1),t("option",{value:"ÿµŸÅÿ≠ÿ©"},"ÿµŸÅÿ≠ÿ©",-1)])],512),[[Qe,g.value.segment]])]),t("div",Zt,[t("button",{type:"button",onClick:e[14]||(e[14]=s=>F.value=!1),class:"btn btn-secondary flex-1"},"ÿ•ŸÑÿ∫ÿßÿ°"),e[36]||(e[36]=t("button",{type:"submit",class:"btn btn-primary flex-1"},"ÿ≠ŸÅÿ∏ Ÿàÿ•ÿ∂ÿßŸÅÿ©",-1))])],32)])])):U("",!0)],64))}};export{ds as default};
