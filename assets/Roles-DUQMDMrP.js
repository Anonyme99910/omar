import{b as D,r as y,f as N,c as r,o as a,d as e,k as M,F as f,n as b,l as h,m as _,t as c,w as R,e as T,B as q,q as I,x as L,s as A,z}from"./index-BQJt9ZCw.js";import{c as V}from"./createLucideIcon-BpxootJc.js";import{U as W}from"./user-CxpfMvM6.js";import{X as H}from"./x-DfA2fsyr.js";import{T as P}from"./trending-up-CFj5x92h.js";import{U as S}from"./users-DxHcVv9h.js";import{F as J}from"./file-text-DzARG7Sv.js";import{S as O}from"./shopping-cart-CCNhAq9f.js";import{R as X}from"./receipt-B2AzD8VQ.js";import{D as Z}from"./dollar-sign-B_ASuo08.js";import{P as $}from"./package-TWNWj1Sb.js";/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=V("SettingsIcon",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=V("WarehouseIcon",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]]),Q={class:"space-y-6"},Y={class:"grid gap-6 sm:grid-cols-2 lg:grid-cols-4"},ee=["onClick"],se={class:"flex flex-col items-center text-center pt-2"},te={class:"w-16 h-16 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center mb-3"},oe={class:"text-xl font-bold text-gray-900 mb-1"},le={class:"text-sm text-gray-500 mb-3"},ae={class:"w-full space-y-2"},re={class:"flex flex-wrap gap-1 justify-center"},ne={key:0,class:"text-xs text-gray-400"},ie={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},ce={class:"p-6"},de={class:"flex items-center justify-between mb-6"},ue={class:"text-2xl font-bold text-gray-900"},pe={class:"text-sm text-gray-500 mt-1"},me={class:"space-y-4"},xe={class:"flex items-start cursor-pointer"},ye=["value"],ge={class:"mr-3 flex-1"},ve={class:"flex items-center gap-2"},fe={class:"font-medium text-gray-900"},be={class:"text-sm text-gray-500 mt-1"},Fe={__name:"Roles",setup(he){const g=D(),m=y([]),v=y(!1),d=y(null),n=y([]),k=[{key:"dashboard",label:"لوحة التحكم",description:"عرض لوحة التحكم والإحصائيات",icon:P,color:"text-blue-600"},{key:"clients",label:"العملاء",description:"إدارة بيانات العملاء",icon:S,color:"text-indigo-600"},{key:"employees",label:"الموظفون",description:"إدارة الموظفين",icon:S,color:"text-purple-600"},{key:"roles",label:"الأدوار والصلاحيات",description:"إدارة أدوار المستخدمين",icon:J,color:"text-orange-600"},{key:"pos",label:"نقطة البيع",description:"إنشاء فواتير البيع والمبيعات",icon:O,color:"text-green-600"},{key:"invoices",label:"الفواتير",description:"عرض وإدارة الفواتير",icon:X,color:"text-purple-600"},{key:"sales-analysis",label:"تحليل المبيعات",description:"عرض تحليلات المبيعات",icon:P,color:"text-blue-600"},{key:"expenses",label:"المصروفات",description:"إدارة المصروفات والنفقات",icon:Z,color:"text-red-600"},{key:"stock",label:"المخزون",description:"إدارة المخزون",icon:$,color:"text-teal-600"},{key:"inventory",label:"المنتجات التالفة",description:"إدارة المنتجات التالفة",icon:K,color:"text-gray-600"}],w=s=>({admin:"مدير",manager:"مدير فرع",cashier:"كاشير",inventory:"مخزن"})[s]||s,E=s=>{const o=k.find(i=>i.key===s);return o?o.label:s},C=s=>s.permissions||[],j=s=>{d.value=s,n.value=[...s.permissions||[]],v.value=!0},x=()=>{v.value=!1,d.value=null,n.value=[]},F=async()=>{var s,o,i,p,t;try{console.log("Saving permissions:",n.value);const l=await z.updateEmployeePermissions(d.value.id,{permissions:n.value});console.log("Save response:",l);const u=m.value.find(B=>B.id===d.value.id);u&&(u.permissions=[...n.value]),g.success("تم تحديث الصلاحيات بنجاح"),x()}catch(l){console.error("Failed to update permissions:",l),console.error("Error response:",(s=l.response)==null?void 0:s.data);const u=((i=(o=l.response)==null?void 0:o.data)==null?void 0:i.message)||((t=(p=l.response)==null?void 0:p.data)==null?void 0:t.errors)||"فشل تحديث الصلاحيات";g.error(typeof u=="string"?u:JSON.stringify(u))}},U=async()=>{try{const s=await z.getEmployees();m.value=s.data||[]}catch(s){console.error("Failed to load employees:",s),g.error("فشل تحميل الموظفين"),m.value=[]}};return N(()=>{U()}),(s,o)=>{var i,p;return a(),r("div",Q,[o[2]||(o[2]=e("div",{class:"flex items-center justify-between"},[e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-900"},"الأدوار والصلاحيات"),e("p",{class:"text-gray-500 mt-1"},"إدارة أدوار المستخدمين وصلاحياتهم")])],-1)),e("div",Y,[(a(!0),r(f,null,b(m.value,t=>(a(),r("div",{key:t.id,class:"card hover:shadow-lg transition-shadow relative"},[e("button",{onClick:l=>j(t),class:"absolute top-4 left-4 w-10 h-10 rounded-full bg-blue-100 hover:bg-blue-200 flex items-center justify-center transition-colors",title:"إدارة الصلاحيات"},[h(_(G),{size:20,class:"text-blue-600"})],8,ee),e("div",se,[e("div",te,[h(_(W),{size:32,class:"text-white"})]),e("h3",oe,c(t.name),1),e("p",le,c(w(t.role)),1),e("div",ae,[o[1]||(o[1]=e("p",{class:"text-xs font-medium text-gray-700"},"الصلاحيات:",-1)),e("div",re,[(a(!0),r(f,null,b(C(t),l=>(a(),r("span",{key:l,class:"px-2 py-1 bg-blue-100 text-blue-700 rounded-full text-xs"},c(E(l)),1))),128)),C(t).length===0?(a(),r("span",ne," لا توجد صلاحيات ")):M("",!0)])])])]))),128))]),v.value?(a(),r("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:R(x,["self"])},[e("div",ie,[e("div",ce,[e("div",de,[e("div",null,[e("h3",ue,"إدارة صلاحيات "+c((i=d.value)==null?void 0:i.name),1),e("p",pe,c(w((p=d.value)==null?void 0:p.role)),1)]),e("button",{onClick:x,class:"text-gray-400 hover:text-gray-600"},[h(_(H),{size:24})])]),e("div",me,[(a(),r(f,null,b(k,t=>e("div",{key:t.key,class:"border rounded-lg p-4 hover:bg-gray-50"},[e("label",xe,[T(e("input",{type:"checkbox","onUpdate:modelValue":o[0]||(o[0]=l=>n.value=l),value:t.key,class:"mt-1 w-5 h-5 text-blue-600 rounded focus:ring-blue-500"},null,8,ye),[[q,n.value]]),e("div",ge,[e("div",ve,[(a(),I(A(t.icon),{size:20,class:L(t.color)},null,8,["class"])),e("span",fe,c(t.label),1)]),e("p",be,c(t.description),1)])])])),64))]),e("div",{class:"flex gap-3 mt-6 pt-6 border-t"},[e("button",{onClick:F,class:"flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors"}," حفظ الصلاحيات "),e("button",{onClick:x,class:"px-4 py-3 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg font-medium transition-colors"}," إلغاء ")])])])])):M("",!0)])}}};export{Fe as default};
