import{_ as S,b as E,r as i,h as T,c,o as m,d as e,j as P,k as q,x as L,l as w,e as a,v as r,A as N,F as j,m as z,t as n,w as V,y as b}from"./index-DaDqu3Du.js";import{P as B}from"./plus-BAH27pEy.js";import{P as I}from"./pen-square-D-AWJlAh.js";import{T as $}from"./trash-2-Su1nV_VB.js";import"./createLucideIcon-Q_oOX2Bc.js";const A={class:"stock-container"},D={class:"header"},K={class:"header-actions"},O={class:"filters"},Q={class:"checkbox-label"},G={class:"table-container"},H={class:"font-medium"},J={class:"text-center"},R={class:"text-green-600 font-semibold"},W={class:"text-blue-600 font-semibold"},X={class:"text-yellow-600 font-semibold"},Y={class:"text-center"},Z={class:"actions"},ee=["onClick"],te=["onClick"],le={key:0,class:"empty-state"},se={class:"modal-header"},oe={class:"modal-body"},ae={class:"form-row"},re={class:"form-group"},ne={class:"form-group"},ie={class:"form-row"},ue={class:"form-group"},de={class:"form-group"},pe={class:"form-group"},ce={class:"form-row"},me={class:"form-group"},ve={class:"form-group"},_e={class:"modal-footer"},be={type:"submit",class:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition-colors"},ye={__name:"StockList",setup(fe){const u=E(),y=i([]),f=i(""),g=i(!1),v=i(!1),d=i(!1),x=i(null),o=i({name_ar:"",price_جملة:0,price_قطاعي:0,price_صفحة:0,volume_ml:"",quantity:0,alert_quantity:10}),p=async()=>{try{const s={search:f.value,low_stock:g.value?1:0},t=await b.getProducts(s);y.value=t.data.data||t.data}catch(s){console.error("Error fetching products:",s),u.error("فشل تحميل المنتجات")}},C=()=>{d.value=!1,o.value={name_ar:"",price_جملة:0,price_قطاعي:0,price_صفحة:0,volume_ml:"",quantity:0,alert_quantity:10},v.value=!0},U=s=>{d.value=!0,x.value=s.id,o.value={name_ar:s.name_ar,price_جملة:parseFloat(s.price_جملة),price_قطاعي:parseFloat(s.price_قطاعي),price_صفحة:parseFloat(s.price_صفحة),volume_ml:s.volume_ml||"",quantity:s.quantity,alert_quantity:s.alert_quantity},v.value=!0},M=async()=>{var s,t;try{d.value?(await b.updateProduct(x.value,o.value),u.success("تم تحديث المنتج بنجاح")):(await b.createProduct(o.value),u.success("تم إضافة المنتج بنجاح")),_(),p()}catch(l){console.error("Error saving product:",l);const k=(t=(s=l.response)==null?void 0:s.data)!=null&&t.errors?Object.values(l.response.data.errors).flat().join(", "):"حدث خطأ أثناء حفظ المنتج";u.error(k)}},F=async s=>{if(confirm("هل أنت متأكد من حذف هذا المنتج؟"))try{await b.deleteProduct(s),u.success("تم حذف المنتج بنجاح"),p()}catch(t){console.error("Error deleting product:",t),u.error("فشل حذف المنتج")}},_=()=>{v.value=!1,d.value=!1,x.value=null},h=s=>`${parseFloat(s).toFixed(2)} جنيه`;return T(()=>{p()}),(s,t)=>(m(),c("div",A,[e("div",D,[t[11]||(t[11]=e("h1",null,"إدارة المخزون",-1)),e("div",K,[e("button",{onClick:C,class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors"},[q(w(B),{size:20}),t[10]||(t[10]=L(" إضافة منتج ",-1))])])]),e("div",O,[a(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>f.value=l),type:"text",placeholder:"بحث بالاسم أو SKU...",class:"search-input",onInput:p},null,544),[[r,f.value]]),e("label",Q,[a(e("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=l=>g.value=l),onChange:p},null,544),[[N,g.value]]),t[12]||(t[12]=e("span",null,"عرض المنتجات منخفضة المخزون فقط",-1))])]),e("div",G,[e("table",null,[t[13]||(t[13]=e("thead",null,[e("tr",null,[e("th",null,"المنتج"),e("th",null,"الحجم"),e("th",null,"سعر جملة"),e("th",null,"سعر قطاعي"),e("th",null,"سعر صفحة"),e("th",null,"الكمية"),e("th",null,"الإجراءات")])],-1)),e("tbody",null,[(m(!0),c(j,null,z(y.value,l=>(m(),c("tr",{key:l.id},[e("td",H,n(l.name_ar),1),e("td",J,n(l.volume_ml),1),e("td",R,n(h(l.price_جملة)),1),e("td",W,n(h(l.price_قطاعي)),1),e("td",X,n(h(l.price_صفحة)),1),e("td",Y,n(l.quantity),1),e("td",Z,[e("button",{onClick:k=>U(l),class:"btn-icon",title:"تعديل"},[q(w(I),{size:18})],8,ee),e("button",{onClick:k=>F(l.id),class:"btn-icon text-red-600",title:"حذف"},[q(w($),{size:18})],8,te)])]))),128))])]),y.value.length===0?(m(),c("div",le," لا توجد منتجات ")):P("",!0)]),v.value?(m(),c("div",{key:0,class:"modal-overlay",onClick:_},[e("div",{class:"modal modal-large",onClick:t[9]||(t[9]=V(()=>{},["stop"]))},[e("div",se,[e("h3",null,n(d.value?"تعديل منتج":"إضافة منتج جديد"),1),e("button",{onClick:_,class:"btn-close"},"×")]),e("div",oe,[e("form",{onSubmit:V(M,["prevent"])},[e("div",ae,[e("div",re,[t[14]||(t[14]=e("label",null,"اسم المنتج (عربي) *",-1)),a(e("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>o.value.name_ar=l),type:"text",required:"",placeholder:"عطر الورد"},null,512),[[r,o.value.name_ar]])]),e("div",ne,[t[15]||(t[15]=e("label",null,"الحجم (مل)",-1)),a(e("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>o.value.volume_ml=l),type:"text",placeholder:"100 مل"},null,512),[[r,o.value.volume_ml]]),t[16]||(t[16]=e("small",{class:"text-gray-500"},"مثال: 50 مل، 100 مل، إلخ",-1))])]),e("div",ie,[e("div",ue,[t[17]||(t[17]=e("label",null,"سعر الجملة *",-1)),a(e("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>o.value.price_جملة=l),type:"number",step:"0.01",required:"",placeholder:"85.00",class:"price-input-wholesale"},null,512),[[r,o.value.price_جملة,void 0,{number:!0}]]),t[18]||(t[18]=e("small",{class:"text-gray-500"},"سعر البيع للعملاء الجملة",-1))]),e("div",de,[t[19]||(t[19]=e("label",null,"سعر القطاعي *",-1)),a(e("input",{"onUpdate:modelValue":t[5]||(t[5]=l=>o.value.price_قطاعي=l),type:"number",step:"0.01",required:"",placeholder:"100.00",class:"price-input-retail"},null,512),[[r,o.value.price_قطاعي,void 0,{number:!0}]]),t[20]||(t[20]=e("small",{class:"text-gray-500"},"سعر البيع للعملاء القطاعي",-1))])]),e("div",pe,[t[21]||(t[21]=e("label",null,"سعر صفحة *",-1)),a(e("input",{"onUpdate:modelValue":t[6]||(t[6]=l=>o.value.price_صفحة=l),type:"number",step:"0.01",required:"",placeholder:"110.00",class:"price-input-online"},null,512),[[r,o.value.price_صفحة,void 0,{number:!0}]]),t[22]||(t[22]=e("small",{class:"text-gray-500"},"سعر البيع للعملاء صفحة",-1))]),e("div",ce,[e("div",me,[t[23]||(t[23]=e("label",null,"الكمية *",-1)),a(e("input",{"onUpdate:modelValue":t[7]||(t[7]=l=>o.value.quantity=l),type:"number",required:"",min:"0",placeholder:"100"},null,512),[[r,o.value.quantity,void 0,{number:!0}]])]),e("div",ve,[t[24]||(t[24]=e("label",null,"حد التنبيه *",-1)),a(e("input",{"onUpdate:modelValue":t[8]||(t[8]=l=>o.value.alert_quantity=l),type:"number",required:"",min:"1",placeholder:"10"},null,512),[[r,o.value.alert_quantity,void 0,{number:!0}]]),t[25]||(t[25]=e("small",{class:"text-gray-500"},"سيتم التنبيه عندما تصل الكمية لهذا الحد",-1))])]),e("div",_e,[e("button",{type:"button",onClick:_,class:"btn-secondary"},"إلغاء"),e("button",be,n(d.value?"تحديث":"إضافة"),1)])],32)])])])):P("",!0)]))}},we=S(ye,[["__scopeId","data-v-795154a6"]]);export{we as default};
