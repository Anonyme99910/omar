import{_ as j,b as A,r as d,E as J,c as t,o as l,d as s,k as p,x as g,w as T,t as n,F as b,n as k,e as B,y as $,v as K,z as x}from"./index-CkQEktF7.js";const H={class:"import-container"},W={class:"tabs"},X={key:0,class:"tab-content"},Y={class:"card"},Z={class:"template-section"},ss=["disabled"],es={key:0},ts={key:1},ls={class:"upload-section"},as={key:0,class:"dropzone-content"},os={key:1,class:"file-selected"},ns={class:"file-info"},us={class:"file-name"},rs={class:"file-size"},is=["disabled"],ds={key:0},cs={key:1},vs={key:0,class:"results-section"},ps={class:"stats"},_s={class:"stat"},ms={class:"value"},ys={class:"stat"},fs={class:"value"},bs={key:0,class:"errors"},ks={key:0},gs={key:1,class:"tab-content"},hs={class:"card"},xs={class:"template-section"},Ss=["disabled"],ws={key:0},Cs={class:"sql-editor-section"},Ls=["disabled"],qs={key:0},Qs={key:1},Ts={key:0,class:"results-section"},Es={class:"stats"},Ds={class:"stat"},Fs={class:"value"},Is={key:0,class:"errors"},zs={key:2,class:"tab-content"},Bs={class:"card"},$s={key:0,class:"guide-content"},Ns={class:"guide-section"},Ps={class:"steps"},Vs={class:"step-number"},Rs={class:"step-text"},Ms={class:"columns-table"},Os={class:"notes"},Us={class:"guide-section"},Gs={class:"steps"},js={class:"step-number"},As={class:"step-text"},Js={class:"security"},Ks={__name:"ImportProducts",setup(Hs){const c=A(),_=d("excel"),v=d(null),S=d(!1),w=d(!1),C=d(!1),Q=d(0),L=d(!1),q=d(!1),i=d(null),m=d(null),f=d(""),y=d(null),N=async()=>{try{w.value=!0;const a=await x.downloadProductTemplate(),e=window.URL.createObjectURL(new Blob([a.data])),u=document.createElement("a");u.href=e,u.setAttribute("download","products_template.csv"),document.body.appendChild(u),u.click(),u.remove(),c.success("ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ø§Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­")}catch(a){c.error("ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ø§Ù„Ø¨"),console.error(a)}finally{w.value=!1}},P=a=>{const e=a.target.files[0];e&&(v.value=e,i.value=null)},V=a=>{S.value=!1;const e=a.dataTransfer.files[0];e&&(v.value=e,i.value=null)},R=()=>{v.value=null,i.value=null},M=a=>a<1024?a+" B":a<1024*1024?(a/1024).toFixed(2)+" KB":(a/(1024*1024)).toFixed(2)+" MB",O=async()=>{var a,e;if(v.value)try{C.value=!0,Q.value=0;const u=new FormData;u.append("file",v.value);const h=await x.importProductsExcel(u);Q.value=100,i.value=h.data,h.data.success?(c.success("ØªÙ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!"),v.value=null):c.error("ÙØ´Ù„ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø¨Ø¹Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª")}catch(u){c.error("ÙØ´Ù„ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª"),i.value={success:!1,message:((e=(a=u.response)==null?void 0:a.data)==null?void 0:e.message)||u.message}}finally{C.value=!1}},U=async()=>{try{q.value=!0;const a=await x.getSQLTemplate();f.value=a.data.template,c.success("ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ø§Ù„Ø¨")}catch{c.error("ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ø§Ù„Ø¨")}finally{q.value=!1}},G=async()=>{var a,e;if(f.value)try{L.value=!0;const u=await x.importProductsSQL({sql:f.value});m.value=u.data,u.data.success?(c.success("ØªÙ… ØªÙ†ÙÙŠØ° SQL Ø¨Ù†Ø¬Ø§Ø­!"),f.value=""):c.error("ÙØ´Ù„ ØªÙ†ÙÙŠØ° Ø¨Ø¹Ø¶ Ø§Ù„Ø¬Ù…Ù„")}catch(u){c.error("ÙØ´Ù„ ØªÙ†ÙÙŠØ° SQL"),m.value={success:!1,message:((e=(a=u.response)==null?void 0:a.data)==null?void 0:e.message)||u.message}}finally{L.value=!1}},E=async()=>{try{const a=await x.getImportGuide();y.value=a.data.guide}catch{c.error("ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¯Ù„ÙŠÙ„")}};return E(),(a,e)=>{var h,D,F,I,z;const u=J('else"');return l(),t("div",H,[e[26]||(e[26]=s("div",{class:"header"},[s("h1",null,"Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª"),s("p",{class:"subtitle"},"Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¨Ø´ÙƒÙ„ Ø¬Ù…Ø§Ø¹ÙŠ Ø¹Ø¨Ø± Excel Ø£Ùˆ SQL")],-1)),s("div",W,[s("button",{class:g(["tab",{active:_.value==="excel"}]),onClick:e[0]||(e[0]=o=>_.value="excel")}," ðŸ“Š Ø§Ø³ØªÙŠØ±Ø§Ø¯ Excel/CSV ",2),s("button",{class:g(["tab",{active:_.value==="sql"}]),onClick:e[1]||(e[1]=o=>_.value="sql")}," ðŸ’¾ Ø§Ø³ØªÙŠØ±Ø§Ø¯ SQL ",2),s("button",{class:g(["tab",{active:_.value==="guide"}]),onClick:e[2]||(e[2]=o=>_.value="guide")}," ðŸ“– Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ",2)]),_.value==="excel"?(l(),t("div",X,[s("div",Y,[e[13]||(e[13]=s("h2",null,"Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù…Ù† Excel/CSV",-1)),s("div",Z,[e[7]||(e[7]=s("p",null,"Ù‚Ù… Ø¨ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ø§Ù„Ø¨ Ø£ÙˆÙ„Ø§Ù‹ ÙˆÙ…Ù„Ø¡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª",-1)),s("button",{onClick:N,class:"btn-secondary",disabled:w.value},[w.value?(l(),t("span",ts,"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...")):(l(),t("span",es,"â¬‡ï¸ ØªØ­Ù…ÙŠÙ„ Ù‚Ø§Ù„Ø¨ Excel"))],8,ss)]),s("div",ls,[s("div",{class:g(["dropzone",{dragover:S.value}]),onDragover:e[3]||(e[3]=T(o=>S.value=!0,["prevent"])),onDragleave:e[4]||(e[4]=o=>S.value=!1),onDrop:T(V,["prevent"]),onClick:e[5]||(e[5]=o=>a.$refs.fileInput.click())},[s("input",{ref:"fileInput",type:"file",accept:".xlsx,.xls,.csv",onChange:P,style:{display:"none"}},null,544),v.value?(l(),t("div",os,[e[9]||(e[9]=s("div",{class:"file-icon"},"ðŸ“„",-1)),s("div",ns,[s("p",us,n(v.value.name),1),s("p",rs,n(M(v.value.size)),1)]),s("button",{onClick:T(R,["stop"]),class:"btn-remove"},"âœ•")])):(l(),t("div",as,[...e[8]||(e[8]=[s("div",{class:"upload-icon"},"ðŸ“",-1),s("p",null,"Ø§Ø³Ø­Ø¨ ÙˆØ£ÙÙ„Øª Ù…Ù„Ù Excel Ù‡Ù†Ø§",-1),s("p",{class:"or"},"Ø£Ùˆ",-1),s("button",{class:"btn-primary"},"Ø§Ø®ØªØ± Ù…Ù„Ù",-1),s("p",{class:"file-types"},"ÙŠØ¯Ø¹Ù…: .xlsx, .xls, .csv",-1)])]))],34),v.value?(l(),t("button",{key:0,onClick:O,class:"btn-primary btn-upload",disabled:C.value},[C.value?(l(),t("span",cs,"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯... "+n(Q.value)+"%",1)):(l(),t("span",ds,"â¬†ï¸ Ø±ÙØ¹ ÙˆØ§Ø³ØªÙŠØ±Ø§Ø¯"))],8,is)):p("",!0)]),i.value?(l(),t("div",vs,[s("div",{class:g(["results-card",i.value.success?"success":"error"])},[s("h3",null,n(i.value.success?"âœ… Ù†Ø¬Ø­ Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯":"âŒ ÙØ´Ù„ Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯"),1),s("div",ps,[s("div",_s,[e[10]||(e[10]=s("span",{class:"label"},"ØªÙ… Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯:",-1)),s("span",ms,n(((h=i.value.data)==null?void 0:h.imported)||0),1)]),s("div",ys,[e[11]||(e[11]=s("span",{class:"label"},"ØªÙ… Ø§Ù„ØªØ®Ø·ÙŠ:",-1)),s("span",fs,n(((D=i.value.data)==null?void 0:D.skipped)||0),1)])]),(F=i.value.data)!=null&&F.errors&&i.value.data.errors.length>0?(l(),t("div",bs,[e[12]||(e[12]=s("h4",null,"Ø§Ù„Ø£Ø®Ø·Ø§Ø¡:",-1)),s("ul",null,[(l(!0),t(b,null,k(i.value.data.errors.slice(0,5),(o,r)=>(l(),t("li",{key:r},n(typeof o=="string"?o:o.error||JSON.stringify(o)),1))),128)),i.value.data.errors.length>5?(l(),t("li",ks," ... Ùˆ "+n(i.value.data.errors.length-5)+" Ø®Ø·Ø£ Ø¢Ø®Ø± ",1)):p("",!0)])])):p("",!0)],2)])):p("",!0)])])):p("",!0),_.value==="sql"?(l(),t("div",gs,[s("div",hs,[e[20]||(e[20]=s("h2",null,"Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù…Ù† SQL",-1)),s("div",xs,[e[15]||(e[15]=s("p",null,"Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ù‚Ø§Ù„Ø¨ SQL Ù„Ù„Ø¨Ø¯Ø¡",-1)),s("button",{onClick:U,class:"btn-secondary",disabled:q.value},[q.value?p("",!0):(l(),t("span",ws,"ðŸ“‹ Ø¹Ø±Ø¶ Ù‚Ø§Ù„Ø¨ SQL")),B((l(),t("span",null,[...e[14]||(e[14]=[$("Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...",-1)])])),[[u]])],8,Ss)]),s("div",Cs,[e[16]||(e[16]=s("label",null,"Ø¬Ù…Ù„ SQL:",-1)),B(s("textarea",{"onUpdate:modelValue":e[6]||(e[6]=o=>f.value=o),class:"sql-editor",placeholder:"INSERT INTO products ...",rows:"15"},null,512),[[K,f.value]]),s("button",{onClick:G,class:"btn-primary",disabled:!f.value||L.value},[L.value?(l(),t("span",Qs,"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙ†ÙÙŠØ°...")):(l(),t("span",qs,"âš¡ ØªÙ†ÙÙŠØ° ÙˆØ§Ø³ØªÙŠØ±Ø§Ø¯"))],8,Ls)]),m.value?(l(),t("div",Ts,[s("div",{class:g(["results-card",m.value.success?"success":"error"])},[s("h3",null,n(m.value.success?"âœ… Ù†Ø¬Ø­ Ø§Ù„ØªÙ†ÙÙŠØ°":"âŒ ÙØ´Ù„ Ø§Ù„ØªÙ†ÙÙŠØ°"),1),s("div",Es,[s("div",Ds,[e[17]||(e[17]=s("span",{class:"label"},"Ø¬Ù…Ù„ ØªÙ… ØªÙ†ÙÙŠØ°Ù‡Ø§:",-1)),s("span",Fs,n(((I=m.value.data)==null?void 0:I.imported)||0),1)])]),(z=m.value.data)!=null&&z.errors&&m.value.data.errors.length>0?(l(),t("div",Is,[e[19]||(e[19]=s("h4",null,"Ø§Ù„Ø£Ø®Ø·Ø§Ø¡:",-1)),s("ul",null,[(l(!0),t(b,null,k(m.value.data.errors,(o,r)=>(l(),t("li",{key:r},[s("strong",null,n(o.statement),1),e[18]||(e[18]=s("br",null,null,-1)),$(" "+n(o.error),1)]))),128))])])):p("",!0)],2)])):p("",!0)])])):p("",!0),_.value==="guide"?(l(),t("div",zs,[s("div",Bs,[e[25]||(e[25]=s("h2",null,"ðŸ“– Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…",-1)),y.value?(l(),t("div",$s,[s("div",Ns,[s("h3",null,n(y.value.excel.title),1),s("div",Ps,[(l(!0),t(b,null,k(y.value.excel.steps,(o,r)=>(l(),t("div",{key:r,class:"step"},[s("span",Vs,n(r+1),1),s("span",Rs,n(o),1)]))),128))]),e[22]||(e[22]=s("h4",null,"Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:",-1)),s("table",Ms,[e[21]||(e[21]=s("thead",null,[s("tr",null,[s("th",null,"Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙˆØ¯"),s("th",null,"Ø§Ù„ÙˆØµÙ")])],-1)),s("tbody",null,[(l(!0),t(b,null,k(y.value.excel.required_columns,(o,r)=>(l(),t("tr",{key:r},[s("td",null,[s("code",null,n(r),1)]),s("td",null,n(o),1)]))),128))])]),e[23]||(e[23]=s("h4",null,"Ù…Ù„Ø§Ø­Ø¸Ø§Øª:",-1)),s("ul",Os,[(l(!0),t(b,null,k(y.value.excel.notes,(o,r)=>(l(),t("li",{key:r},n(o),1))),128))])]),s("div",Us,[s("h3",null,n(y.value.sql.title),1),s("div",Gs,[(l(!0),t(b,null,k(y.value.sql.steps,(o,r)=>(l(),t("div",{key:r,class:"step"},[s("span",js,n(r+1),1),s("span",As,n(o),1)]))),128))]),e[24]||(e[24]=s("h4",null,"Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø£Ù…Ø§Ù†:",-1)),s("ul",Js,[(l(!0),t(b,null,k(y.value.sql.security,(o,r)=>(l(),t("li",{key:r},"ðŸ”’ "+n(o),1))),128))])])])):(l(),t("button",{key:1,onClick:E,class:"btn-primary"},"ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¯Ù„ÙŠÙ„"))])])):p("",!0)])}}},Xs=j(Ks,[["__scopeId","data-v-e10c57ac"]]);export{Xs as default};
