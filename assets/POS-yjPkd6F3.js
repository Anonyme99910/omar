import{u as Rt,b as Gt,r as d,i as W,f as Ht,c as u,o as r,k as C,w as K,d as e,e as f,l as b,v as x,m as i,F as A,n as E,t as a,x as F,y as ot,q as Kt,A as Xt,z}from"./index-BBncFYNK.js";import{f as h,t as Q}from"./numbers-BTmV-EI5.js";import{S as _t}from"./search-7VAwesAx.js";import{U as Yt}from"./user-plus-ClWPliFU.js";import{P as Zt}from"./package-DI1a_lJU.js";import{S as Ct}from"./shopping-cart-UQ9VoIZx.js";import{c as te}from"./createLucideIcon-BypuxAeB.js";import{P as qt}from"./plus-BCT57f1K.js";import{T as $t}from"./trash-2-CzJYYcpB.js";/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=te("MinusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}]]),ee={class:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl mx-4 max-h-[90vh] flex flex-col relative"},se={class:"p-8 pb-4"},le={class:"relative"},oe={key:0,class:"absolute right-3 top-3.5"},ne={class:"flex-1 overflow-y-auto px-8 space-y-3"},ae=["onClick"],re={class:"flex items-center justify-between"},ie={class:"font-bold text-lg text-gray-900"},ue={class:"text-sm text-gray-600"},de={class:"p-8 pt-4 border-t bg-white rounded-b-2xl"},ce={class:"bg-white rounded-2xl shadow-2xl w-full max-w-md mx-4 p-6"},pe={class:"text-gray-600 mb-6 text-center"},ve={class:"space-y-4"},ge={class:"flex gap-3"},ye={key:0,class:"space-y-4 p-4 bg-gray-50 rounded-lg"},fe={key:2,class:"flex flex-col lg:flex-row h-screen bg-gray-50"},me={class:"flex-1 p-4 overflow-y-auto pb-32 lg:pb-4"},be={class:"card"},xe={class:"relative"},he=["placeholder"],we={key:0,class:"absolute left-12 top-3.5"},ke={class:"flex justify-center"},_e={class:"inline-flex rounded-lg border-2 border-primary-600 p-1 bg-white shadow-md"},Ce={class:"grid grid-cols-2 md:grid-cols-3 gap-4"},qe=["onClick"],$e={class:"aspect-square bg-gray-100 rounded-lg mb-3 flex items-center justify-center overflow-hidden"},je=["src","alt"],Pe={class:"font-bold text-gray-900 mb-1 truncate"},Me={key:0,class:"text-sm text-gray-500 mb-2"},ze={key:1,class:"text-sm text-gray-500 mb-2 line-clamp-2"},Se={class:"flex items-center justify-between"},Fe={class:"text-lg font-bold text-primary-600"},Ve={class:"hidden lg:flex lg:w-96 bg-white border-l border-gray-200 flex-col"},Le={class:"flex-1 p-4 overflow-y-auto"},Ue={class:"mb-4 p-3 bg-primary-50 rounded-lg border border-primary-200"},Be={class:"flex items-center justify-between mb-2"},Ie={class:"font-bold text-gray-900"},Te={class:"text-xs text-gray-600"},Ae={class:"text-xl font-bold mb-4 flex items-center gap-2"},Qe={class:"space-y-3 mb-4 max-h-64 overflow-y-auto"},Ne={key:0,class:"text-center py-8 text-gray-500"},De={class:"flex-1"},We={class:"font-medium text-sm"},Ee={class:"text-xs text-gray-500"},Oe={key:0,class:"text-xs text-primary-600 font-medium mt-1"},Je={class:"flex items-center gap-2"},Re=["onClick"],Ge=["value","onInput","onBlur","max"],He=["onClick"],Ke=["onClick"],Xe={class:"border-t pt-4 space-y-2"},Ye={class:"flex justify-between text-sm"},Ze={class:"font-bold"},ts={class:"flex justify-between text-sm"},es={class:"flex justify-between text-sm"},ss={class:"flex justify-between text-lg font-bold border-t pt-2"},ls={class:"text-primary-600"},os={class:"flex justify-between text-sm bg-blue-50 p-2 rounded"},ns=["placeholder"],as={key:0,class:"flex justify-between text-sm text-red-600 font-bold"},rs={class:"mt-4"},is={class:"grid grid-cols-2 gap-2"},us=["onClick"],ds={class:"mt-4 space-y-2"},cs=["disabled"],ps={class:"lg:hidden fixed bottom-0 left-0 right-0 bg-white border-t-2 border-gray-200 p-4 shadow-lg z-40"},vs={class:"flex items-center justify-between mb-3"},gs={class:"text-2xl font-bold text-primary-600"},ys={class:"text-right"},fs={class:"text-xl font-bold text-gray-900"},ms=["disabled"],bs={key:3,class:"lg:hidden fixed inset-0 bg-white z-50 flex flex-col"},xs={class:"bg-primary-600 text-white p-4 flex items-center justify-between"},hs={class:"p-4 bg-primary-50 border-b border-primary-200"},ws={class:"flex items-center justify-between"},ks={class:"font-bold text-gray-900"},_s={class:"text-xs text-gray-600 mt-1"},Cs={class:"flex-1 overflow-y-auto p-4"},qs={key:0,class:"text-center py-12 text-gray-500"},$s={key:1,class:"space-y-3"},js={class:"flex-1"},Ps={class:"font-medium text-sm"},Ms={class:"text-xs text-gray-500"},zs={key:0,class:"text-xs text-primary-600 font-medium mt-1"},Ss={class:"flex items-center gap-2"},Fs=["onClick"],Vs=["value","onInput","onBlur","max"],Ls=["onClick"],Us=["onClick"],Bs={class:"border-t p-4 bg-white"},Is={class:"space-y-2 mb-4"},Ts={class:"flex justify-between text-sm"},As={class:"font-bold"},Qs={class:"flex justify-between text-sm"},Ns={class:"flex justify-between text-sm"},Ds={class:"flex justify-between text-lg font-bold text-primary-600 pt-2 border-t"},Ws={class:"space-y-2"},Es=["disabled"],Os={class:"bg-white rounded-xl p-6 w-full max-w-md relative"},Js={class:"flex gap-3 pt-2"},ll={__name:"POS",setup(Rs){const Pt=Rt(),v=Gt(),w=d("products"),V=d([]),O=d([]),L=d([]),J=d([]),q=d([]),p=d([]),U=d(""),j=d(""),m=d(null),N=d(""),P=d(0),M=d(0),D=d(null),X=d("cash"),B=d(!1);d(!1);const Y=d(!1);let Z=null;const tt=d(!1),R=d(null),y=d("without"),I=d(1),T=d(0),G=d(!1),k=d({name:"",phone:"",segment:"ŸÇÿ∑ÿßÿπŸä"}),Mt=[{value:"cash",label:"ŸÜŸÇÿØŸä"},{value:"transfer",label:"ÿ™ÿ≠ŸàŸäŸÑ"}],zt=W(()=>{const l=w.value==="products"?V.value:L.value;return U.value?l:l.slice(0,12)}),St=W(()=>{if(!j.value)return q.value;const l=j.value.toLowerCase().trim(),t=s=>s.replace(/[ÿ£ÿ•ÿ¢]/g,"ÿß").replace(/[Ÿâ]/g,"Ÿä").replace(/[ÿ©]/g,"Ÿá").replace(/[\u064B-\u065F]/g,""),o=t(l);return q.value.map(s=>{const n=t(s.name.toLowerCase()),c=s.phone.toString();let g=0;if(n===o||c===l)g=1e3;else if(n.startsWith(o)||c.startsWith(l))g=500;else if(n.includes(o)||c.includes(l))g=100;else{let $=0;for(let _=0;_<n.length&&$<o.length;_++)n[_]===o[$]&&($++,g+=1);$!==o.length&&(g=0)}return{customer:s,score:g}}).filter(s=>s.score>0).sort((s,n)=>n.score-s.score).slice(0,10).map(s=>s.customer)}),et=W(()=>p.value.reduce((l,t)=>{const o=t.unit_price*t.quantity,s=t.with_packaging?t.packaging_price*t.packaging_quantity:0;return l+o+s},0)),S=W(()=>et.value+M.value-P.value),nt=W(()=>{const l=D.value||S.value;return Math.max(0,S.value-l)}),Ft=()=>{Z&&clearTimeout(Z),Y.value=!0,Z=setTimeout(async()=>{w.value==="products"?await Vt():await Lt(),Y.value=!1},300)},Vt=async()=>{const l=U.value.trim();if(!l){V.value=O.value.slice(0,12);return}const t=l.toLowerCase(),o=O.value.filter(s=>{var bt,xt,ht,wt,kt;const n=s.name_ar.toLowerCase(),c=((bt=s.barcode)==null?void 0:bt.toLowerCase())||"",g=((ht=(xt=s.category)==null?void 0:xt.name_ar)==null?void 0:ht.toLowerCase())||"",$=((kt=(wt=s.brand)==null?void 0:wt.name_ar)==null?void 0:kt.toLowerCase())||"";if(n.includes(t)||c.includes(t)||g.includes(t)||$.includes(t))return!0;let _=0;for(let lt=0;lt<n.length&&_<t.length;lt++)n[lt]===t[_]&&_++;return _===t.length});if(V.value=o,o.length===0&&l.length>=2)try{const s=await z.getProducts({search:l});V.value=s.data.data||s.data||[]}catch(s){console.error("Search error:",s)}},Lt=async()=>{const l=U.value.trim();if(!l){L.value=J.value.slice(0,12);return}const t=l.toLowerCase(),o=J.value.filter(s=>{var g;const n=s.name_ar.toLowerCase(),c=((g=s.description)==null?void 0:g.toLowerCase())||"";return n.includes(t)||c.includes(t)});L.value=o},Ut=l=>{if(!l)return"";const o=JSON.parse(l)[0];return o.startsWith("data:")?o:`http://localhost/parfumes/backend/public${o}`},Bt=l=>{if(!l&&l!==0)return"";const t=String(l).trim();return/\bml\b/i.test(t)||t.includes("ŸÖŸÑ")?t:`${t} ŸÖŸÑ`},It=l=>{const t=q.value.find(s=>s.id===m.value),o=(t==null?void 0:t.segment)||"ŸÇÿ∑ÿßÿπŸä";return parseFloat(o==="ÿ¨ŸÖŸÑÿ©"?l.price_ÿ¨ŸÖŸÑÿ©:o==="ÿµŸÅÿ≠ÿ©"?l.price_ÿµŸÅÿ≠ÿ©:l.price_ŸÇÿ∑ÿßÿπŸä)},Tt=l=>{if(l.quantity===0){v.error(w.value==="products"?"ÿßŸÑŸÖŸÜÿ™ÿ¨ ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ± ŸÅŸä ÿßŸÑŸÖÿÆÿ≤ŸàŸÜ":"ÿßŸÑÿ®ÿßŸÇÿ© ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ±ÿ© ŸÅŸä ÿßŸÑŸÖÿÆÿ≤ŸàŸÜ");return}R.value=l,y.value="without",I.value=1,T.value=0,tt.value=!0},H=()=>{tt.value=!1,R.value=null,y.value="without",I.value=1,T.value=0},At=()=>{const l=R.value;if(!l)return;const t=p.value.find(o=>o.product.id===l.id&&o.with_packaging===(y.value==="with")&&o.packaging_quantity===(y.value==="with"?I.value:null)&&o.packaging_price===(y.value==="with"?T.value:null));if(t){if(t.quantity>=l.quantity){v.error("ÿßŸÑŸÉŸÖŸäÿ© ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ© ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ±ÿ©"),H();return}t.quantity++}else{const o={product:l,quantity:1,unit_price:gt(l),with_packaging:y.value==="with",packaging_quantity:y.value==="with"?I.value:null,packaging_price:y.value==="with"?T.value:null};p.value.push(o)}v.success(w.value==="products"?"ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨ ŸÑŸÑÿ≥ŸÑÿ©":"ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿ®ÿßŸÇÿ© ŸÑŸÑÿ≥ŸÑÿ©"),H()},at=l=>{if(l.quantity>=l.product.quantity){v.error("ÿßŸÑŸÉŸÖŸäÿ© ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ© ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ±ÿ©");return}l.quantity++},rt=l=>{l.quantity>1?l.quantity--:st(l)},it=(l,t)=>{const o=parseInt(t)||1;if(o<1){l.quantity=1;return}if(o>l.product.quantity){v.error("ÿßŸÑŸÉŸÖŸäÿ© ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ© ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ±ÿ©"),l.quantity=l.product.quantity;return}l.quantity=o},ut=l=>{l.quantity<1?l.quantity=1:l.quantity>l.product.quantity&&(l.quantity=l.product.quantity,v.error("ÿßŸÑŸÉŸÖŸäÿ© ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ© ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ±ÿ©"))},st=l=>{p.value=p.value.filter(t=>t.product.id!==l.product.id)},dt=()=>{p.value.length!==0&&confirm("ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ŸÖÿ≥ÿ≠ ÿßŸÑÿ≥ŸÑÿ©ÿü")&&(p.value=[],P.value=0,M.value=0)},Qt=async()=>{var l,t;if(!k.value.name||!k.value.phone){v.error("ÿßŸÑÿ±ÿ¨ÿßÿ° ÿ•ÿØÿÆÿßŸÑ ÿßŸÑÿßÿ≥ŸÖ Ÿàÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ");return}try{const o=await z.createCustomer(k.value),s=o.data.data||o.data;v.success("ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿπŸÖŸäŸÑ ÿ®ŸÜÿ¨ÿßÿ≠"),q.value.unshift(s),m.value=s.id,N.value=s.name,B.value=!1,k.value={name:"",phone:"",segment:"ŸÇÿ∑ÿßÿπŸä"},v.info(`ÿ™ŸÖ ÿßÿÆÿ™Ÿäÿßÿ±: ${s.name}`)}catch(o){console.error("Error adding customer:",o),v.error(((t=(l=o.response)==null?void 0:l.data)==null?void 0:t.message)||"ŸÅÿ¥ŸÑ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿπŸÖŸäŸÑ")}},ct=async()=>{var t,o,s;if(p.value.length===0)return;const l={customer_id:m.value===0?null:m.value,items:p.value.map(n=>({product_id:n.product.id,quantity:n.quantity,unit_price:n.unit_price,with_packaging:n.with_packaging||!1,packaging_quantity:n.packaging_quantity||null,packaging_price:n.packaging_price||null})),tax:M.value,discount:P.value,paid_amount:D.value||S.value,payment_method:X.value};try{const n=await z.createSale(l),c=Q(n.data.invoice_number);v.success(`ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ© ${c}`);const g=[];if(confirm("ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ© PDFÿü"))try{await z.downloadInvoicePdf(n.data.id),v.success("ÿ™ŸÖ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ© ÿ®ŸÜÿ¨ÿßÿ≠")}catch($){console.error("PDF Error:",$),v.error("ŸÅÿ¥ŸÑ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ© PDF")}(t=n.data.customer)!=null&&t.phone&&confirm("ŸáŸÑ ÿ™ÿ±ŸäÿØ ŸÖÿ¥ÿßÿ±ŸÉÿ© ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ© ÿπÿ®ÿ± Ÿàÿßÿ™ÿ≥ÿßÿ®ÿü")&&Nt(n.data),p.value=[],P.value=0,M.value=0,D.value=null,pt()}catch(n){v.error(((s=(o=n.response)==null?void 0:o.data)==null?void 0:s.error)||"ŸÅÿ¥ŸÑ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ©")}},Nt=async l=>{var t,o,s;try{const n=await z.getWhatsAppMessage(l.id),{message:c,phone:g}=n.data;if(!g){v.error("ŸÑÿß ŸäŸàÿ¨ÿØ ÿ±ŸÇŸÖ Ÿáÿßÿ™ŸÅ ŸÑŸÑÿπŸÖŸäŸÑ");return}const _=`https://wa.me/${g.replace(/[^0-9]/g,"")}?text=${encodeURIComponent(c)}`;window.open(_,"_blank"),v.success("ÿ™ŸÖ ŸÅÿ™ÿ≠ Ÿàÿßÿ™ÿ≥ÿßÿ® ÿ®ŸÜÿ¨ÿßÿ≠")}catch(n){console.error("WhatsApp Error:",n),console.error("Error details:",(t=n.response)==null?void 0:t.data),v.error("ŸÅÿ¥ŸÑ ŸÖÿ¥ÿßÿ±ŸÉÿ© ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ© ÿπÿ®ÿ± Ÿàÿßÿ™ÿ≥ÿßÿ®: "+(((s=(o=n.response)==null?void 0:o.data)==null?void 0:s.message)||n.message))}},pt=async()=>{try{const l=await z.getProducts(),t=l.data.data||l.data||[];O.value=t,V.value=t}catch(l){console.error("Failed to load products:",l),O.value=[],V.value=[]}},Dt=async()=>{console.log("üì• Fetching customers...");try{const l=await z.getCustomers();q.value=l.data.data||l.data||[],console.log("‚úÖ Customers loaded:",q.value.length)}catch(l){console.error("‚ùå Failed to load customers:",l),q.value=[]}},Wt=async()=>{try{const l=await z.getPackages(),t=l.data.data||l.data||[];J.value=t,L.value=t}catch(l){console.error("Failed to load packages:",l),J.value=[],L.value=[]}},vt=l=>{w.value=l,U.value="",l==="packages"&&L.value.length===0&&Wt()},gt=l=>w.value==="products"?It(l):Et(l),Et=l=>{const t=q.value.find(s=>s.id===m.value),o=(t==null?void 0:t.segment)||"ŸÇÿ∑ÿßÿπŸä";return parseFloat(o==="ÿ¨ŸÖŸÑÿ©"?l.price_ÿ¨ŸÖŸÑÿ©:o==="ÿµŸÅÿ≠ÿ©"?l.price_ÿµŸÅÿ≠ÿ©:l.price_ŸÇÿ∑ÿßÿπŸä)},Ot=()=>{Pt.back()},Jt=()=>{B.value=!0},yt=(l,t)=>{m.value=l,N.value=t,j.value="",v.success(`ÿ™ŸÖ ÿßÿÆÿ™Ÿäÿßÿ±: ${t}`)},ft=()=>{p.value.length>0&&!confirm("ÿ≥Ÿäÿ™ŸÖ ŸÖÿ≥ÿ≠ ÿßŸÑÿ≥ŸÑÿ© ÿßŸÑÿ≠ÿßŸÑŸäÿ©. ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿßŸÑŸÖÿ™ÿßÿ®ÿπÿ©ÿü")||(p.value=[],m.value=null,N.value="",j.value="")},mt=()=>{if(m.value===0||m.value===null)return"ŸÇÿ∑ÿßÿπŸä";const l=q.value.find(t=>t.id===m.value);return(l==null?void 0:l.segment)||"ŸÇÿ∑ÿßÿπŸä"};return Ht(()=>{pt(),Dt()}),(l,t)=>{var o;return r(),u(A,null,[m.value===null?(r(),u("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:K(Ot,["self"])},[e("div",ee,[e("button",{onClick:t[0]||(t[0]=s=>l.$router.back()),class:"absolute top-4 left-4 text-gray-400 hover:text-gray-600 transition-colors z-10",title:"ÿßŸÑŸÇÿßÿ¶ŸÖÿ©"},[...t[25]||(t[25]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])]),e("div",se,[t[27]||(t[27]=e("div",{class:"text-center mb-6"},[e("h2",{class:"text-3xl font-bold text-gray-900 mb-2"},"ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ŸÉ ŸÅŸä ŸÜŸÇÿ∑ÿ© ÿßŸÑÿ®Ÿäÿπ"),e("p",{class:"text-gray-600"},"ÿßÿÆÿ™ÿ± ÿßŸÑÿπŸÖŸäŸÑ ŸÑŸÑŸÖÿ™ÿßÿ®ÿπÿ©")],-1)),e("div",le,[f(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>j.value=s),type:"text",placeholder:"ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ÿπŸÖŸäŸÑ ÿ®ÿßŸÑÿßÿ≥ŸÖ ÿ£Ÿà ÿßŸÑŸáÿßÿ™ŸÅ...",class:"input pl-10 text-lg",autofocus:""},null,512),[[x,j.value]]),b(i(_t),{class:"absolute left-3 top-3.5 text-gray-400",size:24}),j.value?(r(),u("div",oe,[e("button",{onClick:t[2]||(t[2]=s=>j.value=""),class:"text-gray-400 hover:text-gray-600"},[...t[26]||(t[26]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):C("",!0)])]),e("div",ne,[e("button",{onClick:t[3]||(t[3]=s=>yt(0,"ÿπŸÖŸäŸÑ ÿπÿßÿØŸä")),class:"w-full p-4 bg-gradient-to-r from-gray-100 to-gray-200 hover:from-gray-200 hover:to-gray-300 rounded-xl text-right transition-all border-2 border-transparent hover:border-primary-500"},[...t[28]||(t[28]=[e("div",{class:"flex items-center justify-between"},[e("div",null,[e("p",{class:"font-bold text-lg text-gray-900"},"ÿπŸÖŸäŸÑ ÿπÿßÿØŸä"),e("p",{class:"text-sm text-gray-600"},"ÿ≥ÿπÿ± ŸÇÿ∑ÿßÿπŸä")]),e("div",{class:"bg-primary-100 text-primary-700 px-3 py-1 rounded-full text-sm font-medium"}," ŸÇÿ∑ÿßÿπŸä ")],-1)])]),(r(!0),u(A,null,E(St.value,s=>(r(),u("button",{key:s.id,onClick:n=>yt(s.id,s.name),class:"w-full p-4 bg-white hover:bg-gray-50 rounded-xl text-right transition-all border-2 border-gray-200 hover:border-primary-500"},[e("div",re,[e("div",null,[e("p",ie,a(s.name),1),e("p",ue,a(s.phone),1)]),e("div",{class:F(["px-3 py-1 rounded-full text-sm font-medium",{"bg-blue-100 text-blue-700":s.segment==="ÿ¨ŸÖŸÑÿ©","bg-green-100 text-green-700":s.segment==="ŸÇÿ∑ÿßÿπŸä","bg-purple-100 text-purple-700":s.segment==="ÿµŸÅÿ≠ÿ©"}])},a(s.segment),3)])],8,ae))),128))]),e("div",de,[e("button",{onClick:Jt,class:"w-full btn btn-primary flex items-center justify-center gap-2",type:"button"},[b(i(Yt),{size:20}),t[29]||(t[29]=ot(" ÿ•ÿ∂ÿßŸÅÿ© ÿπŸÖŸäŸÑ ÿ¨ÿØŸäÿØ ",-1))])])])])):C("",!0),tt.value?(r(),u("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:K(H,["self"])},[e("div",ce,[t[32]||(t[32]=e("h3",{class:"text-2xl font-bold text-gray-900 mb-4 text-center"},"ÿ•ÿ∂ÿßŸÅÿ© ÿπŸÑÿ®ÿ©",-1)),e("p",pe,a((o=R.value)==null?void 0:o.name_ar),1),e("div",ve,[e("div",ge,[e("button",{onClick:t[4]||(t[4]=s=>y.value="with"),class:F(["flex-1 py-3 px-4 rounded-lg font-medium transition-all border-2",y.value==="with"?"bg-primary-600 text-white border-primary-600":"bg-white text-gray-700 border-gray-300 hover:border-primary-400"])}," ŸÖÿπ ÿπŸÑÿ®ÿ© ",2),e("button",{onClick:t[5]||(t[5]=s=>y.value="without"),class:F(["flex-1 py-3 px-4 rounded-lg font-medium transition-all border-2",y.value==="without"?"bg-primary-600 text-white border-primary-600":"bg-white text-gray-700 border-gray-300 hover:border-primary-400"])}," ÿ®ÿØŸàŸÜ ÿπŸÑÿ®ÿ© ",2)]),y.value==="with"?(r(),u("div",ye,[e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"ÿπÿØÿØ ÿßŸÑÿπŸÑÿ®",-1)),f(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>I.value=s),type:"number",min:"1",class:"input",placeholder:"1"},null,512),[[x,I.value,void 0,{number:!0}]])]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"ÿ≥ÿπÿ± ÿßŸÑÿπŸÑÿ®ÿ©",-1)),f(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>T.value=s),type:"number",step:"0.01",min:"0",class:"input",placeholder:"0.00"},null,512),[[x,T.value,void 0,{number:!0}]])])])):C("",!0),e("div",{class:"flex gap-3 mt-6"},[e("button",{onClick:H,class:"flex-1 py-3 px-4 bg-gray-200 text-gray-700 rounded-lg font-medium hover:bg-gray-300 transition-colors"}," ÿ•ŸÑÿ∫ÿßÿ° "),e("button",{onClick:At,class:"flex-1 py-3 px-4 bg-primary-600 text-white rounded-lg font-medium hover:bg-primary-700 transition-colors"}," ÿ•ÿ∂ÿßŸÅÿ© ŸÑŸÑÿ≥ŸÑÿ© ")])])])])):(r(),u("div",fe,[e("div",me,[e("div",be,[e("div",xe,[f(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>U.value=s),onInput:Ft,type:"text",placeholder:w.value==="products"?"ÿßÿ®ÿ≠ÿ´ ÿ®ÿßŸÑÿßÿ≥ŸÖ ÿ£Ÿà ÿßŸÑÿ®ÿßÿ±ŸÉŸàÿØ ÿ£Ÿà ÿßŸÑŸÅÿ¶ÿ©...":"ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ÿ®ÿßŸÇÿ©...",class:"input pl-10 text-lg",autofocus:""},null,40,he),[[x,U.value]]),b(i(_t),{class:"absolute left-3 top-3.5 text-gray-400",size:24}),Y.value?(r(),u("div",we,[...t[33]||(t[33]=[e("div",{class:"animate-spin rounded-full h-5 w-5 border-b-2 border-primary-600"},null,-1)])])):C("",!0)])]),e("div",ke,[e("div",_e,[e("button",{onClick:t[9]||(t[9]=s=>vt("products")),class:F(["px-6 py-2 rounded-md font-medium transition-all",w.value==="products"?"bg-primary-600 text-white shadow-md":"text-gray-700 hover:bg-gray-100"])}," ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ ",2),e("button",{onClick:t[10]||(t[10]=s=>vt("packages")),class:F(["px-6 py-2 rounded-md font-medium transition-all",w.value==="packages"?"bg-primary-600 text-white shadow-md":"text-gray-700 hover:bg-gray-100"])}," ÿßŸÑÿ®ÿßŸÇÿßÿ™ ",2)])]),e("div",Ce,[(r(!0),u(A,null,E(zt.value,s=>(r(),u("div",{key:s.id,onClick:n=>Tt(s),class:"card hover:shadow-lg cursor-pointer transition-all hover:scale-105"},[e("div",$e,[s.photos&&JSON.parse(s.photos)[0]?(r(),u("img",{key:0,src:Ut(s.photos),alt:s.name_ar,class:"w-full h-full object-cover"},null,8,je)):(r(),Kt(i(Zt),{key:1,size:48,class:"text-gray-400"}))]),e("h4",Pe,a(s.name_ar),1),w.value==="products"?(r(),u("p",Me,a(Bt(s.volume_ml)),1)):(r(),u("p",ze,a(s.description||"ÿ®ÿßŸÇÿ©"),1)),e("div",Se,[e("span",Fe,a(i(h)(gt(s))),1),e("span",{class:F(["text-xs badge",s.quantity>0?"badge-success":"badge-danger"])},a(i(Q)(s.quantity))+" ŸÇÿ∑ÿπÿ© ",3)])],8,qe))),128))])]),e("div",Ve,[e("div",Le,[e("div",Ue,[e("div",Be,[e("div",null,[t[34]||(t[34]=e("p",{class:"text-sm text-gray-600"},"ÿßŸÑÿπŸÖŸäŸÑ ÿßŸÑÿ≠ÿßŸÑŸä",-1)),e("p",Ie,a(N.value),1)]),e("button",{onClick:ft,class:"text-sm text-primary-600 hover:text-primary-800 font-medium"}," ÿ™ÿ∫ŸäŸäÿ± ")]),e("div",Te," ÿßŸÑÿ≥ÿπÿ±: "+a(mt()),1)]),e("h3",Ae,[b(i(Ct),{size:24}),t[35]||(t[35]=ot(" ÿ≥ŸÑÿ© ÿßŸÑŸÖÿ¥ÿ™ÿ±Ÿäÿßÿ™ ",-1))]),e("div",Qe,[p.value.length===0?(r(),u("div",Ne," ÿßŸÑÿ≥ŸÑÿ© ŸÅÿßÿ±ÿ∫ÿ© ")):C("",!0),(r(!0),u(A,null,E(p.value,(s,n)=>(r(),u("div",{key:`${s.product.id}-${n}`,class:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg"},[e("div",De,[e("p",We,a(s.product.name_ar),1),e("p",Ee,a(i(h)(s.unit_price)),1),s.with_packaging?(r(),u("p",Oe," üì¶ ŸÖÿπ ÿπŸÑÿ®ÿ© ("+a(i(Q)(s.packaging_quantity))+" √ó "+a(i(h)(s.packaging_price))+") ",1)):C("",!0)]),e("div",Je,[e("button",{onClick:c=>rt(s),class:"w-7 h-7 rounded bg-gray-200 hover:bg-gray-300 flex items-center justify-center"},[b(i(jt),{size:16})],8,Re),e("input",{value:s.quantity,onInput:c=>it(s,c.target.value),onBlur:c=>ut(s),type:"number",min:"1",max:s.product.quantity,class:"w-12 text-center font-bold border rounded py-1 text-sm"},null,40,Ge),e("button",{onClick:c=>at(s),class:"w-7 h-7 rounded bg-gray-200 hover:bg-gray-300 flex items-center justify-center"},[b(i(qt),{size:16})],8,He)]),e("button",{onClick:c=>st(s),class:"text-red-600 hover:text-red-800"},[b(i($t),{size:18})],8,Ke)]))),128))]),e("div",Xe,[e("div",Ye,[t[36]||(t[36]=e("span",null,"ÿßŸÑŸÖÿ¨ŸÖŸàÿπ ÿßŸÑŸÅÿ±ÿπŸä:",-1)),e("span",Ze,a(i(h)(et.value)),1)]),e("div",ts,[t[37]||(t[37]=e("span",null,"ÿßŸÑÿÆÿµŸÖ:",-1)),f(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>P.value=s),type:"number",step:"0.01",class:"input w-32 text-left py-1"},null,512),[[x,P.value,void 0,{number:!0}]])]),e("div",es,[t[38]||(t[38]=e("span",null,"ÿßŸÑÿ∂ÿ±Ÿäÿ®ÿ©:",-1)),f(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>M.value=s),type:"number",step:"0.01",class:"input w-32 text-left py-1"},null,512),[[x,M.value,void 0,{number:!0}]])]),e("div",ss,[t[39]||(t[39]=e("span",null,"ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä:",-1)),e("span",ls,a(i(h)(S.value)),1)]),e("div",os,[t[40]||(t[40]=e("span",null,"ÿßŸÑŸÖÿ®ŸÑÿ∫ ÿßŸÑŸÖÿØŸÅŸàÿπ:",-1)),f(e("input",{"onUpdate:modelValue":t[13]||(t[13]=s=>D.value=s),type:"number",step:"0.01",placeholder:S.value.toString(),class:"input w-32 text-left py-1"},null,8,ns),[[x,D.value,void 0,{number:!0}]])]),nt.value>0?(r(),u("div",as,[t[41]||(t[41]=e("span",null,"ÿßŸÑŸÖÿ™ÿ®ŸÇŸä:",-1)),e("span",null,a(i(h)(nt.value)),1)])):C("",!0)]),e("div",rs,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium mb-2"},"ÿ∑ÿ±ŸäŸÇÿ© ÿßŸÑÿØŸÅÿπ",-1)),e("div",is,[(r(),u(A,null,E(Mt,s=>e("button",{key:s.value,onClick:n=>X.value=s.value,class:F([X.value===s.value?"bg-primary-600 text-white":"bg-gray-100","py-2 rounded-lg font-medium transition-all"])},a(s.label),11,us)),64))])]),e("div",ds,[e("button",{onClick:ct,disabled:p.value.length===0,class:"btn btn-success w-full py-3 text-lg"}," ÿ•ÿ™ŸÖÿßŸÖ ÿßŸÑÿ®Ÿäÿπ ",8,cs),e("button",{onClick:dt,class:"btn btn-secondary w-full"}," ŸÖÿ≥ÿ≠ ÿßŸÑÿ≥ŸÑÿ© ")])])]),e("div",ps,[e("div",vs,[e("div",null,[t[43]||(t[43]=e("p",{class:"text-sm text-gray-600"},"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ≥ŸÑÿ©",-1)),e("p",gs,a(i(h)(S.value)),1)]),e("div",ys,[t[44]||(t[44]=e("p",{class:"text-sm text-gray-600"},"ÿπÿØÿØ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™",-1)),e("p",fs,a(i(Q)(p.value.length)),1)])]),e("button",{onClick:t[14]||(t[14]=s=>G.value=!0),disabled:p.value.length===0,class:"btn btn-success w-full py-4 text-lg font-bold flex items-center justify-center gap-2"},[b(i(Ct),{size:24}),ot(" ÿ•ÿ™ŸÖÿßŸÖ ÿßŸÑÿ∑ŸÑÿ® ("+a(i(Q)(p.value.length))+") ",1)],8,ms)])])),G.value?(r(),u("div",bs,[e("div",xs,[e("button",{onClick:t[15]||(t[15]=s=>G.value=!1),class:"text-white"},[...t[45]||(t[45]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),t[46]||(t[46]=e("h2",{class:"text-xl font-bold"},"ÿ≥ŸÑÿ© ÿßŸÑŸÖÿ¥ÿ™ÿ±Ÿäÿßÿ™",-1)),t[47]||(t[47]=e("div",{class:"w-6"},null,-1))]),e("div",hs,[e("div",ws,[e("div",null,[t[48]||(t[48]=e("p",{class:"text-sm text-gray-600"},"ÿßŸÑÿπŸÖŸäŸÑ ÿßŸÑÿ≠ÿßŸÑŸä",-1)),e("p",ks,a(N.value),1)]),e("button",{onClick:ft,class:"text-sm text-primary-600 hover:text-primary-800 font-medium"}," ÿ™ÿ∫ŸäŸäÿ± ")]),e("div",_s," ÿßŸÑÿ≥ÿπÿ±: "+a(mt()),1)]),e("div",Cs,[p.value.length===0?(r(),u("div",qs," ÿßŸÑÿ≥ŸÑÿ© ŸÅÿßÿ±ÿ∫ÿ© ")):(r(),u("div",$s,[(r(!0),u(A,null,E(p.value,(s,n)=>(r(),u("div",{key:`${s.product.id}-${n}`,class:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg"},[e("div",js,[e("p",Ps,a(s.product.name_ar),1),e("p",Ms,a(i(h)(s.unit_price)),1),s.with_packaging?(r(),u("p",zs," üì¶ ŸÖÿπ ÿπŸÑÿ®ÿ© ("+a(i(Q)(s.packaging_quantity))+" √ó "+a(i(h)(s.packaging_price))+") ",1)):C("",!0)]),e("div",Ss,[e("button",{onClick:c=>rt(s),class:"w-8 h-8 rounded bg-gray-200 hover:bg-gray-300 flex items-center justify-center"},[b(i(jt),{size:16})],8,Fs),e("input",{value:s.quantity,onInput:c=>it(s,c.target.value),onBlur:c=>ut(s),type:"number",min:"1",max:s.product.quantity,class:"w-14 text-center font-bold border rounded py-1 text-sm"},null,40,Vs),e("button",{onClick:c=>at(s),class:"w-8 h-8 rounded bg-gray-200 hover:bg-gray-300 flex items-center justify-center"},[b(i(qt),{size:16})],8,Ls)]),e("button",{onClick:c=>st(s),class:"text-red-600 hover:text-red-800"},[b(i($t),{size:18})],8,Us)]))),128))]))]),e("div",Bs,[e("div",Is,[e("div",Ts,[t[49]||(t[49]=e("span",null,"ÿßŸÑŸÖÿ¨ŸÖŸàÿπ ÿßŸÑŸÅÿ±ÿπŸä:",-1)),e("span",As,a(i(h)(et.value)),1)]),e("div",Qs,[t[50]||(t[50]=e("span",null,"ÿßŸÑÿÆÿµŸÖ:",-1)),f(e("input",{"onUpdate:modelValue":t[16]||(t[16]=s=>P.value=s),type:"number",step:"0.01",class:"input w-32 text-left py-1 text-sm"},null,512),[[x,P.value,void 0,{number:!0}]])]),e("div",Ns,[t[51]||(t[51]=e("span",null,"ÿßŸÑÿ∂ÿ±Ÿäÿ®ÿ©:",-1)),f(e("input",{"onUpdate:modelValue":t[17]||(t[17]=s=>M.value=s),type:"number",step:"0.01",class:"input w-32 text-left py-1 text-sm"},null,512),[[x,M.value,void 0,{number:!0}]])]),e("div",Ds,[t[52]||(t[52]=e("span",null,"ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä:",-1)),e("span",null,a(i(h)(S.value)),1)])]),e("div",Ws,[e("button",{onClick:t[18]||(t[18]=s=>{ct(),G.value=!1}),disabled:p.value.length===0,class:"btn btn-success w-full py-3 text-lg"}," ÿ•ÿ™ŸÖÿßŸÖ ÿßŸÑÿ®Ÿäÿπ ",8,Es),e("button",{onClick:dt,class:"btn btn-secondary w-full"}," ŸÖÿ≥ÿ≠ ÿßŸÑÿ≥ŸÑÿ© ")])])])):C("",!0),B.value?(r(),u("div",{key:4,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]",onClick:t[24]||(t[24]=K(s=>B.value=!1,["self"]))},[e("div",Os,[e("button",{onClick:t[19]||(t[19]=s=>B.value=!1),class:"absolute top-4 left-4 text-gray-400 hover:text-gray-600 transition-colors",title:"ÿ•ÿ∫ŸÑÿßŸÇ"},[...t[53]||(t[53]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),t[59]||(t[59]=e("h3",{class:"text-2xl font-bold mb-4"},"ÿ•ÿ∂ÿßŸÅÿ© ÿπŸÖŸäŸÑ ÿ¨ÿØŸäÿØ",-1)),e("form",{onSubmit:K(Qt,["prevent"]),class:"space-y-4"},[e("div",null,[t[54]||(t[54]=e("label",{class:"block text-sm font-medium mb-2"},"ÿßŸÑÿßÿ≥ŸÖ *",-1)),f(e("input",{"onUpdate:modelValue":t[20]||(t[20]=s=>k.value.name=s),type:"text",required:"",class:"input",placeholder:"ÿ£ÿ≠ŸÖÿØ ŸÖÿ≠ŸÖÿØ",autofocus:""},null,512),[[x,k.value.name]])]),e("div",null,[t[55]||(t[55]=e("label",{class:"block text-sm font-medium mb-2"},"ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ *",-1)),f(e("input",{"onUpdate:modelValue":t[21]||(t[21]=s=>k.value.phone=s),type:"tel",required:"",class:"input",placeholder:"01012345678",pattern:"[0-9]{11}",title:"ÿßŸÑÿ±ÿ¨ÿßÿ° ÿ•ÿØÿÆÿßŸÑ ÿ±ŸÇŸÖ Ÿáÿßÿ™ŸÅ ÿµÿ≠Ÿäÿ≠ (11 ÿ±ŸÇŸÖ)"},null,512),[[x,k.value.phone]])]),e("div",null,[t[57]||(t[57]=e("label",{class:"block text-sm font-medium mb-2"},"ÿßŸÑÿ¥ÿ±Ÿäÿ≠ÿ©",-1)),f(e("select",{"onUpdate:modelValue":t[22]||(t[22]=s=>k.value.segment=s),class:"input"},[...t[56]||(t[56]=[e("option",{value:"ŸÇÿ∑ÿßÿπŸä"},"ŸÇÿ∑ÿßÿπŸä",-1),e("option",{value:"ÿ¨ŸÖŸÑÿ©"},"ÿ¨ŸÖŸÑÿ©",-1),e("option",{value:"ÿµŸÅÿ≠ÿ©"},"ÿµŸÅÿ≠ÿ©",-1)])],512),[[Xt,k.value.segment]])]),e("div",Js,[e("button",{type:"button",onClick:t[23]||(t[23]=s=>B.value=!1),class:"btn btn-secondary flex-1"},"ÿ•ŸÑÿ∫ÿßÿ°"),t[58]||(t[58]=e("button",{type:"submit",class:"btn btn-primary flex-1"},"ÿ≠ŸÅÿ∏ Ÿàÿ•ÿ∂ÿßŸÅÿ©",-1))])],32)])])):C("",!0)],64)}}};export{ll as default};
