import{u as C,b as M,r as f,f as P,C as j,c as g,o as b,d as e,k as v,l as r,m as n,t as i,y as B,w as y,e as m,v as c,z as w}from"./index-VOtROKm6.js";import{t as D}from"./numbers-BTmV-EI5.js";import{U as _}from"./user-BN3VetxL.js";import{P as L}from"./pen-kgp2UXbN.js";import{c as h}from"./createLucideIcon-CE3J3cEQ.js";import{C as N}from"./calendar-DEMhICcz.js";import{X as E}from"./x-CFwQhQKp.js";/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=h("BriefcaseIcon",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=h("MailIcon",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),I={class:"max-w-4xl mx-auto space-y-6"},S={class:"card"},T={class:"flex items-start gap-6 mb-6 pb-6 border-b"},q={class:"relative"},R={class:"w-24 h-24 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center"},G={class:"flex-1"},X={class:"text-2xl font-bold text-gray-900"},$={class:"text-gray-500 mt-1"},A={class:"flex items-center gap-2 mt-2"},H={class:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium"},J={key:0,class:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-medium"},K={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},O={class:"space-y-4"},Q={class:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg"},W={class:"text-gray-900"},Y={class:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg"},Z={class:"text-gray-900"},ee={class:"space-y-4"},te={class:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg"},se={class:"text-gray-900"},ae={class:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg"},oe={class:"text-gray-900"},le={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},re={class:"p-6"},ne={class:"flex items-center justify-between mb-6"},be={__name:"Profile",setup(ie){C();const d=M(),o=f({}),p=f(!1),s=f({name:"",email:"",password:"",password_confirmation:""}),x=a=>({admin:"مدير النظام",manager:"مدير فرع",cashier:"كاشير",inventory:"مسؤول مخزن"})[a]||a,k=a=>{if(!a)return"-";const t=new Date(a).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric"});return D(t)},z=async()=>{try{const a=await w.getProfile();o.value=a.data}catch(a){console.error("Failed to load profile:",a),d.error("فشل تحميل الملف الشخصي")}},u=()=>{p.value=!1,s.value={name:"",email:"",password:"",password_confirmation:""}},V=async()=>{if(s.value.password&&s.value.password!==s.value.password_confirmation){d.error("كلمة المرور غير متطابقة");return}try{const a={name:s.value.name,email:s.value.email};s.value.password&&(a.password=s.value.password,a.password_confirmation=s.value.password_confirmation);const t=await w.updateProfile(a);o.value=t.data,d.success("تم تحديث الملف الشخصي بنجاح"),u()}catch(a){console.error("Failed to update profile:",a),d.error("فشل تحديث الملف الشخصي")}};return P(()=>{z(),o.value.id&&(s.value.name=o.value.name,s.value.email=o.value.email)}),j(()=>o.value,a=>{a.id&&(s.value.name=a.name,s.value.email=a.email)},{deep:!0}),(a,t)=>(b(),g("div",I,[t[17]||(t[17]=e("div",{class:"flex items-center justify-between"},[e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-900"},"الملف الشخصي"),e("p",{class:"text-gray-500 mt-1"},"إدارة معلوماتك الشخصية")])],-1)),e("div",S,[e("div",T,[e("div",q,[e("div",R,[r(n(_),{size:48,class:"text-white"})]),t[5]||(t[5]=e("div",{class:"absolute bottom-0 right-0 w-8 h-8 bg-green-500 rounded-full border-4 border-white"},null,-1))]),e("div",G,[e("h3",X,i(o.value.name),1),e("p",$,i(o.value.email),1),e("div",A,[e("span",H,i(x(o.value.role)),1),o.value.is_active?(b(),g("span",J," نشط ")):v("",!0)])]),e("button",{onClick:t[0]||(t[0]=l=>p.value=!0),class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors flex items-center gap-2"},[r(n(L),{size:18}),t[6]||(t[6]=B(" تعديل ",-1))])]),e("div",K,[e("div",O,[e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"الاسم الكامل",-1)),e("div",Q,[r(n(_),{size:20,class:"text-gray-400"}),e("span",W,i(o.value.name),1)])]),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"البريد الإلكتروني",-1)),e("div",Y,[r(n(F),{size:20,class:"text-gray-400"}),e("span",Z,i(o.value.email),1)])])]),e("div",ee,[e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"الدور الوظيفي",-1)),e("div",te,[r(n(U),{size:20,class:"text-gray-400"}),e("span",se,i(x(o.value.role)),1)])]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"تاريخ الانضمام",-1)),e("div",ae,[r(n(N),{size:20,class:"text-gray-400"}),e("span",oe,i(k(o.value.created_at)),1)])])])])]),p.value?(b(),g("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:y(u,["self"])},[e("div",le,[e("div",re,[e("div",ne,[t[11]||(t[11]=e("h3",{class:"text-2xl font-bold text-gray-900"},"تعديل الملف الشخصي",-1)),e("button",{onClick:u,class:"text-gray-400 hover:text-gray-600"},[r(n(E),{size:24})])]),e("form",{onSubmit:y(V,["prevent"]),class:"space-y-4"},[e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"الاسم الكامل",-1)),m(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>s.value.name=l),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"أدخل الاسم الكامل"},null,512),[[c,s.value.name]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"البريد الإلكتروني",-1)),m(e("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>s.value.email=l),type:"email",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"أدخل البريد الإلكتروني"},null,512),[[c,s.value.email]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"كلمة المرور الجديدة (اختياري)",-1)),m(e("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>s.value.password=l),type:"password",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"اتركه فارغاً إذا لم ترغب في التغيير"},null,512),[[c,s.value.password]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"تأكيد كلمة المرور",-1)),m(e("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>s.value.password_confirmation=l),type:"password",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"أعد إدخال كلمة المرور"},null,512),[[c,s.value.password_confirmation]])]),e("div",{class:"flex gap-3 pt-4"},[t[16]||(t[16]=e("button",{type:"submit",class:"flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors"}," حفظ التغييرات ",-1)),e("button",{type:"button",onClick:u,class:"px-4 py-3 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg font-medium transition-colors"}," إلغاء ")])],32)])])])):v("",!0)]))}};export{be as default};
