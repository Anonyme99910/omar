import{u as De,b as We,r as n,i as Q,f as Ee,c as u,o as r,k as q,w as R,d as t,e as h,l as $,v as _,m as p,F as N,n as G,t as i,x as M,y as ve,q as Oe,A as Je,z as P}from"./index-BNCt9Jm8.js";import{f as T,t as ee}from"./numbers-BTmV-EI5.js";import{S as ge}from"./search-D81t8ZZR.js";import{U as Re}from"./user-plus-CPrTn6Wy.js";import{P as Ge}from"./package-CmzmibQd.js";import{S as He}from"./shopping-cart-CF2WirSj.js";import{c as Ke}from"./createLucideIcon-DbmuNqgQ.js";import{P as Xe}from"./plus-CmXPqHrk.js";import{T as Ye}from"./trash-2-C_g2Jbic.js";/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=Ke("MinusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}]]),et={class:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl mx-4 max-h-[90vh] flex flex-col relative"},tt={class:"p-8 pb-4"},st={class:"relative"},at={key:0,class:"absolute right-3 top-3.5"},ot={class:"flex-1 overflow-y-auto px-8 space-y-3"},lt=["onClick"],nt={class:"flex items-center justify-between"},rt={class:"font-bold text-lg text-gray-900"},ut={class:"text-sm text-gray-600"},it={class:"p-8 pt-4 border-t bg-white rounded-b-2xl"},dt={class:"bg-white rounded-2xl shadow-2xl w-full max-w-md mx-4 p-6"},ct={class:"text-gray-600 mb-6 text-center"},pt={class:"space-y-4"},vt={class:"flex gap-3"},gt={key:0,class:"space-y-4 p-4 bg-gray-50 rounded-lg"},mt={key:2,class:"flex flex-col lg:flex-row h-screen bg-gray-50"},yt={class:"flex-1 p-2 sm:p-4 overflow-y-auto"},ft={class:"card"},bt={class:"relative"},xt=["placeholder"],ht={key:0,class:"absolute left-12 top-3.5"},wt={class:"flex justify-center"},kt={class:"inline-flex rounded-lg border-2 border-primary-600 p-1 bg-white shadow-md"},_t={class:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2 sm:gap-4"},Ct=["onClick"],qt={class:"aspect-square bg-gray-100 rounded-lg mb-3 flex items-center justify-center overflow-hidden"},Pt=["src","alt"],$t={class:"font-bold text-gray-900 mb-1 truncate"},Mt={key:0,class:"text-sm text-gray-500 mb-2"},jt={key:1,class:"text-sm text-gray-500 mb-2 line-clamp-2"},St={class:"flex items-center justify-between"},Ft={class:"text-lg font-bold text-primary-600"},Lt={class:"w-full lg:w-96 bg-white border-t lg:border-t-0 lg:border-l border-gray-200 flex flex-col max-h-screen lg:h-auto"},Vt={class:"flex-1 p-2 sm:p-4 overflow-y-auto"},zt={class:"mb-4 p-3 bg-primary-50 rounded-lg border border-primary-200"},Ut={class:"flex items-center justify-between mb-2"},It={class:"font-bold text-gray-900"},Tt={class:"text-xs text-gray-600"},At={class:"text-xl font-bold mb-4 flex items-center gap-2"},Bt={class:"space-y-3 mb-4 max-h-64 overflow-y-auto"},Qt={key:0,class:"text-center py-8 text-gray-500"},Nt={class:"flex-1"},Dt={class:"font-medium text-sm"},Wt={class:"text-xs text-gray-500"},Et={key:0,class:"text-xs text-primary-600 font-medium mt-1"},Ot={class:"flex items-center gap-2"},Jt=["onClick"],Rt=["value","onInput","onBlur","max"],Gt=["onClick"],Ht=["onClick"],Kt={class:"border-t pt-4 space-y-2"},Xt={class:"flex justify-between text-sm"},Yt={class:"font-bold"},Zt={class:"flex justify-between text-sm"},es={class:"flex justify-between text-sm"},ts={class:"flex justify-between text-lg font-bold border-t pt-2"},ss={class:"text-primary-600"},as={class:"flex justify-between text-sm bg-blue-50 p-2 rounded"},os=["placeholder"],ls={key:0,class:"flex justify-between text-sm text-red-600 font-bold"},ns={class:"mt-4"},rs={class:"grid grid-cols-2 gap-2"},us=["onClick"],is={class:"mt-4 space-y-2"},ds=["disabled"],cs={class:"bg-white rounded-xl p-6 w-full max-w-md relative"},ps={class:"flex gap-3 pt-2"},_s={__name:"POS",setup(vs){const me=De(),d=We(),f=n("products"),j=n([]),D=n([]),S=n([]),W=n([]),w=n([]),v=n([]),F=n(""),C=n(""),y=n(null),E=n(""),L=n(0),V=n(0),A=n(null),H=n("cash"),z=n(!1);n(!1);const K=n(!1);let X=null;const Y=n(!1),O=n(null),m=n("without"),U=n(1),I=n(0),b=n({name:"",phone:"",segment:"ŸÇÿ∑ÿßÿπŸä"}),ye=[{value:"cash",label:"ŸÜŸÇÿØŸä"},{value:"transfer",label:"ÿ™ÿ≠ŸàŸäŸÑ"}],fe=Q(()=>{const a=f.value==="products"?j.value:S.value;return F.value?a:a.slice(0,12)}),be=Q(()=>{if(!C.value)return w.value;const a=C.value.toLowerCase().trim(),e=s=>s.replace(/[ÿ£ÿ•ÿ¢]/g,"ÿß").replace(/[Ÿâ]/g,"Ÿä").replace(/[ÿ©]/g,"Ÿá").replace(/[\u064B-\u065F]/g,""),o=e(a);return w.value.map(s=>{const l=e(s.name.toLowerCase()),c=s.phone.toString();let g=0;if(l===o||c===a)g=1e3;else if(l.startsWith(o)||c.startsWith(a))g=500;else if(l.includes(o)||c.includes(a))g=100;else{let k=0;for(let x=0;x<l.length&&k<o.length;x++)l[x]===o[k]&&(k++,g+=1);k!==o.length&&(g=0)}return{customer:s,score:g}}).filter(s=>s.score>0).sort((s,l)=>l.score-s.score).slice(0,10).map(s=>s.customer)}),te=Q(()=>v.value.reduce((a,e)=>{const o=e.unit_price*e.quantity,s=e.with_packaging?e.packaging_price*e.packaging_quantity:0;return a+o+s},0)),B=Q(()=>te.value+V.value-L.value),se=Q(()=>{const a=A.value||B.value;return Math.max(0,B.value-a)}),xe=()=>{X&&clearTimeout(X),K.value=!0,X=setTimeout(async()=>{f.value==="products"?await he():await we(),K.value=!1},300)},he=async()=>{const a=F.value.trim();if(!a){j.value=D.value.slice(0,12);return}const e=a.toLowerCase(),o=D.value.filter(s=>{var ue,ie,de,ce,pe;const l=s.name_ar.toLowerCase(),c=((ue=s.barcode)==null?void 0:ue.toLowerCase())||"",g=((de=(ie=s.category)==null?void 0:ie.name_ar)==null?void 0:de.toLowerCase())||"",k=((pe=(ce=s.brand)==null?void 0:ce.name_ar)==null?void 0:pe.toLowerCase())||"";if(l.includes(e)||c.includes(e)||g.includes(e)||k.includes(e))return!0;let x=0;for(let Z=0;Z<l.length&&x<e.length;Z++)l[Z]===e[x]&&x++;return x===e.length});if(j.value=o,o.length===0&&a.length>=2)try{const s=await P.getProducts({search:a});j.value=s.data.data||s.data||[]}catch(s){console.error("Search error:",s)}},we=async()=>{const a=F.value.trim();if(!a){S.value=W.value.slice(0,12);return}const e=a.toLowerCase(),o=W.value.filter(s=>{var g;const l=s.name_ar.toLowerCase(),c=((g=s.description)==null?void 0:g.toLowerCase())||"";return l.includes(e)||c.includes(e)});S.value=o},ke=a=>{if(!a)return"";const o=JSON.parse(a)[0];return o.startsWith("data:")?o:`http://localhost/parfumes/backend/public${o}`},_e=a=>{if(!a&&a!==0)return"";const e=String(a).trim();return/\bml\b/i.test(e)||e.includes("ŸÖŸÑ")?e:`${e} ŸÖŸÑ`},Ce=a=>{const e=w.value.find(s=>s.id===y.value),o=(e==null?void 0:e.segment)||"ŸÇÿ∑ÿßÿπŸä";return parseFloat(o==="ÿ¨ŸÖŸÑÿ©"?a.price_ÿ¨ŸÖŸÑÿ©:o==="ÿµŸÅÿ≠ÿ©"?a.price_ÿµŸÅÿ≠ÿ©:a.price_ŸÇÿ∑ÿßÿπŸä)},qe=a=>{if(a.quantity===0){d.error(f.value==="products"?"ÿßŸÑŸÖŸÜÿ™ÿ¨ ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ± ŸÅŸä ÿßŸÑŸÖÿÆÿ≤ŸàŸÜ":"ÿßŸÑÿ®ÿßŸÇÿ© ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ±ÿ© ŸÅŸä ÿßŸÑŸÖÿÆÿ≤ŸàŸÜ");return}O.value=a,m.value="without",U.value=1,I.value=0,Y.value=!0},J=()=>{Y.value=!1,O.value=null,m.value="without",U.value=1,I.value=0},Pe=()=>{const a=O.value;if(!a)return;const e=v.value.find(o=>o.product.id===a.id&&o.with_packaging===(m.value==="with")&&o.packaging_quantity===(m.value==="with"?U.value:null)&&o.packaging_price===(m.value==="with"?I.value:null));if(e){if(e.quantity>=a.quantity){d.error("ÿßŸÑŸÉŸÖŸäÿ© ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ© ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ±ÿ©"),J();return}e.quantity++}else{const o={product:a,quantity:1,unit_price:ne(a),with_packaging:m.value==="with",packaging_quantity:m.value==="with"?U.value:null,packaging_price:m.value==="with"?I.value:null};v.value.push(o)}d.success(f.value==="products"?"ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨ ŸÑŸÑÿ≥ŸÑÿ©":"ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿ®ÿßŸÇÿ© ŸÑŸÑÿ≥ŸÑÿ©"),J()},$e=a=>{if(a.quantity>=a.product.quantity){d.error("ÿßŸÑŸÉŸÖŸäÿ© ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ© ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ±ÿ©");return}a.quantity++},Me=a=>{a.quantity>1?a.quantity--:ae(a)},je=(a,e)=>{const o=parseInt(e)||1;if(o<1){a.quantity=1;return}if(o>a.product.quantity){d.error("ÿßŸÑŸÉŸÖŸäÿ© ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ© ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ±ÿ©"),a.quantity=a.product.quantity;return}a.quantity=o},Se=a=>{a.quantity<1?a.quantity=1:a.quantity>a.product.quantity&&(a.quantity=a.product.quantity,d.error("ÿßŸÑŸÉŸÖŸäÿ© ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ© ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ±ÿ©"))},ae=a=>{v.value=v.value.filter(e=>e.product.id!==a.product.id)},Fe=()=>{v.value.length!==0&&confirm("ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ŸÖÿ≥ÿ≠ ÿßŸÑÿ≥ŸÑÿ©ÿü")&&(v.value=[],L.value=0,V.value=0)},Le=async()=>{var a,e;if(!b.value.name||!b.value.phone){d.error("ÿßŸÑÿ±ÿ¨ÿßÿ° ÿ•ÿØÿÆÿßŸÑ ÿßŸÑÿßÿ≥ŸÖ Ÿàÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ");return}try{const o=await P.createCustomer(b.value),s=o.data.data||o.data;d.success("ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿπŸÖŸäŸÑ ÿ®ŸÜÿ¨ÿßÿ≠"),w.value.unshift(s),y.value=s.id,E.value=s.name,z.value=!1,b.value={name:"",phone:"",segment:"ŸÇÿ∑ÿßÿπŸä"},d.info(`ÿ™ŸÖ ÿßÿÆÿ™Ÿäÿßÿ±: ${s.name}`)}catch(o){console.error("Error adding customer:",o),d.error(((e=(a=o.response)==null?void 0:a.data)==null?void 0:e.message)||"ŸÅÿ¥ŸÑ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿπŸÖŸäŸÑ")}},Ve=async()=>{var e,o,s;if(v.value.length===0)return;const a={customer_id:y.value===0?null:y.value,items:v.value.map(l=>({product_id:l.product.id,quantity:l.quantity,unit_price:l.unit_price,with_packaging:l.with_packaging||!1,packaging_quantity:l.packaging_quantity||null,packaging_price:l.packaging_price||null})),tax:V.value,discount:L.value,paid_amount:A.value||B.value,payment_method:H.value};try{const l=await P.createSale(a),c=ee(l.data.invoice_number);d.success(`ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ© ${c}`);const g=[];if(confirm("ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ© PDFÿü"))try{await P.downloadInvoicePdf(l.data.id),d.success("ÿ™ŸÖ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ© ÿ®ŸÜÿ¨ÿßÿ≠")}catch(k){console.error("PDF Error:",k),d.error("ŸÅÿ¥ŸÑ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ© PDF")}(e=l.data.customer)!=null&&e.phone&&confirm("ŸáŸÑ ÿ™ÿ±ŸäÿØ ŸÖÿ¥ÿßÿ±ŸÉÿ© ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ© ÿπÿ®ÿ± Ÿàÿßÿ™ÿ≥ÿßÿ®ÿü")&&ze(l.data),v.value=[],L.value=0,V.value=0,A.value=null,oe()}catch(l){d.error(((s=(o=l.response)==null?void 0:o.data)==null?void 0:s.error)||"ŸÅÿ¥ŸÑ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ©")}},ze=async a=>{var e,o,s;try{const l=await P.getWhatsAppMessage(a.id),{message:c,phone:g}=l.data;if(!g){d.error("ŸÑÿß ŸäŸàÿ¨ÿØ ÿ±ŸÇŸÖ Ÿáÿßÿ™ŸÅ ŸÑŸÑÿπŸÖŸäŸÑ");return}const x=`https://wa.me/${g.replace(/[^0-9]/g,"")}?text=${encodeURIComponent(c)}`;window.open(x,"_blank"),d.success("ÿ™ŸÖ ŸÅÿ™ÿ≠ Ÿàÿßÿ™ÿ≥ÿßÿ® ÿ®ŸÜÿ¨ÿßÿ≠")}catch(l){console.error("WhatsApp Error:",l),console.error("Error details:",(e=l.response)==null?void 0:e.data),d.error("ŸÅÿ¥ŸÑ ŸÖÿ¥ÿßÿ±ŸÉÿ© ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ© ÿπÿ®ÿ± Ÿàÿßÿ™ÿ≥ÿßÿ®: "+(((s=(o=l.response)==null?void 0:o.data)==null?void 0:s.message)||l.message))}},oe=async()=>{try{const a=await P.getProducts(),e=a.data.data||a.data||[];D.value=e,j.value=e}catch(a){console.error("Failed to load products:",a),D.value=[],j.value=[]}},Ue=async()=>{console.log("üì• Fetching customers...");try{const a=await P.getCustomers();w.value=a.data.data||a.data||[],console.log("‚úÖ Customers loaded:",w.value.length)}catch(a){console.error("‚ùå Failed to load customers:",a),w.value=[]}},Ie=async()=>{try{const a=await P.getPackages(),e=a.data.data||a.data||[];W.value=e,S.value=e}catch(a){console.error("Failed to load packages:",a),W.value=[],S.value=[]}},le=a=>{f.value=a,F.value="",a==="packages"&&S.value.length===0&&Ie()},ne=a=>f.value==="products"?Ce(a):Te(a),Te=a=>{const e=w.value.find(s=>s.id===y.value),o=(e==null?void 0:e.segment)||"ŸÇÿ∑ÿßÿπŸä";return parseFloat(o==="ÿ¨ŸÖŸÑÿ©"?a.price_ÿ¨ŸÖŸÑÿ©:o==="ÿµŸÅÿ≠ÿ©"?a.price_ÿµŸÅÿ≠ÿ©:a.price_ŸÇÿ∑ÿßÿπŸä)},Ae=()=>{me.back()},Be=()=>{z.value=!0},re=(a,e)=>{y.value=a,E.value=e,C.value="",d.success(`ÿ™ŸÖ ÿßÿÆÿ™Ÿäÿßÿ±: ${e}`)},Qe=()=>{v.value.length>0&&!confirm("ÿ≥Ÿäÿ™ŸÖ ŸÖÿ≥ÿ≠ ÿßŸÑÿ≥ŸÑÿ© ÿßŸÑÿ≠ÿßŸÑŸäÿ©. ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿßŸÑŸÖÿ™ÿßÿ®ÿπÿ©ÿü")||(v.value=[],y.value=null,E.value="",C.value="")},Ne=()=>{if(y.value===0||y.value===null)return"ŸÇÿ∑ÿßÿπŸä";const a=w.value.find(e=>e.id===y.value);return(a==null?void 0:a.segment)||"ŸÇÿ∑ÿßÿπŸä"};return Ee(()=>{oe(),Ue()}),(a,e)=>{var o;return r(),u(N,null,[y.value===null?(r(),u("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:R(Ae,["self"])},[t("div",et,[t("button",{onClick:e[0]||(e[0]=s=>a.$router.back()),class:"absolute top-4 left-4 text-gray-400 hover:text-gray-600 transition-colors z-10",title:"ÿßŸÑŸÇÿßÿ¶ŸÖÿ©"},[...e[20]||(e[20]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])]),t("div",tt,[e[22]||(e[22]=t("div",{class:"text-center mb-6"},[t("h2",{class:"text-3xl font-bold text-gray-900 mb-2"},"ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ŸÉ ŸÅŸä ŸÜŸÇÿ∑ÿ© ÿßŸÑÿ®Ÿäÿπ"),t("p",{class:"text-gray-600"},"ÿßÿÆÿ™ÿ± ÿßŸÑÿπŸÖŸäŸÑ ŸÑŸÑŸÖÿ™ÿßÿ®ÿπÿ©")],-1)),t("div",st,[h(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>C.value=s),type:"text",placeholder:"ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ÿπŸÖŸäŸÑ ÿ®ÿßŸÑÿßÿ≥ŸÖ ÿ£Ÿà ÿßŸÑŸáÿßÿ™ŸÅ...",class:"input pl-10 text-lg",autofocus:""},null,512),[[_,C.value]]),$(p(ge),{class:"absolute left-3 top-3.5 text-gray-400",size:24}),C.value?(r(),u("div",at,[t("button",{onClick:e[2]||(e[2]=s=>C.value=""),class:"text-gray-400 hover:text-gray-600"},[...e[21]||(e[21]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):q("",!0)])]),t("div",ot,[t("button",{onClick:e[3]||(e[3]=s=>re(0,"ÿπŸÖŸäŸÑ ÿπÿßÿØŸä")),class:"w-full p-4 bg-gradient-to-r from-gray-100 to-gray-200 hover:from-gray-200 hover:to-gray-300 rounded-xl text-right transition-all border-2 border-transparent hover:border-primary-500"},[...e[23]||(e[23]=[t("div",{class:"flex items-center justify-between"},[t("div",null,[t("p",{class:"font-bold text-lg text-gray-900"},"ÿπŸÖŸäŸÑ ÿπÿßÿØŸä"),t("p",{class:"text-sm text-gray-600"},"ÿ≥ÿπÿ± ŸÇÿ∑ÿßÿπŸä")]),t("div",{class:"bg-primary-100 text-primary-700 px-3 py-1 rounded-full text-sm font-medium"}," ŸÇÿ∑ÿßÿπŸä ")],-1)])]),(r(!0),u(N,null,G(be.value,s=>(r(),u("button",{key:s.id,onClick:l=>re(s.id,s.name),class:"w-full p-4 bg-white hover:bg-gray-50 rounded-xl text-right transition-all border-2 border-gray-200 hover:border-primary-500"},[t("div",nt,[t("div",null,[t("p",rt,i(s.name),1),t("p",ut,i(s.phone),1)]),t("div",{class:M(["px-3 py-1 rounded-full text-sm font-medium",{"bg-blue-100 text-blue-700":s.segment==="ÿ¨ŸÖŸÑÿ©","bg-green-100 text-green-700":s.segment==="ŸÇÿ∑ÿßÿπŸä","bg-purple-100 text-purple-700":s.segment==="ÿµŸÅÿ≠ÿ©"}])},i(s.segment),3)])],8,lt))),128))]),t("div",it,[t("button",{onClick:Be,class:"w-full btn btn-primary flex items-center justify-center gap-2",type:"button"},[$(p(Re),{size:20}),e[24]||(e[24]=ve(" ÿ•ÿ∂ÿßŸÅÿ© ÿπŸÖŸäŸÑ ÿ¨ÿØŸäÿØ ",-1))])])])])):q("",!0),Y.value?(r(),u("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:R(J,["self"])},[t("div",dt,[e[27]||(e[27]=t("h3",{class:"text-2xl font-bold text-gray-900 mb-4 text-center"},"ÿ•ÿ∂ÿßŸÅÿ© ÿπŸÑÿ®ÿ©",-1)),t("p",ct,i((o=O.value)==null?void 0:o.name_ar),1),t("div",pt,[t("div",vt,[t("button",{onClick:e[4]||(e[4]=s=>m.value="with"),class:M(["flex-1 py-3 px-4 rounded-lg font-medium transition-all border-2",m.value==="with"?"bg-primary-600 text-white border-primary-600":"bg-white text-gray-700 border-gray-300 hover:border-primary-400"])}," ŸÖÿπ ÿπŸÑÿ®ÿ© ",2),t("button",{onClick:e[5]||(e[5]=s=>m.value="without"),class:M(["flex-1 py-3 px-4 rounded-lg font-medium transition-all border-2",m.value==="without"?"bg-primary-600 text-white border-primary-600":"bg-white text-gray-700 border-gray-300 hover:border-primary-400"])}," ÿ®ÿØŸàŸÜ ÿπŸÑÿ®ÿ© ",2)]),m.value==="with"?(r(),u("div",gt,[t("div",null,[e[25]||(e[25]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"ÿπÿØÿØ ÿßŸÑÿπŸÑÿ®",-1)),h(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>U.value=s),type:"number",min:"1",class:"input",placeholder:"1"},null,512),[[_,U.value,void 0,{number:!0}]])]),t("div",null,[e[26]||(e[26]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"ÿ≥ÿπÿ± ÿßŸÑÿπŸÑÿ®ÿ©",-1)),h(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>I.value=s),type:"number",step:"0.01",min:"0",class:"input",placeholder:"0.00"},null,512),[[_,I.value,void 0,{number:!0}]])])])):q("",!0),t("div",{class:"flex gap-3 mt-6"},[t("button",{onClick:J,class:"flex-1 py-3 px-4 bg-gray-200 text-gray-700 rounded-lg font-medium hover:bg-gray-300 transition-colors"}," ÿ•ŸÑÿ∫ÿßÿ° "),t("button",{onClick:Pe,class:"flex-1 py-3 px-4 bg-primary-600 text-white rounded-lg font-medium hover:bg-primary-700 transition-colors"}," ÿ•ÿ∂ÿßŸÅÿ© ŸÑŸÑÿ≥ŸÑÿ© ")])])])])):(r(),u("div",mt,[t("div",yt,[t("div",ft,[t("div",bt,[h(t("input",{"onUpdate:modelValue":e[8]||(e[8]=s=>F.value=s),onInput:xe,type:"text",placeholder:f.value==="products"?"ÿßÿ®ÿ≠ÿ´ ÿ®ÿßŸÑÿßÿ≥ŸÖ ÿ£Ÿà ÿßŸÑÿ®ÿßÿ±ŸÉŸàÿØ ÿ£Ÿà ÿßŸÑŸÅÿ¶ÿ©...":"ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ÿ®ÿßŸÇÿ©...",class:"input pl-10 text-lg",autofocus:""},null,40,xt),[[_,F.value]]),$(p(ge),{class:"absolute left-3 top-3.5 text-gray-400",size:24}),K.value?(r(),u("div",ht,[...e[28]||(e[28]=[t("div",{class:"animate-spin rounded-full h-5 w-5 border-b-2 border-primary-600"},null,-1)])])):q("",!0)])]),t("div",wt,[t("div",kt,[t("button",{onClick:e[9]||(e[9]=s=>le("products")),class:M(["px-6 py-2 rounded-md font-medium transition-all",f.value==="products"?"bg-primary-600 text-white shadow-md":"text-gray-700 hover:bg-gray-100"])}," ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ ",2),t("button",{onClick:e[10]||(e[10]=s=>le("packages")),class:M(["px-6 py-2 rounded-md font-medium transition-all",f.value==="packages"?"bg-primary-600 text-white shadow-md":"text-gray-700 hover:bg-gray-100"])}," ÿßŸÑÿ®ÿßŸÇÿßÿ™ ",2)])]),t("div",_t,[(r(!0),u(N,null,G(fe.value,s=>(r(),u("div",{key:s.id,onClick:l=>qe(s),class:"card hover:shadow-lg cursor-pointer transition-all hover:scale-105"},[t("div",qt,[s.photos&&JSON.parse(s.photos)[0]?(r(),u("img",{key:0,src:ke(s.photos),alt:s.name_ar,class:"w-full h-full object-cover"},null,8,Pt)):(r(),Oe(p(Ge),{key:1,size:48,class:"text-gray-400"}))]),t("h4",$t,i(s.name_ar),1),f.value==="products"?(r(),u("p",Mt,i(_e(s.volume_ml)),1)):(r(),u("p",jt,i(s.description||"ÿ®ÿßŸÇÿ©"),1)),t("div",St,[t("span",Ft,i(p(T)(ne(s))),1),t("span",{class:M(["text-xs badge",s.quantity>0?"badge-success":"badge-danger"])},i(p(ee)(s.quantity))+" ŸÇÿ∑ÿπÿ© ",3)])],8,Ct))),128))])]),t("div",Lt,[t("div",Vt,[t("div",zt,[t("div",Ut,[t("div",null,[e[29]||(e[29]=t("p",{class:"text-sm text-gray-600"},"ÿßŸÑÿπŸÖŸäŸÑ ÿßŸÑÿ≠ÿßŸÑŸä",-1)),t("p",It,i(E.value),1)]),t("button",{onClick:Qe,class:"text-sm text-primary-600 hover:text-primary-800 font-medium"}," ÿ™ÿ∫ŸäŸäÿ± ")]),t("div",Tt," ÿßŸÑÿ≥ÿπÿ±: "+i(Ne()),1)]),t("h3",At,[$(p(He),{size:24}),e[30]||(e[30]=ve(" ÿ≥ŸÑÿ© ÿßŸÑŸÖÿ¥ÿ™ÿ±Ÿäÿßÿ™ ",-1))]),t("div",Bt,[v.value.length===0?(r(),u("div",Qt," ÿßŸÑÿ≥ŸÑÿ© ŸÅÿßÿ±ÿ∫ÿ© ")):q("",!0),(r(!0),u(N,null,G(v.value,(s,l)=>(r(),u("div",{key:`${s.product.id}-${l}`,class:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg"},[t("div",Nt,[t("p",Dt,i(s.product.name_ar),1),t("p",Wt,i(p(T)(s.unit_price)),1),s.with_packaging?(r(),u("p",Et," üì¶ ŸÖÿπ ÿπŸÑÿ®ÿ© ("+i(p(ee)(s.packaging_quantity))+" √ó "+i(p(T)(s.packaging_price))+") ",1)):q("",!0)]),t("div",Ot,[t("button",{onClick:c=>Me(s),class:"w-7 h-7 rounded bg-gray-200 hover:bg-gray-300 flex items-center justify-center"},[$(p(Ze),{size:16})],8,Jt),t("input",{value:s.quantity,onInput:c=>je(s,c.target.value),onBlur:c=>Se(s),type:"number",min:"1",max:s.product.quantity,class:"w-12 text-center font-bold border rounded py-1 text-sm"},null,40,Rt),t("button",{onClick:c=>$e(s),class:"w-7 h-7 rounded bg-gray-200 hover:bg-gray-300 flex items-center justify-center"},[$(p(Xe),{size:16})],8,Gt)]),t("button",{onClick:c=>ae(s),class:"text-red-600 hover:text-red-800"},[$(p(Ye),{size:18})],8,Ht)]))),128))]),t("div",Kt,[t("div",Xt,[e[31]||(e[31]=t("span",null,"ÿßŸÑŸÖÿ¨ŸÖŸàÿπ ÿßŸÑŸÅÿ±ÿπŸä:",-1)),t("span",Yt,i(p(T)(te.value)),1)]),t("div",Zt,[e[32]||(e[32]=t("span",null,"ÿßŸÑÿÆÿµŸÖ:",-1)),h(t("input",{"onUpdate:modelValue":e[11]||(e[11]=s=>L.value=s),type:"number",step:"0.01",class:"input w-32 text-left py-1"},null,512),[[_,L.value,void 0,{number:!0}]])]),t("div",es,[e[33]||(e[33]=t("span",null,"ÿßŸÑÿ∂ÿ±Ÿäÿ®ÿ©:",-1)),h(t("input",{"onUpdate:modelValue":e[12]||(e[12]=s=>V.value=s),type:"number",step:"0.01",class:"input w-32 text-left py-1"},null,512),[[_,V.value,void 0,{number:!0}]])]),t("div",ts,[e[34]||(e[34]=t("span",null,"ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä:",-1)),t("span",ss,i(p(T)(B.value)),1)]),t("div",as,[e[35]||(e[35]=t("span",null,"ÿßŸÑŸÖÿ®ŸÑÿ∫ ÿßŸÑŸÖÿØŸÅŸàÿπ:",-1)),h(t("input",{"onUpdate:modelValue":e[13]||(e[13]=s=>A.value=s),type:"number",step:"0.01",placeholder:B.value.toString(),class:"input w-32 text-left py-1"},null,8,os),[[_,A.value,void 0,{number:!0}]])]),se.value>0?(r(),u("div",ls,[e[36]||(e[36]=t("span",null,"ÿßŸÑŸÖÿ™ÿ®ŸÇŸä:",-1)),t("span",null,i(p(T)(se.value)),1)])):q("",!0)]),t("div",ns,[e[37]||(e[37]=t("label",{class:"block text-sm font-medium mb-2"},"ÿ∑ÿ±ŸäŸÇÿ© ÿßŸÑÿØŸÅÿπ",-1)),t("div",rs,[(r(),u(N,null,G(ye,s=>t("button",{key:s.value,onClick:l=>H.value=s.value,class:M([H.value===s.value?"bg-primary-600 text-white":"bg-gray-100","py-2 rounded-lg font-medium transition-all"])},i(s.label),11,us)),64))])]),t("div",is,[t("button",{onClick:Ve,disabled:v.value.length===0,class:"btn btn-success w-full py-3 text-lg"}," ÿ•ÿ™ŸÖÿßŸÖ ÿßŸÑÿ®Ÿäÿπ ",8,ds),t("button",{onClick:Fe,class:"btn btn-secondary w-full"}," ŸÖÿ≥ÿ≠ ÿßŸÑÿ≥ŸÑÿ© ")])])])])),z.value?(r(),u("div",{key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]",onClick:e[19]||(e[19]=R(s=>z.value=!1,["self"]))},[t("div",cs,[t("button",{onClick:e[14]||(e[14]=s=>z.value=!1),class:"absolute top-4 left-4 text-gray-400 hover:text-gray-600 transition-colors",title:"ÿ•ÿ∫ŸÑÿßŸÇ"},[...e[38]||(e[38]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),e[44]||(e[44]=t("h3",{class:"text-2xl font-bold mb-4"},"ÿ•ÿ∂ÿßŸÅÿ© ÿπŸÖŸäŸÑ ÿ¨ÿØŸäÿØ",-1)),t("form",{onSubmit:R(Le,["prevent"]),class:"space-y-4"},[t("div",null,[e[39]||(e[39]=t("label",{class:"block text-sm font-medium mb-2"},"ÿßŸÑÿßÿ≥ŸÖ *",-1)),h(t("input",{"onUpdate:modelValue":e[15]||(e[15]=s=>b.value.name=s),type:"text",required:"",class:"input",placeholder:"ÿ£ÿ≠ŸÖÿØ ŸÖÿ≠ŸÖÿØ",autofocus:""},null,512),[[_,b.value.name]])]),t("div",null,[e[40]||(e[40]=t("label",{class:"block text-sm font-medium mb-2"},"ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ *",-1)),h(t("input",{"onUpdate:modelValue":e[16]||(e[16]=s=>b.value.phone=s),type:"tel",required:"",class:"input",placeholder:"01012345678",pattern:"[0-9]{11}",title:"ÿßŸÑÿ±ÿ¨ÿßÿ° ÿ•ÿØÿÆÿßŸÑ ÿ±ŸÇŸÖ Ÿáÿßÿ™ŸÅ ÿµÿ≠Ÿäÿ≠ (11 ÿ±ŸÇŸÖ)"},null,512),[[_,b.value.phone]])]),t("div",null,[e[42]||(e[42]=t("label",{class:"block text-sm font-medium mb-2"},"ÿßŸÑÿ¥ÿ±Ÿäÿ≠ÿ©",-1)),h(t("select",{"onUpdate:modelValue":e[17]||(e[17]=s=>b.value.segment=s),class:"input"},[...e[41]||(e[41]=[t("option",{value:"ŸÇÿ∑ÿßÿπŸä"},"ŸÇÿ∑ÿßÿπŸä",-1),t("option",{value:"ÿ¨ŸÖŸÑÿ©"},"ÿ¨ŸÖŸÑÿ©",-1),t("option",{value:"ÿµŸÅÿ≠ÿ©"},"ÿµŸÅÿ≠ÿ©",-1)])],512),[[Je,b.value.segment]])]),t("div",ps,[t("button",{type:"button",onClick:e[18]||(e[18]=s=>z.value=!1),class:"btn btn-secondary flex-1"},"ÿ•ŸÑÿ∫ÿßÿ°"),e[43]||(e[43]=t("button",{type:"submit",class:"btn btn-primary flex-1"},"ÿ≠ŸÅÿ∏ Ÿàÿ•ÿ∂ÿßŸÅÿ©",-1))])],32)])])):q("",!0)],64)}}};export{_s as default};
