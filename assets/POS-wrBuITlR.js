import{u as ze,b as Ue,r,C as Ie,i as U,f as Ve,c as d,o as u,k as I,w as R,d as t,y as H,t as i,e as k,l as P,v as M,m,F as V,n as E,x as A,q as Ae,A as Be,z as _}from"./index-C31empxd.js";import{f as B,t as G}from"./numbers-BTmV-EI5.js";import{S as ue}from"./search-CVguXGpN.js";import{U as Ne}from"./user-plus-Bs01K0ef.js";import{P as De}from"./package-BssZ9Vte.js";import{S as Te}from"./shopping-cart-BnjFne0u.js";import{c as Ee}from"./createLucideIcon-Cp3fOa0Y.js";import{P as Qe}from"./plus-DOjFhAop.js";import{T as Oe}from"./trash-2-Dp0T_BS3.js";/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=Ee("MinusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}]]),Je={class:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto relative"},Re={class:"text-center mb-8"},He={class:"mt-2 p-2 bg-yellow-100 border border-yellow-300 rounded text-xs text-left",dir:"ltr"},Ge={class:"mb-6"},Ke={class:"relative"},Xe={key:0,class:"absolute right-3 top-3.5"},Ye={class:"space-y-3 max-h-96 overflow-y-auto mb-6"},Ze=["onClick"],et={class:"flex items-center justify-between"},tt={class:"font-bold text-lg text-gray-900"},st={class:"text-sm text-gray-600"},ot={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},lt={class:"lg:col-span-2 space-y-4"},at={class:"card"},nt={class:"relative"},rt=["placeholder"],ut={key:0,class:"absolute left-12 top-3.5"},it={class:"flex justify-center"},dt={class:"inline-flex rounded-lg border-2 border-primary-600 p-1 bg-white shadow-md"},ct={class:"grid grid-cols-2 md:grid-cols-3 gap-4"},pt=["onClick"],vt={class:"aspect-square bg-gray-100 rounded-lg mb-3 flex items-center justify-center overflow-hidden"},mt=["src","alt"],gt={class:"font-bold text-gray-900 mb-1 truncate"},ft={key:0,class:"text-sm text-gray-500 mb-2"},yt={key:1,class:"text-sm text-gray-500 mb-2 line-clamp-2"},bt={class:"flex items-center justify-between"},xt={class:"text-lg font-bold text-primary-600"},ht={class:"space-y-4"},wt={class:"card sticky top-24"},kt={class:"mb-4 p-3 bg-primary-50 rounded-lg border border-primary-200"},_t={class:"flex items-center justify-between mb-2"},Ct={class:"font-bold text-gray-900"},Pt={class:"text-xs text-gray-600"},Mt={class:"text-xl font-bold mb-4 flex items-center gap-2"},qt={class:"space-y-3 mb-4 max-h-64 overflow-y-auto"},St={key:0,class:"text-center py-8 text-gray-500"},$t={class:"flex-1"},jt={class:"font-medium text-sm"},Ft={class:"text-xs text-gray-500"},Lt={class:"flex items-center gap-2"},zt=["onClick"],Ut={class:"w-8 text-center font-bold"},It=["onClick"],Vt=["onClick"],At={class:"border-t pt-4 space-y-2"},Bt={class:"flex justify-between text-sm"},Nt={class:"font-bold"},Dt={class:"flex justify-between text-sm"},Tt={class:"flex justify-between text-sm"},Et={class:"flex justify-between text-lg font-bold border-t pt-2"},Qt={class:"text-primary-600"},Ot={class:"flex justify-between text-sm bg-blue-50 p-2 rounded"},Wt=["placeholder"],Jt={key:0,class:"flex justify-between text-sm text-red-600 font-bold"},Rt={class:"mt-4"},Ht={class:"grid grid-cols-3 gap-2"},Gt=["onClick"],Kt={class:"mt-4 space-y-2"},Xt=["disabled"],Yt={class:"bg-white rounded-xl p-6 w-full max-w-md relative"},Zt={class:"flex gap-3 pt-2"},ds={__name:"POS",setup(es){const ie=ze(),c=Ue(),f=r("products"),q=r([]),N=r([]),S=r([]),D=r([]),y=r([]),p=r([]),$=r(""),w=r(""),n=r(null),T=r("");console.log("üîß POS.vue initialized"),console.log("üìä Initial selectedCustomer:",n.value),Ie(n,(o,e)=>{console.log("üëÅÔ∏è selectedCustomer changed!"),console.log("  - Old value:",e,"type:",typeof e),console.log("  - New value:",o,"type:",typeof o),console.log("  - Modal condition (selectedCustomer === null):",o===null),console.log("  - Modal should be:",o===null?"VISIBLE":"HIDDEN")});const j=r(0),F=r(0),L=r(null),Q=r("cash"),C=r(!1);r(!1);const O=r(!1);let W=null;const b=r({name:"",phone:"",segment:"ŸÇÿ∑ÿßÿπŸä"}),de=[{value:"cash",label:"ŸÜŸÇÿØŸä"},{value:"card",label:"ÿ®ÿ∑ÿßŸÇÿ©"},{value:"transfer",label:"ÿ™ÿ≠ŸàŸäŸÑ"}],ce=U(()=>{const o=f.value==="products"?q.value:S.value;return $.value?o:o.slice(0,12)}),pe=U(()=>{if(console.log("üîç filteredCustomers computed, customers count:",y.value.length),!w.value)return y.value;const o=w.value.toLowerCase().trim(),e=l=>l.replace(/[ÿ£ÿ•ÿ¢]/g,"ÿß").replace(/[Ÿâ]/g,"Ÿä").replace(/[ÿ©]/g,"Ÿá").replace(/[\u064B-\u065F]/g,""),s=e(o);return y.value.map(l=>{const a=e(l.name.toLowerCase()),g=l.phone.toString();let v=0;if(a===s||g===o)v=1e3;else if(a.startsWith(s)||g.startsWith(o))v=500;else if(a.includes(s)||g.includes(o))v=100;else{let h=0;for(let x=0;x<a.length&&h<s.length;x++)a[x]===s[h]&&(h++,v+=1);h!==s.length&&(v=0)}return{customer:l,score:v}}).filter(l=>l.score>0).sort((l,a)=>a.score-l.score).slice(0,10).map(l=>l.customer)}),K=U(()=>p.value.reduce((o,e)=>o+e.unit_price*e.quantity,0)),z=U(()=>K.value+F.value-j.value),X=U(()=>{const o=L.value||z.value;return Math.max(0,z.value-o)}),ve=()=>{W&&clearTimeout(W),O.value=!0,W=setTimeout(async()=>{f.value==="products"?await me():await ge(),O.value=!1},300)},me=async()=>{const o=$.value.trim();if(!o){q.value=N.value.slice(0,12);return}const e=o.toLowerCase(),s=N.value.filter(l=>{var oe,le,ae,ne,re;const a=l.name_ar.toLowerCase(),g=((oe=l.barcode)==null?void 0:oe.toLowerCase())||"",v=((ae=(le=l.category)==null?void 0:le.name_ar)==null?void 0:ae.toLowerCase())||"",h=((re=(ne=l.brand)==null?void 0:ne.name_ar)==null?void 0:re.toLowerCase())||"";if(a.includes(e)||g.includes(e)||v.includes(e)||h.includes(e))return!0;let x=0;for(let J=0;J<a.length&&x<e.length;J++)a[J]===e[x]&&x++;return x===e.length});if(q.value=s,s.length===0&&o.length>=2)try{const l=await _.getProducts({search:o});q.value=l.data.data||l.data||[]}catch(l){console.error("Search error:",l)}},ge=async()=>{const o=$.value.trim();if(!o){S.value=D.value.slice(0,12);return}const e=o.toLowerCase(),s=D.value.filter(l=>{var v;const a=l.name_ar.toLowerCase(),g=((v=l.description)==null?void 0:v.toLowerCase())||"";return a.includes(e)||g.includes(e)});S.value=s},fe=o=>{if(!o)return"";const s=JSON.parse(o)[0];return s.startsWith("data:")?s:`http://localhost/parfumes/backend/public${s}`},ye=o=>{if(!o&&o!==0)return"";const e=String(o).trim();return/\bml\b/i.test(e)||e.includes("ŸÖŸÑ")?e:`${e} ŸÖŸÑ`},be=o=>{const e=y.value.find(l=>l.id===n.value),s=(e==null?void 0:e.segment)||"ŸÇÿ∑ÿßÿπŸä";return parseFloat(s==="ÿ¨ŸÖŸÑÿ©"?o.price_ÿ¨ŸÖŸÑÿ©:s==="ÿµŸÅÿ≠ÿ©"?o.price_ÿµŸÅÿ≠ÿ©:o.price_ŸÇÿ∑ÿßÿπŸä)},xe=o=>{if(o.quantity===0){c.error(f.value==="products"?"ÿßŸÑŸÖŸÜÿ™ÿ¨ ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ± ŸÅŸä ÿßŸÑŸÖÿÆÿ≤ŸàŸÜ":"ÿßŸÑÿ®ÿßŸÇÿ© ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ±ÿ© ŸÅŸä ÿßŸÑŸÖÿÆÿ≤ŸàŸÜ");return}const e=p.value.find(s=>s.product.id===o.id);if(e){if(e.quantity>=o.quantity){c.error("ÿßŸÑŸÉŸÖŸäÿ© ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ© ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ±ÿ©");return}e.quantity++}else p.value.push({product:o,quantity:1,unit_price:te(o)});c.success(f.value==="products"?"ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨ ŸÑŸÑÿ≥ŸÑÿ©":"ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿ®ÿßŸÇÿ© ŸÑŸÑÿ≥ŸÑÿ©")},he=o=>{if(o.quantity>=o.product.quantity){c.error("ÿßŸÑŸÉŸÖŸäÿ© ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ© ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ±ÿ©");return}o.quantity++},we=o=>{o.quantity>1?o.quantity--:Y(o)},Y=o=>{p.value=p.value.filter(e=>e.product.id!==o.product.id)},ke=()=>{p.value.length!==0&&confirm("ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ŸÖÿ≥ÿ≠ ÿßŸÑÿ≥ŸÑÿ©ÿü")&&(p.value=[],j.value=0,F.value=0)},_e=async()=>{var o,e;if(!b.value.name||!b.value.phone){c.error("ÿßŸÑÿ±ÿ¨ÿßÿ° ÿ•ÿØÿÆÿßŸÑ ÿßŸÑÿßÿ≥ŸÖ Ÿàÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ");return}try{const s=await _.createCustomer(b.value),l=s.data.data||s.data;c.success("ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿπŸÖŸäŸÑ ÿ®ŸÜÿ¨ÿßÿ≠"),y.value.unshift(l),n.value=l.id,T.value=l.name,C.value=!1,b.value={name:"",phone:"",segment:"ŸÇÿ∑ÿßÿπŸä"},c.info(`ÿ™ŸÖ ÿßÿÆÿ™Ÿäÿßÿ±: ${l.name}`)}catch(s){console.error("Error adding customer:",s),c.error(((e=(o=s.response)==null?void 0:o.data)==null?void 0:e.message)||"ŸÅÿ¥ŸÑ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿπŸÖŸäŸÑ")}},Ce=async()=>{var e,s,l;if(p.value.length===0)return;const o={customer_id:n.value===0?null:n.value,items:p.value.map(a=>({product_id:a.product.id,quantity:a.quantity,unit_price:a.unit_price})),tax:F.value,discount:j.value,paid_amount:L.value||z.value,payment_method:Q.value};try{const a=await _.createSale(o),g=G(a.data.invoice_number);c.success(`ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ© ${g}`);const v=[];if(confirm("ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ© PDFÿü"))try{await _.downloadInvoicePdf(a.data.id),c.success("ÿ™ŸÖ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ© ÿ®ŸÜÿ¨ÿßÿ≠")}catch(h){console.error("PDF Error:",h),c.error("ŸÅÿ¥ŸÑ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ© PDF")}(e=a.data.customer)!=null&&e.phone&&confirm("ŸáŸÑ ÿ™ÿ±ŸäÿØ ŸÖÿ¥ÿßÿ±ŸÉÿ© ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ© ÿπÿ®ÿ± Ÿàÿßÿ™ÿ≥ÿßÿ®ÿü")&&Pe(a.data),p.value=[],j.value=0,F.value=0,L.value=null,Z()}catch(a){c.error(((l=(s=a.response)==null?void 0:s.data)==null?void 0:l.error)||"ŸÅÿ¥ŸÑ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ©")}},Pe=async o=>{var e,s,l;try{const a=await _.getWhatsAppMessage(o.id),{message:g,phone:v}=a.data;if(!v){c.error("ŸÑÿß ŸäŸàÿ¨ÿØ ÿ±ŸÇŸÖ Ÿáÿßÿ™ŸÅ ŸÑŸÑÿπŸÖŸäŸÑ");return}const x=`https://wa.me/${v.replace(/[^0-9]/g,"")}?text=${encodeURIComponent(g)}`;window.open(x,"_blank"),c.success("ÿ™ŸÖ ŸÅÿ™ÿ≠ Ÿàÿßÿ™ÿ≥ÿßÿ® ÿ®ŸÜÿ¨ÿßÿ≠")}catch(a){console.error("WhatsApp Error:",a),console.error("Error details:",(e=a.response)==null?void 0:e.data),c.error("ŸÅÿ¥ŸÑ ŸÖÿ¥ÿßÿ±ŸÉÿ© ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ© ÿπÿ®ÿ± Ÿàÿßÿ™ÿ≥ÿßÿ®: "+(((l=(s=a.response)==null?void 0:s.data)==null?void 0:l.message)||a.message))}},Z=async()=>{try{const o=await _.getProducts(),e=o.data.data||o.data||[];N.value=e,q.value=e}catch(o){console.error("Failed to load products:",o),N.value=[],q.value=[]}},Me=async()=>{console.log("üì• Fetching customers...");try{const o=await _.getCustomers();y.value=o.data.data||o.data||[],console.log("‚úÖ Customers loaded:",y.value.length)}catch(o){console.error("‚ùå Failed to load customers:",o),y.value=[]}},qe=async()=>{try{const o=await _.getPackages(),e=o.data.data||o.data||[];D.value=e,S.value=e}catch(o){console.error("Failed to load packages:",o),D.value=[],S.value=[]}},ee=o=>{f.value=o,$.value="",o==="packages"&&S.value.length===0&&qe()},te=o=>f.value==="products"?be(o):Se(o),Se=o=>{const e=y.value.find(l=>l.id===n.value),s=(e==null?void 0:e.segment)||"ŸÇÿ∑ÿßÿπŸä";return parseFloat(s==="ÿ¨ŸÖŸÑÿ©"?o.price_ÿ¨ŸÖŸÑÿ©:s==="ÿµŸÅÿ≠ÿ©"?o.price_ÿµŸÅÿ≠ÿ©:o.price_ŸÇÿ∑ÿßÿπŸä)},$e=()=>{ie.back()},je=()=>{console.log("Opening customer modal..."),C.value=!0,console.log("showCustomerModal:",C.value)},se=(o,e)=>{console.log("üéØ selectCustomer called"),console.log("  - customerId:",o,"type:",typeof o),console.log("  - customerName:",e),console.log("  - Before: selectedCustomer.value =",n.value),n.value=o,T.value=e,w.value="",console.log("  - After: selectedCustomer.value =",n.value),console.log("  - Modal should close:",n.value!==null),c.success(`ÿ™ŸÖ ÿßÿÆÿ™Ÿäÿßÿ±: ${e}`)},Fe=()=>{if(console.log("üîÑ changeCustomer called"),p.value.length>0&&!confirm("ÿ≥Ÿäÿ™ŸÖ ŸÖÿ≥ÿ≠ ÿßŸÑÿ≥ŸÑÿ© ÿßŸÑÿ≠ÿßŸÑŸäÿ©. ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿßŸÑŸÖÿ™ÿßÿ®ÿπÿ©ÿü")){console.log("  - User cancelled");return}p.value=[],n.value=null,T.value="",w.value="",console.log("  - Customer cleared, modal should show")},Le=()=>{if(n.value===0||n.value===null)return"ŸÇÿ∑ÿßÿπŸä";const o=y.value.find(e=>e.id===n.value);return(o==null?void 0:o.segment)||"ŸÇÿ∑ÿßÿπŸä"};return Ve(()=>{console.log("üöÄ Component mounted"),console.log("üìä selectedCustomer on mount:",n.value),Z(),Me()}),(o,e)=>(u(),d(V,null,[n.value===null?(u(),d("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:R($e,["self"])},[t("div",Je,[t("button",{onClick:e[0]||(e[0]=s=>o.$router.back()),class:"absolute top-4 left-4 text-gray-400 hover:text-gray-600 transition-colors",title:"ÿßŸÑŸÇÿßÿ¶ŸÖÿ©"},[...e[16]||(e[16]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])]),t("div",Re,[e[18]||(e[18]=t("h2",{class:"text-3xl font-bold text-gray-900 mb-2"},"ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ŸÉ ŸÅŸä ŸÜŸÇÿ∑ÿ© ÿßŸÑÿ®Ÿäÿπ",-1)),e[19]||(e[19]=t("p",{class:"text-gray-600"},"ÿßÿÆÿ™ÿ± ÿßŸÑÿπŸÖŸäŸÑ ŸÑŸÑŸÖÿ™ÿßÿ®ÿπÿ©",-1)),t("div",He,[e[17]||(e[17]=t("strong",null,"üêõ Debug:",-1)),H(" selectedCustomer = "+i(n.value)+" ("+i(typeof n.value)+") ",1)])]),t("div",Ge,[t("div",Ke,[k(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>w.value=s),type:"text",placeholder:"ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ÿπŸÖŸäŸÑ ÿ®ÿßŸÑÿßÿ≥ŸÖ ÿ£Ÿà ÿßŸÑŸáÿßÿ™ŸÅ...",class:"input pl-10 text-lg",autofocus:""},null,512),[[M,w.value]]),P(m(ue),{class:"absolute left-3 top-3.5 text-gray-400",size:24}),w.value?(u(),d("div",Xe,[t("button",{onClick:e[2]||(e[2]=s=>w.value=""),class:"text-gray-400 hover:text-gray-600"},[...e[20]||(e[20]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):I("",!0)])]),t("div",Ye,[t("button",{onClick:e[3]||(e[3]=s=>se(0,"ÿπŸÖŸäŸÑ ÿπÿßÿØŸä")),class:"w-full p-4 bg-gradient-to-r from-gray-100 to-gray-200 hover:from-gray-200 hover:to-gray-300 rounded-xl text-right transition-all border-2 border-transparent hover:border-primary-500"},[...e[21]||(e[21]=[t("div",{class:"flex items-center justify-between"},[t("div",null,[t("p",{class:"font-bold text-lg text-gray-900"},"ÿπŸÖŸäŸÑ ÿπÿßÿØŸä"),t("p",{class:"text-sm text-gray-600"},"ÿ≥ÿπÿ± ŸÇÿ∑ÿßÿπŸä")]),t("div",{class:"bg-primary-100 text-primary-700 px-3 py-1 rounded-full text-sm font-medium"}," ŸÇÿ∑ÿßÿπŸä ")],-1)])]),(u(!0),d(V,null,E(pe.value,s=>(u(),d("button",{key:s.id,onClick:l=>se(s.id,s.name),class:"w-full p-4 bg-white hover:bg-gray-50 rounded-xl text-right transition-all border-2 border-gray-200 hover:border-primary-500"},[t("div",et,[t("div",null,[t("p",tt,i(s.name),1),t("p",st,i(s.phone),1)]),t("div",{class:A(["px-3 py-1 rounded-full text-sm font-medium",{"bg-blue-100 text-blue-700":s.segment==="ÿ¨ŸÖŸÑÿ©","bg-green-100 text-green-700":s.segment==="ŸÇÿ∑ÿßÿπŸä","bg-purple-100 text-purple-700":s.segment==="ÿµŸÅÿ≠ÿ©"}])},i(s.segment),3)])],8,Ze))),128))]),t("button",{onClick:je,class:"w-full btn btn-primary flex items-center justify-center gap-2",type:"button"},[P(m(Ne),{size:20}),e[22]||(e[22]=H(" ÿ•ÿ∂ÿßŸÅÿ© ÿπŸÖŸäŸÑ ÿ¨ÿØŸäÿØ ",-1))])])])):(u(),d("div",ot,[t("div",lt,[t("div",at,[t("div",nt,[k(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>$.value=s),onInput:ve,type:"text",placeholder:f.value==="products"?"ÿßÿ®ÿ≠ÿ´ ÿ®ÿßŸÑÿßÿ≥ŸÖ ÿ£Ÿà ÿßŸÑÿ®ÿßÿ±ŸÉŸàÿØ ÿ£Ÿà ÿßŸÑŸÅÿ¶ÿ©...":"ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ÿ®ÿßŸÇÿ©...",class:"input pl-10 text-lg",autofocus:""},null,40,rt),[[M,$.value]]),P(m(ue),{class:"absolute left-3 top-3.5 text-gray-400",size:24}),O.value?(u(),d("div",ut,[...e[23]||(e[23]=[t("div",{class:"animate-spin rounded-full h-5 w-5 border-b-2 border-primary-600"},null,-1)])])):I("",!0)])]),t("div",it,[t("div",dt,[t("button",{onClick:e[5]||(e[5]=s=>ee("products")),class:A(["px-6 py-2 rounded-md font-medium transition-all",f.value==="products"?"bg-primary-600 text-white shadow-md":"text-gray-700 hover:bg-gray-100"])}," ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ ",2),t("button",{onClick:e[6]||(e[6]=s=>ee("packages")),class:A(["px-6 py-2 rounded-md font-medium transition-all",f.value==="packages"?"bg-primary-600 text-white shadow-md":"text-gray-700 hover:bg-gray-100"])}," ÿßŸÑÿ®ÿßŸÇÿßÿ™ ",2)])]),t("div",ct,[(u(!0),d(V,null,E(ce.value,s=>(u(),d("div",{key:s.id,onClick:l=>xe(s),class:"card hover:shadow-lg cursor-pointer transition-all hover:scale-105"},[t("div",vt,[s.photos&&JSON.parse(s.photos)[0]?(u(),d("img",{key:0,src:fe(s.photos),alt:s.name_ar,class:"w-full h-full object-cover"},null,8,mt)):(u(),Ae(m(De),{key:1,size:48,class:"text-gray-400"}))]),t("h4",gt,i(s.name_ar),1),f.value==="products"?(u(),d("p",ft,i(ye(s.volume_ml)),1)):(u(),d("p",yt,i(s.description||"ÿ®ÿßŸÇÿ©"),1)),t("div",bt,[t("span",xt,i(m(B)(te(s))),1),t("span",{class:A(["text-xs badge",s.quantity>0?"badge-success":"badge-danger"])},i(m(G)(s.quantity))+" ŸÇÿ∑ÿπÿ© ",3)])],8,pt))),128))])]),t("div",ht,[t("div",wt,[t("div",kt,[t("div",_t,[t("div",null,[e[24]||(e[24]=t("p",{class:"text-sm text-gray-600"},"ÿßŸÑÿπŸÖŸäŸÑ ÿßŸÑÿ≠ÿßŸÑŸä",-1)),t("p",Ct,i(T.value),1)]),t("button",{onClick:Fe,class:"text-sm text-primary-600 hover:text-primary-800 font-medium"}," ÿ™ÿ∫ŸäŸäÿ± ")]),t("div",Pt," ÿßŸÑÿ≥ÿπÿ±: "+i(Le()),1)]),t("h3",Mt,[P(m(Te),{size:24}),e[25]||(e[25]=H(" ÿ≥ŸÑÿ© ÿßŸÑŸÖÿ¥ÿ™ÿ±Ÿäÿßÿ™ ",-1))]),t("div",qt,[p.value.length===0?(u(),d("div",St," ÿßŸÑÿ≥ŸÑÿ© ŸÅÿßÿ±ÿ∫ÿ© ")):I("",!0),(u(!0),d(V,null,E(p.value,s=>(u(),d("div",{key:s.product.id,class:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg"},[t("div",$t,[t("p",jt,i(s.product.name_ar),1),t("p",Ft,i(m(B)(s.unit_price)),1)]),t("div",Lt,[t("button",{onClick:l=>we(s),class:"w-7 h-7 rounded bg-gray-200 hover:bg-gray-300"},[P(m(We),{size:16,class:"mx-auto"})],8,zt),t("span",Ut,i(m(G)(s.quantity)),1),t("button",{onClick:l=>he(s),class:"w-7 h-7 rounded bg-gray-200 hover:bg-gray-300"},[P(m(Qe),{size:16,class:"mx-auto"})],8,It)]),t("button",{onClick:l=>Y(s),class:"text-red-600 hover:text-red-800"},[P(m(Oe),{size:18})],8,Vt)]))),128))]),t("div",At,[t("div",Bt,[e[26]||(e[26]=t("span",null,"ÿßŸÑŸÖÿ¨ŸÖŸàÿπ ÿßŸÑŸÅÿ±ÿπŸä:",-1)),t("span",Nt,i(m(B)(K.value)),1)]),t("div",Dt,[e[27]||(e[27]=t("span",null,"ÿßŸÑÿÆÿµŸÖ:",-1)),k(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>j.value=s),type:"number",step:"0.01",class:"input w-32 text-left py-1"},null,512),[[M,j.value,void 0,{number:!0}]])]),t("div",Tt,[e[28]||(e[28]=t("span",null,"ÿßŸÑÿ∂ÿ±Ÿäÿ®ÿ©:",-1)),k(t("input",{"onUpdate:modelValue":e[8]||(e[8]=s=>F.value=s),type:"number",step:"0.01",class:"input w-32 text-left py-1"},null,512),[[M,F.value,void 0,{number:!0}]])]),t("div",Et,[e[29]||(e[29]=t("span",null,"ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä:",-1)),t("span",Qt,i(m(B)(z.value)),1)]),t("div",Ot,[e[30]||(e[30]=t("span",null,"ÿßŸÑŸÖÿ®ŸÑÿ∫ ÿßŸÑŸÖÿØŸÅŸàÿπ:",-1)),k(t("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>L.value=s),type:"number",step:"0.01",placeholder:z.value.toString(),class:"input w-32 text-left py-1"},null,8,Wt),[[M,L.value,void 0,{number:!0}]])]),X.value>0?(u(),d("div",Jt,[e[31]||(e[31]=t("span",null,"ÿßŸÑŸÖÿ™ÿ®ŸÇŸä:",-1)),t("span",null,i(m(B)(X.value)),1)])):I("",!0)]),t("div",Rt,[e[32]||(e[32]=t("label",{class:"block text-sm font-medium mb-2"},"ÿ∑ÿ±ŸäŸÇÿ© ÿßŸÑÿØŸÅÿπ",-1)),t("div",Ht,[(u(),d(V,null,E(de,s=>t("button",{key:s.value,onClick:l=>Q.value=s.value,class:A([Q.value===s.value?"bg-primary-600 text-white":"bg-gray-100","py-2 rounded-lg font-medium transition-all"])},i(s.label),11,Gt)),64))])]),t("div",Kt,[t("button",{onClick:Ce,disabled:p.value.length===0,class:"btn btn-success w-full py-3 text-lg"}," ÿ•ÿ™ŸÖÿßŸÖ ÿßŸÑÿ®Ÿäÿπ ",8,Xt),t("button",{onClick:ke,class:"btn btn-secondary w-full"}," ŸÖÿ≥ÿ≠ ÿßŸÑÿ≥ŸÑÿ© ")])])])])),C.value?(u(),d("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]",onClick:e[15]||(e[15]=R(s=>C.value=!1,["self"]))},[t("div",Yt,[t("button",{onClick:e[10]||(e[10]=s=>C.value=!1),class:"absolute top-4 left-4 text-gray-400 hover:text-gray-600 transition-colors",title:"ÿ•ÿ∫ŸÑÿßŸÇ"},[...e[33]||(e[33]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),e[39]||(e[39]=t("h3",{class:"text-2xl font-bold mb-4"},"ÿ•ÿ∂ÿßŸÅÿ© ÿπŸÖŸäŸÑ ÿ¨ÿØŸäÿØ",-1)),t("form",{onSubmit:R(_e,["prevent"]),class:"space-y-4"},[t("div",null,[e[34]||(e[34]=t("label",{class:"block text-sm font-medium mb-2"},"ÿßŸÑÿßÿ≥ŸÖ *",-1)),k(t("input",{"onUpdate:modelValue":e[11]||(e[11]=s=>b.value.name=s),type:"text",required:"",class:"input",placeholder:"ÿ£ÿ≠ŸÖÿØ ŸÖÿ≠ŸÖÿØ",autofocus:""},null,512),[[M,b.value.name]])]),t("div",null,[e[35]||(e[35]=t("label",{class:"block text-sm font-medium mb-2"},"ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ *",-1)),k(t("input",{"onUpdate:modelValue":e[12]||(e[12]=s=>b.value.phone=s),type:"tel",required:"",class:"input",placeholder:"01012345678",pattern:"[0-9]{11}",title:"ÿßŸÑÿ±ÿ¨ÿßÿ° ÿ•ÿØÿÆÿßŸÑ ÿ±ŸÇŸÖ Ÿáÿßÿ™ŸÅ ÿµÿ≠Ÿäÿ≠ (11 ÿ±ŸÇŸÖ)"},null,512),[[M,b.value.phone]])]),t("div",null,[e[37]||(e[37]=t("label",{class:"block text-sm font-medium mb-2"},"ÿßŸÑÿ¥ÿ±Ÿäÿ≠ÿ©",-1)),k(t("select",{"onUpdate:modelValue":e[13]||(e[13]=s=>b.value.segment=s),class:"input"},[...e[36]||(e[36]=[t("option",{value:"ŸÇÿ∑ÿßÿπŸä"},"ŸÇÿ∑ÿßÿπŸä",-1),t("option",{value:"ÿ¨ŸÖŸÑÿ©"},"ÿ¨ŸÖŸÑÿ©",-1),t("option",{value:"ÿµŸÅÿ≠ÿ©"},"ÿµŸÅÿ≠ÿ©",-1)])],512),[[Be,b.value.segment]])]),t("div",Zt,[t("button",{type:"button",onClick:e[14]||(e[14]=s=>C.value=!1),class:"btn btn-secondary flex-1"},"ÿ•ŸÑÿ∫ÿßÿ°"),e[38]||(e[38]=t("button",{type:"submit",class:"btn btn-primary flex-1"},"ÿ≠ŸÅÿ∏ Ÿàÿ•ÿ∂ÿßŸÅÿ©",-1))])],32)])])):I("",!0)],64))}};export{ds as default};
